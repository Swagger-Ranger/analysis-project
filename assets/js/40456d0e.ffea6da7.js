"use strict";(self.webpackChunkanalytic_project=self.webpackChunkanalytic_project||[]).push([[9577],{4213:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var a=t(4848),o=t(8453);const s={title:"\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",sidebar_position:5,toc_min_heading_level:2,toc_max_heading_level:5},r=void 0,i={id:"DevOps/\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",title:"\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",description:"\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u662f\u5b58\u5728\u54ea\u91cc\u7684",source:"@site/docs/DevOps/\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7.mdx",sourceDirName:"DevOps",slug:"/DevOps/\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",permalink:"/analysis-project/docs/DevOps/\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",draft:!1,unlisted:!1,editUrl:"https://github.com/Swagger-Ranger/analysis-project/docs/DevOps/\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"\u5bb9\u5668\u4e2d\u7684\u65e5\u5fd7",sidebar_position:5,toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"devopsSidebar",previous:{title:"Harbor",permalink:"/analysis-project/docs/DevOps/Harbor\u624b\u518c"}},l={},c=[{value:"\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u662f\u5b58\u5728\u54ea\u91cc\u7684",id:"\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u662f\u5b58\u5728\u54ea\u91cc\u7684",level:3},{value:"logrotate\u65e5\u5fd7\u7b56\u7565",id:"logrotate\u65e5\u5fd7\u7b56\u7565",level:3},{value:"\u914d\u7f6eprometail\u65e5\u5fd7\u6536\u96c6",id:"\u914d\u7f6eprometail\u65e5\u5fd7\u6536\u96c6",level:3}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h3,{id:"\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u662f\u5b58\u5728\u54ea\u91cc\u7684",children:"\u5bb9\u5668\u4e2d\u7684\u9ed8\u8ba4\u662f\u5b58\u5728\u54ea\u91cc\u7684"}),"\n",(0,a.jsxs)(e.p,{children:["\u5982\u679c\u4f7f\u7528 systemd \u4f5c\u4e3a init \u7cfb\u7edf\uff0c\u90a3\u4e48 containerd \u548c runc",(0,a.jsx)(e.sup,{children:(0,a.jsx)(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"\u7684\u65e5\u5fd7\u901a\u5e38\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230 systemd-journald \u4e2d\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5bb9\u5668\u7684\u65e5\u5fd7\u53ef\u4ee5\u901a\u8fc7 journalctl \u547d\u4ee4\u6765\u8bbf\u95ee\u548c\u67e5\u770b\u3002"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"journalctl -u containerd\n#journalctl\uff1a\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u67e5\u8be2\u7cfb\u7edf\u65e5\u5fd7\u7684\u547d\u4ee4\u884c\u5de5\u5177\u3002\u5b83\u53ef\u4ee5\u8bbf\u95ee systemd-journald \u670d\u52a1\u7684\u65e5\u5fd7\u6570\u636e\uff0c\u540e\u8005\u662fsystemd \u7ba1\u7406\u7684\u65e5\u5fd7\u5b88\u62a4\u8fdb\u7a0b\u3002\n#-u containerd\uff1a\u8fd9\u662f\u4e00\u4e2a\u9009\u9879\uff0c\u7528\u4e8e\u6307\u5b9a\u8981\u67e5\u770b\u7684\u65e5\u5fd7\u5355\u5143\uff08unit\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0ccontainerd \u662f\u4e00\u4e2a\u7cfb\u7edf\u670d\u52a1\u5355\u5143\u7684\u540d\u79f0\uff0c\u5b83\u544a\u8bc9 journalctl \u53ea\u663e\u793a\u4e0e containerd \u670d\u52a1\u76f8\u5173\u7684\u65e5\u5fd7\u8bb0\u5f55\u3002\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5177\u4f53\u800c\u8a00\uff0ccontainerd \u4e0e runc \u4e00\u8d77\u534f\u4f5c\u7ba1\u7406\u5bb9\u5668\u7684\u751f\u547d\u5468\u671f\u3002\u5f53\u5bb9\u5668\u542f\u52a8\u65f6\uff0ccontainerd \u4f1a\u521b\u5efa\u4e00\u4e2a runc \u8fdb\u7a0b\u6765\u8fd0\u884c\u5bb9\u5668\uff0c\u5e76\u5c06\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u8fde\u63a5\u5230 runc \u8fdb\u7a0b\u7684\u8f93\u51fa\u3002runc \u8fdb\u7a0b\u7684\u8f93\u51fa\u901a\u5e38\u4f1a\u88ab\u91cd\u5b9a\u5411\u5230\u7cfb\u7edf\u7684\u65e5\u5fd7\u7cfb\u7edf\u4e2d\uff0c\u4f8b\u5982 systemd-journald\u3002"}),"\n",(0,a.jsxs)(e.p,{children:["\u800c ",(0,a.jsx)(e.code,{children:"kubectl logs"})," \u547d\u4ee4\u5b9e\u9645\u4e0a\u4f1a\u4ece\u5bb9\u5668\u7684\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u4e2d\u63d0\u53d6\u65e5\u5fd7\uff0c\u5e76\u663e\u793a\u5728\u7ec8\u7aef\u4e0a\u3002\u8fd9\u4e9b\u65e5\u5fd7\u6700\u7ec8\u4f1a\u88ab\u7cfb\u7edf\u65e5\u5fd7\u8bb0\u5f55\u5668\uff08\u5982 systemd-journald\uff09\u8bb0\u5f55\uff0c\u8bb0\u5f55\u5728node\u8282\u70b9\u7684\u7cfb\u7edf\u65e5\u5fd7\u8def\u5f84\u4e2d\uff0c\u6bd4\u5982",(0,a.jsx)(e.code,{children:"/var/log/containers/"}),"\u8def\u5f84\u4e2d\uff1a"]}),"\n",(0,a.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,a.jsx)("img",{src:"/analysis-project/img/devops/devops-0.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(e.p,{children:["\u540c\u65f6\u8fd9\u4e9b\u6587\u4ef6\u90fd\u662f\u8f6f\u8fde\u63a5\u90fd\u6307\u5411",(0,a.jsx)(e.code,{children:" /var/log/pods/"}),"\u8def\u5f84\u4e0b\u7684\u65e5\u5fd7\u6587\u4ef6"]}),"\n",(0,a.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,a.jsx)("img",{src:"/analysis-project/img/devops/devops-1.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["\u5982\u679c\u662fdocker\u65e5\u5fd7\uff0c\u5219\u4e00\u822c\u5728 ",(0,a.jsx)(e.code,{children:"/var/lib/docker/containers"})," \u4e0b"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"logrotate\u65e5\u5fd7\u7b56\u7565",children:"logrotate\u65e5\u5fd7\u7b56\u7565"}),"\n",(0,a.jsxs)(e.p,{children:["Linux\u7684\u7cfb\u7edf\u65e5\u5fd7\u7b56\u7565\u914d\u7f6e\u5728",(0,a.jsx)(e.code,{children:"/etc/logrotate.conf"}),' \u4e2d\uff0crotate"\u8f6e\u8f6c" \u6307\u7684\u662f\u6309\u7167\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u7b56\u7565\u5bf9\u65e5\u5fd7\u6587\u4ef6\u8fdb\u884c\u7ba1\u7406\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u901a\u5e38\u5305\u62ec\u91cd\u547d\u540d\u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u3001\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7a7a\u65e5\u5fd7\u6587\u4ef6\uff0c\u4ee5\u53ca\u6839\u636e\u914d\u7f6e\u5220\u9664\u6216\u538b\u7f29\u65e7\u7684\u65e5\u5fd7\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a']}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sh",children:'[root@node5 logrotate.d]# cat /etc/logrotate.conf\n# see "man logrotate" for details\n# rotate log files weekly\nweekly\n\n# keep 4 weeks worth of backlogs\nrotate 4\n\n# create new (empty) log files after rotating old ones\ncreate\n\n# use date as a suffix of the rotated file\ndateext\n\n# uncomment this if you want your log files compressed\n#compress\n\n# RPM packages drop log rotation information into this directory\ninclude /etc/logrotate.d\n\n# no packages own wtmp and btmp -- we\'ll rotate them here\n/var/log/wtmp {\n    monthly\n    create 0664 root utmp\n        minsize 1M\n    rotate 1\n}\n\n/var/log/btmp {\n    missingok\n    monthly\n    create 0600 root utmp\n    rotate 1\n}\n\n'})}),"\n",(0,a.jsxs)(e.p,{children:["\u5185\u5bb9\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u4e00\u4e2a\u662f\u666e\u901a\u7684\u914d\u7f6e\uff0c\u6bd4\u5982 ",(0,a.jsx)(e.code,{children:"weekly"}),"\u3001",(0,a.jsx)(e.code,{children:"create"}),"\u7b49\uff0c\u548c\u7279\u6b8a\u914d\u7f6e\u6bd4\u5982\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sh",children:"/var/log/btmp {\n    missingok\n    monthly\n    create 0600 root utmp\n    rotate 1\n}\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5b57\u6bb5\u5185\u5bb9\u89e3\u91ca\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sh",children:"/var/log/myapp.log {\n    daily             # \u6bcf\u5929\u8f6e\u8f6c\n    rotate 7          # \u4fdd\u7559 7 \u5929\u7684\u65e5\u5fd7\u6587\u4ef6\n    compress          # \u8f6e\u8f6c\u540e\u538b\u7f29\u65e7\u65e5\u5fd7\u6587\u4ef6\n    delaycompress     # \u5ef6\u8fdf\u5230\u4e0b\u4e00\u4e2a\u8f6e\u8f6c\u5468\u671f\u624d\u538b\u7f29\n    create 0640 root adm  # \u521b\u5efa\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u6743\u9650\u4e3a 0640\uff0c\u6240\u6709\u8005\u4e3a root\uff0c\u7ec4\u4e3a adm\n    dateext           # \u4f7f\u7528\u65e5\u671f\u4f5c\u4e3a\u8f6e\u8f6c\u6587\u4ef6\u7684\u540e\u7f00\n    maxsize 200M      # \u65e5\u5fd7\u6587\u4ef6\u8fbe\u5230 200MB \u65f6\u7acb\u5373\u8fdb\u884c\u8f6e\u8f6c\n    minsize 100M      # \u65e5\u5fd7\u6587\u4ef6\u81f3\u5c11\u8fbe\u5230 100MB \u65f6\u624d\u8fdb\u884c\u8f6e\u8f6c\n    postrotate\n        /usr/bin/killall -HUP myapp  # \u8f6e\u8f6c\u540e\u6267\u884c\u547d\u4ee4\uff0c\u91cd\u542f\u65e5\u5fd7\u8bb0\u5f55\u8fdb\u7a0b\n    endscript\n}\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u914d\u7f6eprometail\u65e5\u5fd7\u6536\u96c6",children:"\u914d\u7f6eprometail\u65e5\u5fd7\u6536\u96c6"}),"\n",(0,a.jsx)(e.p,{children:"prometail\u662floki\u63a8\u8350\u7684\u65e5\u5fd7\u6536\u96c6\u5de5\u5177\u3002\u9996\u5148Loki \u901a\u8fc7\u4f7f\u7528\u7c7b\u4f3c Prometheus \u7684\u6807\u7b7e\u7d22\u5f15\u673a\u5236\u6765\u5b58\u50a8\u548c\u67e5\u8be2\u65e5\u5fd7\u6570\u636e\uff0c\u8fd9\u4f7f\u5f97\u5b83\u80fd\u591f\u5feb\u901f\u5730\u8fdb\u884c\u5206\u5e03\u5f0f\u67e5\u8be2\u548c\u805a\u5408\uff0c\u800c\u4e0d\u9700\u8981\u5c06\u6240\u6709\u6570\u636e\u90fd\u4ece\u5b58\u50a8\u4e2d\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002Loki\u8fd8\u4f7f\u7528\u4e86\u538b\u7f29\u548c\u5207\u5272\u65e5\u5fd7\u6570\u636e\u7684\u65b9\u6cd5\u6765\u51cf\u5c11\u5b58\u50a8\u7a7a\u95f4\u7684\u5360\u7528\uff0c\u4ece\u800c\u66f4\u597d\u5730\u9002\u5e94\u4e91\u539f\u751f\u73af\u5883\u4e0b\u7684\u9ad8\u901f\u589e\u957f\u7684\u65e5\u5fd7\u6570\u636e\u91cf\u3002"}),"\n",(0,a.jsx)(e.p,{children:"Loki\u7684\u67b6\u6784\u7531\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u7ec4\u4ef6\u7ec4\u6210\uff1a"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Promtail:"})," \u8d1f\u8d23\u91c7\u96c6\u5e94\u7528\u7a0b\u5e8f\u548c\u7cfb\u7edf\u7684\u65e5\u5fd7\u6570\u636e\uff0c\u5e76\u5c06\u5176\u53d1\u9001\u5230 Loki \u7684\u96c6\u7fa4\u4e2d\u3002"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Loki:"})," \u8d1f\u8d23\u5b58\u50a8\u65e5\u5fd7\u6570\u636e\uff0c\u63d0\u4f9b HTTP API \u7684\u65e5\u5fd7\u67e5\u8be2\uff0c\u4ee5\u53ca\u6570\u636e\u8fc7\u6ee4\u548c\u7b5b\u9009\u3002"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Grafana:"})," \u8d1f\u8d23 UI \u5c55\u793a\u65e5\u5fd7\u6570\u636e\u3002"]}),"\n",(0,a.jsx)(e.p,{children:"\u90e8\u7f72Promtail deamonset\u901a\u8fc7\u53bb\u62c9\u53d6\u8282\u70b9\u4e0a\u5bb9\u5668\u6620\u5c04\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u5e76\u53d1\u9001\u7ed9loki\uff0cloki\u590d\u6742\u5b58\u50a8\u548c\u7d22\u5f15\u65e5\u5fd7\u5185\u5bb9\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u90e8\u7f72Promtail\u9700\u8981\u4e00\u4e0b\u51e0\u4e2a\u8d44\u6e90\u5bf9\u8c61\uff1a"}),"\n",(0,a.jsx)(e.p,{children:"**ConfigMap  **"}),"\n",(0,a.jsx)(e.p,{children:"Promtail\u7684\u914d\u7f6e\u548cPromethues\u7684\u975e\u5e38\u76f8\u4f3c\uff0cscrape_configs\u7684job\u5c31\u662f\u91c7\u96c6\u4efb\u52a1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: promtail-config\n  namespace: istio-system\ndata:\n  promtail.yaml: |\n    server:\n      http_listen_port: 9080\n      grpc_listen_port: 0\n\n    positions:\n      filename: /tmp/positions.yaml\n\n    clients:\n      - url: http://loki:3100/loki/api/v1/push\n\n    scrape_configs:\n    - job_name: kubernetes-pods\n      kubernetes_sd_configs:\n        - role: pod\n      relabel_configs:\n        - source_labels: [__meta_kubernetes_pod_node_name]\n          target_label: __host__\n        - source_labels: [__meta_kubernetes_namespace]\n          target_label: namespace\n        - source_labels: [__meta_kubernetes_pod_name]\n          target_label: pod\n        - source_labels: [__meta_kubernetes_pod_container_name]\n          target_label: container\n      pipeline_stages:\n        - docker: {}\n      static_configs:\n        - targets:\n            - localhost\n          labels:\n            job: kubernetes-pods\n            __path__: /var/log/containers/*.log\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"DaemonSet"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: promtail\n  namespace: istio-system\n  labels:\n    app: promtail\nspec:\n  selector:\n    matchLabels:\n      app: promtail\n  template:\n    metadata:\n      labels:\n        app: promtail\n    spec:\n      serviceAccountName: promtail\n      containers:\n      - name: promtail\n        image: grafana/promtail:2.7.1\n        args:\n          - -config.file=/etc/promtail/promtail.yaml\n        ports:\n          - containerPort: 9080\n            name: promtail\n        volumeMounts:\n          - name: config\n            mountPath: /etc/promtail\n          - name: varlog\n            mountPath: /var/log\n          - name: varlibdockercontainers\n            mountPath: /var/lib/docker/containers\n            readOnly: true\n      volumes:\n        - name: config\n          configMap:\n            name: promtail-config\n        - name: varlog\n          hostPath:\n            path: /var/log\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u914d\u7f6e\u89d2\u8272"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:'apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: promtail\nrules:\n- apiGroups: [""]\n  resources: ["pods", "nodes", "namespaces"]\n  verbs: ["get", "list", "watch"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: promtail\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: promtail\nsubjects:\n- kind: ServiceAccount\n  name: promtail\n  namespace: istio-system\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"ServiceAccount"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: promtail\n  namespace: istio-system\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u7136\u540e\u5728grafana\u4e2d\u9009\u62e9loki\u5c31\u53ef\u4ee5\u67e5\u8be2\u914d\u7f6e\u7684\u65e5\u5fd7\u91c7\u96c6\u4efb\u52a1\u4e86"}),"\n",(0,a.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,a.jsx)("img",{src:"/analysis-project/img/devops/devops-2.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,a.jsx)(e.p,{children:"\xa0\n\xa0"}),"\n","\n",(0,a.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,a.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{id:"user-content-fn-1",children:["\n",(0,a.jsxs)(e.p,{children:["runc \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u5bb9\u5668\u8fd0\u884c\u65f6\u5de5\u5177\uff0c\u7528\u4e8e\u521b\u5efa\u548c\u8fd0\u884c\u7b26\u5408 OCI\uff08Open Container Initiative\uff09\u6807\u51c6\u7684\u5bb9\u5668\u3002\u5b83\u901a\u5e38\u7528\u4f5c\u5bb9\u5668\u8fd0\u884c\u65f6\u7684\u4e00\u90e8\u5206\uff0c\u8d1f\u8d23\u5b9e\u9645\u542f\u52a8\u548c\u7ba1\u7406\u5bb9\u5668\u8fdb\u7a0b ",(0,a.jsx)(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>r,x:()=>i});var a=t(6540);const o={},s=a.createContext(o);function r(n){const e=a.useContext(s);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),a.createElement(s.Provider,{value:e},n.children)}}}]);
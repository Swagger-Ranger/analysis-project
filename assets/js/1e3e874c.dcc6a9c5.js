"use strict";(self.webpackChunkanalytic_project=self.webpackChunkanalytic_project||[]).push([[3573],{9147:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>t});var i=r(4848),s=r(8453);const a={title:"Kafka\u624b\u518c1-\u529f\u80fd",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:5},o=void 0,c={id:"coreMiddleware/kakfa/Kafka\u624b\u518c1-\u529f\u80fd",title:"Kafka\u624b\u518c1-\u529f\u80fd",description:"Kafka\u5feb\u901f\u4e0a\u624b",source:"@site/docs/coreMiddleware/kakfa/Kafka\u624b\u518c1-\u529f\u80fd.mdx",sourceDirName:"coreMiddleware/kakfa",slug:"/coreMiddleware/kakfa/Kafka\u624b\u518c1-\u529f\u80fd",permalink:"/analysis-project/docs/coreMiddleware/kakfa/Kafka\u624b\u518c1-\u529f\u80fd",draft:!1,unlisted:!1,editUrl:"https://github.com/Swagger-Ranger/analysis-project/docs/coreMiddleware/kakfa/Kafka\u624b\u518c1-\u529f\u80fd.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Kafka\u624b\u518c1-\u529f\u80fd",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:5},sidebar:"middlewareSidebar",previous:{title:"influxdb\u624b\u518c",permalink:"/analysis-project/docs/coreMiddleware/influxdb/influxdb\u624b\u518c"},next:{title:"Kafka\u624b\u518c2-\u67b6\u6784",permalink:"/analysis-project/docs/coreMiddleware/kakfa/Kafka\u624b\u518c2-\u67b6\u6784"}},l={},t=[{value:"Kafka\u5feb\u901f\u4e0a\u624b",id:"kafka\u5feb\u901f\u4e0a\u624b",level:2},{value:"\u57fa\u7840\u6982\u5ff5",id:"\u57fa\u7840\u6982\u5ff5",level:3},{value:"Docker\u90e8\u7f72",id:"docker\u90e8\u7f72",level:3},{value:"Kafka\u6838\u5fc3\u529f\u80fd",id:"kafka\u6838\u5fc3\u529f\u80fd",level:2},{value:"\u786c\u4ef6\u8003\u91cf",id:"\u786c\u4ef6\u8003\u91cf",level:3},{value:"broker\u914d\u7f6e",id:"broker\u914d\u7f6e",level:3},{value:"\u5206\u533a\u6570\u91cf",id:"\u5206\u533a\u6570\u91cf",level:3},{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005",level:3},{value:"\u6d88\u606f\u53d1\u9001",id:"\u6d88\u606f\u53d1\u9001",level:4},{value:"\u53c2\u6570\u914d\u7f6e",id:"\u53c2\u6570\u914d\u7f6e",level:4},{value:"\u5e8f\u5217\u5316\u5668",id:"\u5e8f\u5217\u5316\u5668",level:4},{value:"\u53d1\u9001\u6307\u5b9a\u5206\u533a",id:"\u53d1\u9001\u6307\u5b9a\u5206\u533a",level:4},{value:"\u914d\u989d\u9650\u5236\u548c\u9650\u6d41",id:"\u914d\u989d\u9650\u5236\u548c\u9650\u6d41",level:4},{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005",level:3},{value:"\u6d88\u8d39\u8005\u7fa4\u7ec4\uff08Consumer Group\uff09",id:"\u6d88\u8d39\u8005\u7fa4\u7ec4consumer-group",level:4},{value:"\u6d88\u8d39\u8005\uff08Consumer\uff09",id:"\u6d88\u8d39\u8005consumer",level:4},{value:"\u7248\u672c\u53d1\u5e03\u65f6\u5904\u7406\u5206\u533a\u5e73\u8861",id:"\u7248\u672c\u53d1\u5e03\u65f6\u5904\u7406\u5206\u533a\u5e73\u8861",level:4},{value:"\u6d88\u8d39\u8005\u53c2\u6570",id:"\u6d88\u8d39\u8005\u53c2\u6570",level:4},{value:"\u6d88\u8d39\u8005\u5206\u533a\u5206\u914d\u7b56\u7565",id:"\u6d88\u8d39\u8005\u5206\u533a\u5206\u914d\u7b56\u7565",level:4},{value:"\u6d88\u8d39\u4f4d\u79fb\u63d0\u4ea4",id:"\u6d88\u8d39\u4f4d\u79fb\u63d0\u4ea4",level:4},{value:"ConsumerRebalanceListener",id:"consumerrebalancelistener",level:4},{value:"\u6d88\u8d39\u8005\u4f18\u96c5\u9000\u51fa",id:"\u6d88\u8d39\u8005\u4f18\u96c5\u9000\u51fa",level:4}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"kafka\u5feb\u901f\u4e0a\u624b",children:"Kafka\u5feb\u901f\u4e0a\u624b"}),"\n",(0,i.jsx)(n.p,{children:"Kafka\u662f\u4e00\u6b3e\u57fa\u4e8e\u53d1\u5e03\u4e0e\u8ba2\u9605\u7684\u6d88\u606f\u7cfb\u7edf\u3002\u5b83\u4e00\u822c\u88ab\u79f0\u4e3a\u201c\u5206\u5e03\u5f0f\u63d0\u4ea4\u65e5\u5fd7\u201d\u6216\u8005\u201c\u5206\u5e03\u5f0f\u6d41\u5e73\u53f0\u201d\u3002\u6587\u4ef6\u7cfb\u7edf\u6216\u6570\u636e\u5e93\u63d0\u4ea4\u65e5\u5fd7\u7528\u6765\u63d0\u4f9b\u6240\u6709\u4e8b\u52a1\u7684\u6301\u4e45\u8bb0\u5f55\uff0c\u901a\u8fc7\u91cd\u653e\u8fd9\u4e9b\u65e5\u5fd7\u53ef\u4ee5\u91cd\u5efa\u7cfb\u7edf\u7684\u72b6\u6001\u3002\u540c\u6837\u5730\uff0cKafka \u7684\u6570\u636e\u662f\u6309\u7167\u4e00\u5b9a\u987a\u5e8f\u6301\u4e45\u5316\u4fdd\u5b58\u7684\uff0c\u53ef\u4ee5\u6309\u9700\u8bfb\u53d6\u3002\u6b64\u5916\uff0cKafka \u7684\u6570\u636e\u5206\u5e03\u5728\u6574\u4e2a\u7cfb\u7edf\u91cc\uff0c\u5177\u5907\u6570\u636e\u6545\u969c\u4fdd\u62a4\u548c\u6027\u80fd\u4f38\u7f29\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u57fa\u7840\u6982\u5ff5",children:"\u57fa\u7840\u6982\u5ff5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u6d88\u606f\u4e0e\u6279\u6b21"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Kafka \u7684\u6570\u636e\u5355\u5143\u88ab\u79f0\u4e3a\u6d88\u606f\uff0c\u5bf9\u4e8ekafka\u6765\u8bf4\u6d88\u606f\u91cc\u7684\u6570\u636e\u6ca1\u6709\u7279\u522b\u7684\u683c\u5f0f\u6216\u542b\u4e49\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u6d88\u606f\u53ef\u4ee5\u6709\u4e00\u4e2a\u53ef\u9009\u7684\u5143\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u952e\u3002\u952e\u4e5f\u662f\u4e00\u4e2a\u5b57\u8282\u6570\u7ec4\uff0c\u4e0e\u6d88\u606f\u4e00\u6837\uff0c\u5bf9\u4e8e Kafka \u6765\u8bf4\u4e5f\u6ca1\u6709\u7279\u6b8a\u7684\u542b\u4e49\u3002\u5f53\u6d88\u606f\u4ee5\u4e00\u79cd\u53ef\u63a7\u7684\u65b9\u5f0f\u5199\u5165\u4e0d\u540c\u7684\u5206\u533a\u65f6\uff0c\u4f1a\u7528\u5230\u952e\u3002\u6700\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662f\u4e3a\u952e\u751f\u6210\u4e00\u4e2a\u4e00\u81f4\u6027\u6563\u5217\u503c\uff0c\u7136\u540e\u4f7f\u7528\u6563\u5217\u503c\u5bf9\u4e3b\u9898\u5206\u533a\u6570\u8fdb\u884c\u53d6\u6a21\uff0c\u4e3a\u6d88\u606f\u9009\u53d6\u5206\u533a\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5177\u6709\u76f8\u540c\u952e\u7684\u6d88\u606f\u603b\u662f\u88ab\u5199\u5230\u76f8\u540c\u7684\u5206\u533a\u4e0a\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e86\u63d0\u9ad8\u6548\u7387\uff0c\u6d88\u606f\u88ab\u5206\u6279\u6b21\u5199\u5165 Kafka\u3002\u6279\u6b21\u5c31\u662f\u4e00\u7ec4\u6d88\u606f\uff0c\u8fd9\u4e9b\u6d88\u606f\u5c5e\u4e8e\u540c\u4e00\u4e2a\u4e3b\u9898\u548c\u5206\u533a\u3002\u5982\u679c\u6bcf\u4e00\u4e2a\u6d88\u606f\u90fd\u5355\u72ec\u7a7f\u884c\u4e8e\u7f51\u7edc\uff0c\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u7f51\u7edc\u5f00\u9500\uff0c\u628a\u6d88\u606f\u5206\u6210\u6279\u6b21\u4f20\u8f93\u53ef\u4ee5\u51cf\u5c11\u7f51\u7edc\u5f00\u9500\u3002\u4e0d\u8fc7\uff0c\u8fd9\u8981\u5728\u65f6\u95f4\u5ef6\u8fdf\u548c\u541e\u5410\u91cf\u4e4b\u95f4\u4f5c\u51fa\u6743\u8861\uff1a\u6279\u6b21\u8d8a\u5927\uff0c\u5355\u4f4d\u65f6\u95f4\u5185\u5904\u7406\u7684\u6d88\u606f\u5c31\u8d8a\u591a\uff0c\u5355\u4e2a\u6d88\u606f\u7684\u4f20\u8f93\u65f6\u95f4\u5c31\u8d8a\u957f\u3002\u6279\u6b21\u6570\u636e\u4f1a\u88ab\u538b\u7f29\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u5347\u6570\u636e\u7684\u4f20\u8f93\u548c\u5b58\u50a8\u80fd\u529b\uff0c\u4f46\u8981\u505a\u66f4\u591a\u7684\u8ba1\u7b97\u5904\u7406\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u6570\u636e\u683c\u5f0f(schema)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5bf9\u4e8e Kafka \u6765\u8bf4\uff0c\u6d88\u606f\u4e0d\u8fc7\u662f\u4e9b\u6666\u6da9\u96be\u61c2\u7684\u5b57\u8282\u6570\u7ec4\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u4e00\u4e9b\u989d\u5916\u7684\u7ed3\u6784\u6765\u5b9a\u4e49\u6d88\u606f\u5185\u5bb9\uff0c\u8ba9\u5b83\u4eec\u66f4\u6613\u4e8e\u7406\u89e3\uff0c\u8fd9\u5c31\u662f\u6570\u636e\u683c\u5f0f(schema)\uff0cschema\u6709\u8bb8\u591a\u53ef\u7528\u7684\u9009\u9879\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSON"})," \u548c ",(0,i.jsx)(n.code,{children:"XML"})," \uff1a\u6613\u7528\u3001\u53ef\u8bfb\u6027\u597d\uff0c\u4f46\u7f3a\u4e4f\u5f3a\u7c7b\u578b\u5904\u7406\u80fd\u529b\uff0c\u4e0d\u540c\u7248\u672c\u4e4b\u95f4\u7684\u517c\u5bb9\u6027\u4e5f\u4e0d\u662f\u5f88\u597d\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Apache Avro"}),"\uff1a\u9884\u5148\u5b9a\u4e49\u597d\u6a21\u5f0f\uff0c\u6a21\u5f0f\u4e0e\u6d88\u606f\u5206\u5f00\uff0c\u517c\u5bb9\u6027\u597d\u3002Avro\u6700\u521d\u662f\u4e3a Hadoop \u5f00\u53d1\u7684\u4e00\u6b3e\u5e8f\u5217\u5316\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u7d27\u51d1\u7684\u5e8f\u5217\u5316\u683c\u5f0f\uff0c\u6a21\u5f0f\u548c\u6d88\u606f\u4f53\u662f\u5206\u5f00\u7684\uff0c\u5f53\u6a21\u5f0f\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u751f\u6210\u4ee3\u7801\uff1b\u5b83\u8fd8\u652f\u6301\u5f3a\u7c7b\u578b\u548c\u6a21\u5f0f\u8fdb\u5316\uff0c\u5176\u7248\u672c\u65e2\u5411\u524d\u517c\u5bb9\uff0c\u4e5f\u5411\u540e\u517c\u5bb9\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u6570\u636e\u683c\u5f0f\u7684\u4e00\u81f4\u6027\u5bf9\u4e8e Kafka \u6765\u8bf4\u5f88\u91cd\u8981\uff0c\u5b83\u6d88\u9664\u4e86\u6d88\u606f\u8bfb\u5199\u64cd\u4f5c\u4e4b\u95f4\u7684\u8026\u5408\u6027\u3002\u5982\u679c\u8bfb\u5199\u64cd\u4f5c\u7d27\u5bc6\u5730\u8026\u5408\u5728\u4e00\u8d77\uff0c\u6d88\u606f\u8ba2\u9605\u8005\u9700\u8981\u5347\u7ea7\u5e94\u7528\u7a0b\u5e8f\u624d\u80fd\u540c\u65f6\u5904\u7406\u65b0\u65e7\u4e24\u79cd\u6570\u636e\u683c\u5f0f\u3002\u5728\u6d88\u606f\u8ba2\u9605\u8005\u5347\u7ea7\u4e86\u4e4b\u540e\uff0c\u6d88\u606f\u53d1\u5e03\u8005\u624d\u80fd\u8ddf\u7740\u5347\u7ea7\uff0c\u4ee5\u4fbf\u4f7f\u7528\u65b0\u7684\u6570\u636e\u683c\u5f0f\u3002\u65b0\u7684\u5e94\u7528\u7a0b\u5e8f\u5982\u679c\u9700\u8981\u4f7f\u7528\u6570\u636e\uff0c\u5c31\u8981\u4e0e\u6d88\u606f\u53d1\u5e03\u8005\u53d1\u751f\u8026\u5408\uff0c\u5bfc\u81f4\u5f00\u53d1\u8005\u9700\u8981\u505a\u5f88\u591a\u7e41\u6742\u7684\u5de5\u4f5c\u3002\u5b9a\u4e49\u826f\u597d\u7684\u6a21\u5f0f\uff0c\u5e76\u628a\u5b83\u4eec\u5b58\u653e\u5728\u516c\u5171\u4ed3\u5e93\uff0c\u53ef\u4ee5\u65b9\u4fbf\u6211\u4eec\u7406\u89e3 Kafka \u7684\u6d88\u606f\u7ed3\u6784\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u4e3b\u9898(Topic)\u548c\u5206\u533a(Partition)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Kafka \u7684\u6d88\u606f\u901a\u8fc7\u4e3b\u9898\u8fdb\u884c\u5206\u7c7b\u3002\u4e3b\u9898\u5c31\u597d\u6bd4\u6570\u636e\u5e93\u7684\u8868\uff0c\u6216\u8005\u6587\u4ef6\u7cfb\u7edf\u91cc\u7684\u6587\u4ef6\u5939\u3002\u4e3b\u9898\u53ef\u4ee5\u88ab\u5206\u4e3a\u82e5\u5e72\u4e2a\u5206\u533a\uff0c\u4e00\u4e2a\u5206\u533a\u5c31\u662f\u4e00\u4e2a\u63d0\u4ea4\u65e5\u5fd7\u3002\u6d88\u606f\u4ee5\u8ffd\u52a0\u7684\u65b9\u5f0f\u5199\u5165\u5206\u533a\uff0c\u7136\u540e\u4ee5\u5148\u5165\u5148\u51fa\u7684\u987a\u5e8f\u8bfb\u53d6\u3002\u8981\u6ce8\u610f\uff0c\u7531\u4e8e\u4e00\u4e2a\u4e3b\u9898\u4e00\u822c\u5305\u542b\u51e0\u4e2a\u5206\u533a\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728\u6574\u4e2a\u4e3b\u9898\u8303\u56f4\u5185\u4fdd\u8bc1\u6d88\u606f\u7684\u987a\u5e8f\uff0c\u4f46\u53ef\u4ee5\u4fdd\u8bc1\u6d88\u606f\u5728\u5355\u4e2a\u5206\u533a\u5185\u7684\u987a\u5e8f\u3002\u5982\u4e0b\u56fe\u6240\u793a\u7684\u4e3b\u9898\u6709 4\u4e2a\u5206\u533a\uff0c\u6d88\u606f\u88ab\u8ffd\u52a0\u5199\u5165\u6bcf\u4e2a\u5206\u533a\u7684\u5c3e\u90e8\u3002Kafka \u901a\u8fc7\u5206\u533a\u6765\u5b9e\u73b0\u6570\u636e\u5197\u4f59\u548c\u4f38\u7f29\u6027\u3002\u5206\u533a\u53ef\u4ee5\u5206\u5e03\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u4e3b\u9898\u53ef\u4ee5\u6a2a\u8de8\u591a\u4e2a\u670d\u52a1\u5668\uff0c\u4ee5\u6b64\u6765\u63d0\u4f9b\u6bd4\u5355\u4e2a\u670d\u52a1\u5668\u66f4\u5f3a\u5927\u7684\u6027\u80fd\u3002"}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-0.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u751f\u4ea7\u8005(Producer)\u548c\u6d88\u8d39\u8005(Consumer)"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Kafka \u7684\u5ba2\u6237\u7aef\u5c31\u662f Kafka \u7cfb\u7edf\u7684\u7528\u6237\uff0c\u5b83\u4eec\u88ab\u5206\u4e3a\u4e24\u79cd\u57fa\u672c\u7c7b\u578b\uff1a\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u3002(",(0,i.jsxs)(n.em,{children:["\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u9ad8\u7ea7\u5ba2\u6237\u7aef API\u2014\u2014\u7528\u4e8e\u6570\u636e\u96c6\u6210\u7684 ",(0,i.jsx)(n.code,{children:"Kafka Connect"}),"\u548c\u7528\u4e8e\u6d41\u5f0f\u5904\u7406\u7684 ",(0,i.jsx)(n.code,{children:"Kafka Streams"}),"\u3002"]}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u751f\u4ea7\u8005\u521b\u5efa\u6d88\u606f\u3002\u4e00\u4e2a\u6d88\u606f\u4f1a\u88ab\u53d1\u5e03\u5230\u4e00\u4e2a\u7279\u5b9a\u7684\u4e3b\u9898\u4e0a\u3002\u751f\u4ea7\u8005\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u628a\u6d88\u606f\u5747\u8861\u5730\u5206\u5e03\u5230\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u4e0a\uff0c\u800c\u5e76\u4e0d\u5173\u5fc3\u7279\u5b9a\u6d88\u606f\u4f1a\u88ab\u5199\u5230\u54ea\u4e2a\u5206\u533a\u3002\u4e0d\u8fc7\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u751f\u4ea7\u8005\u4f1a\u628a\u6d88\u606f\u76f4\u63a5\u5199\u5230\u6307\u5b9a\u7684\u5206\u533a\u3002\u8fd9\u901a\u5e38\u662f\u901a\u8fc7\u6d88\u606f\u952e\u548c\u5206\u533a\u5668\u6765\u5b9e\u73b0\u7684\uff0c\u5206\u533a\u5668\u4e3a\u952e\u751f\u6210\u4e00\u4e2a\u6563\u5217\u503c\uff0c\u5e76\u5c06\u5176\u6620\u5c04\u5230\u6307\u5b9a\u7684\u5206\u533a\u4e0a\u3002\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u5305\u542b\u540c\u4e00\u4e2a\u952e\u7684\u6d88\u606f\u4f1a\u88ab\u5199\u5230\u540c\u4e00\u4e2a\u5206\u533a\u4e0a\u3002\u751f\u4ea7\u8005\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u5206\u533a\u5668\uff0c\u6839\u636e\u4e0d\u540c\u7684\u4e1a\u52a1\u89c4\u5219\u5c06\u6d88\u606f\u6620\u5c04\u5230\u5206\u533a\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6d88\u8d39\u8005\u8bfb\u53d6\u6d88\u606f\u3002\u6d88\u8d39\u8005\u8ba2\u9605\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\uff0c\u5e76\u6309\u7167\u6d88\u606f\u751f\u6210\u7684\u987a\u5e8f\u8bfb\u53d6\u5b83\u4eec\u3002",(0,i.jsx)(n.strong,{children:"\u6d88\u8d39\u8005\u901a\u8fc7\u68c0\u67e5\u6d88\u606f\u7684\u504f\u79fb\u91cf\u6765\u533a\u5206\u5df2\u7ecf\u8bfb\u53d6\u8fc7\u7684\u6d88\u606f\u3002\u504f\u79fb\u91cf\u662f\u53e6\u4e00\u79cd\u5143\u6570\u636e\uff0c\u5b83\u662f\u4e00\u4e2a\u4e0d\u65ad\u9012\u589e\u7684\u6574\u6570\u503c\uff0c\u5728\u521b\u5efa\u6d88\u606f\u65f6\uff0cKafka \u4f1a\u628a\u5b83\u6dfb\u52a0\u5230\u6d88\u606f\u91cc\u3002\u5728\u7ed9\u5b9a\u7684\u5206\u533a\u91cc\uff0c\u6bcf\u4e2a\u6d88\u606f\u7684\u504f\u79fb\u91cf\u90fd\u662f\u552f\u4e00\u7684"}),"\u3002\u6d88\u8d39\u8005\u628a\u6bcf\u4e2a\u5206\u533a\u6700\u540e\u8bfb\u53d6\u7684\u6d88\u606f\u504f\u79fb\u91cf\u4fdd\u5b58\u5728 Zookeeper \u6216 Kafka \u4e0a\uff0c\u5982\u679c\u6d88\u8d39\u8005\u5173\u95ed\u6216\u91cd\u542f\uff0c\u5b83\u7684\u8bfb\u53d6\u72b6\u6001\u4e0d\u4f1a\u4e22\u5931\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6d88\u8d39\u7fa4\u7ec4(Consumer Group)\u662f\u7528\u4e8e\u7ba1\u7406\u6d88\u8d39\u8005\u7684\u4e00\u79cd\u673a\u5236\u3002\u5b83\u5141\u8bb8\u591a\u4e2a\u6d88\u8d39\u8005\u534f\u540c\u5de5\u4f5c\uff0c\u4ece\u800c\u63d0\u9ad8\u6570\u636e\u5904\u7406\u7684\u541e\u5410\u91cf\u548c\u5bb9\u9519\u80fd\u529b\u3002",(0,i.jsx)(n.strong,{children:"\u6d88\u8d39\u8005\u662f\u6d88\u8d39\u8005\u7fa4\u7ec4\u7684\u4e00\u90e8\u5206\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f1a\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u6d88\u8d39\u8005\u5171\u540c\u8bfb\u53d6\u4e00\u4e2a\u4e3b\u9898\u3002\u7fa4\u7ec4\u4fdd\u8bc1\u6bcf\u4e2a\u5206\u533a\u53ea\u80fd\u88ab\u4e00\u4e2a\u6d88\u8d39\u8005\u4f7f\u7528"}),"\u3002\u6d88\u8d39\u8005\u53ef\u4ee5\u6d88\u8d39\u5305\u542b\u5927\u91cf\u6d88\u606f\u7684\u4e3b\u9898\u3002\u800c\u4e14\uff0c\u5982\u679c\u4e00\u4e2a\u6d88\u8d39\u8005\u5931\u6548\uff0c\u7fa4\u7ec4\u91cc\u7684\u5176\u4ed6\u6d88\u8d39\u8005\u53ef\u4ee5\u63a5\u7ba1\u5931\u6548\u6d88\u8d39\u8005\u7684\u5de5\u4f5c\u3002  \u5982\u4e0b\u56fe\u6240\u793a\u7684\u7fa4\u7ec4\u4e2d\uff0c\u6709 3 \u4e2a\u6d88\u8d39\u8005\u540c\u65f6\u8bfb\u53d6\u4e00\u4e2a\u4e3b\u9898\u3002\u5176\u4e2d\u7684\u4e24\u4e2a\u6d88\u8d39\u8005\u5404\u81ea\u8bfb\u53d6\u4e00\u4e2a\u5206\u533a\uff0c\u53e6\u5916\u4e00\u4e2a\u6d88\u8d39\u8005\u8bfb\u53d6\u5176\u4ed6\u4e24\u4e2a\u5206\u533a\u3002\u6d88\u8d39\u8005\u4e0e\u5206\u533a\u4e4b\u95f4\u7684\u6620\u5c04\u901a\u5e38\u88ab\u79f0\u4e3a\u6d88\u8d39\u8005\u5bf9\u5206\u533a\u7684\u6240\u6709\u6743\u5173\u7cfb\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-1.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Broker\u548c\u96c6\u7fa4"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e00\u4e2a\u72ec\u7acb\u7684 Kafka \u670d\u52a1\u5668\u88ab\u79f0\u4e3a broker\u3002broker \u63a5\u6536\u6765\u81ea\u751f\u4ea7\u8005\u7684\u6d88\u606f\uff0c\u4e3a\u6d88\u606f\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u5e76\u63d0\u4ea4\u6d88\u606f\u5230\u78c1\u76d8\u4fdd\u5b58\u3002broker \u4e3a\u6d88\u8d39\u8005\u63d0\u4f9b\u670d\u52a1\uff0c\u5bf9\u8bfb\u53d6\u5206\u533a\u7684\u8bf7\u6c42\u4f5c\u51fa\u54cd\u5e94\uff0c\u8fd4\u56de\u5df2\u7ecf\u63d0\u4ea4\u5230\u78c1\u76d8\u4e0a\u7684\u6d88\u606f\u3002\u6839\u636e\u7279\u5b9a\u7684\u786c\u4ef6\u53ca\u5176\u6027\u80fd\u7279\u5f81\uff0c\u5355\u4e2a broker \u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u6570\u5343\u4e2a\u5206\u533a\u4ee5\u53ca\u6bcf\u79d2\u767e\u4e07\u7ea7\u7684\u6d88\u606f\u91cf\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u96c6\u7fa4\uff1abroker \u662f\u96c6\u7fa4\u7684\u7ec4\u6210\u90e8\u5206\u3002\u6bcf\u4e2a\u96c6\u7fa4\u90fd\u6709\u4e00\u4e2a broker \u540c\u65f6\u5145\u5f53\u4e86\u96c6\u7fa4\u63a7\u5236\u5668\u7684\u89d2\u8272\uff08\u81ea\u52a8\u4ece\u96c6\u7fa4\u7684\u6d3b\u8dc3\u6210\u5458\u4e2d\u9009\u4e3e\u51fa\u6765\uff09\u3002\u63a7\u5236\u5668\u8d1f\u8d23\u7ba1\u7406\u5de5\u4f5c\uff0c\u5305\u62ec\u5c06\u5206\u533a\u5206\u914d\u7ed9 broker \u548c\u76d1\u63a7broker\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5206\u533a\u590d\u5236\uff1a\u5728\u96c6\u7fa4\u4e2d\uff0c\u4e00\u4e2a\u5206\u533a\u4ece\u5c5e\u4e8e\u4e00\u4e2a broker\uff0c\u8be5 broker \u88ab\u79f0\u4e3a\u5206\u533a\u7684\u9996\u9886\u3002\u4e00\u4e2a\u5206\u533a\u53ef\u4ee5\u5206\u914d\u7ed9\u591a\u4e2a broker\uff0c\u8fd9\u4e2a\u65f6\u5019\u4f1a\u53d1\u751f\u5206\u533a\u590d\u5236\u5982\u4e0b\u56fe\u3002\u8fd9\u79cd\u590d\u5236\u673a\u5236\u4e3a\u5206\u533a\u63d0\u4f9b\u4e86\u6d88\u606f\u5197\u4f59\uff0c\u5982\u679c\u6709\u4e00\u4e2a broker \u5931\u6548\uff0c\u5176\u4ed6 broker \u53ef\u4ee5\u63a5\u7ba1\u9886\u5bfc\u6743\u3002\u4e0d\u8fc7\uff0c\u76f8\u5173\u7684\u6d88\u8d39\u8005\u548c\u751f\u4ea7\u8005\u90fd\u8981\u91cd\u65b0\u8fde\u63a5\u5230\u65b0\u7684\u9996\u9886\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-2.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u6d88\u606f\u4fdd\u7559\u7b56\u7565(Retention)"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"kafka\u662f\u57fa\u4e8e\u65e5\u5fd7\u7684\u6d88\u606f\u961f\u5217\uff0c\u4fdd\u7559\u6d88\u606f\uff08\u5728\u4e00\u5b9a\u671f\u9650\u5185\uff09\u662f Kafka \u7684\u4e00\u4e2a\u91cd\u8981\u7279\u6027\u3002Kafka broker \u9ed8\u8ba4\u7684\u6d88\u606f\u4fdd\u7559\u7b56\u7565\u662f\u8fd9\u6837\u7684\uff1a\u8981\u4e48\u4fdd\u7559\u4e00\u6bb5\u65f6\u95f4\uff08\u6bd4\u5982 7 \u5929\uff09 \uff0c\u8981\u4e48\u4fdd\u7559\u5230\u6d88\u606f\u8fbe\u5230\u4e00\u5b9a\u5927\u5c0f\u7684\u5b57\u8282\u6570\uff08\u6bd4\u5982 1GB\uff09\u3002\u5f53\u6d88\u606f\u6570\u91cf\u8fbe\u5230\u8fd9\u4e9b\u4e0a\u9650\u65f6\uff0c\u65e7\u6d88\u606f\u5c31\u4f1a\u8fc7\u671f\u5e76\u88ab\u5220\u9664\uff0c\u6240\u4ee5\u5728\u4efb\u4f55\u65f6\u523b\uff0c\u53ef\u7528\u6d88\u606f\u7684\u603b\u91cf\u90fd\u4e0d\u4f1a\u8d85\u8fc7\u914d\u7f6e\u53c2\u6570\u6240\u6307\u5b9a\u7684\u5927\u5c0f\u3002\u4e3b\u9898\u53ef\u4ee5\u914d\u7f6e\u81ea\u5df1\u7684\u4fdd\u7559\u7b56\u7565\uff0c\u53ef\u4ee5\u5c06\u6d88\u606f\u4fdd\u7559\u5230\u4e0d\u518d\u4f7f\u7528\u5b83\u4eec\u4e3a\u6b62\u3002\u4f8b\u5982\uff0c\u7528\u4e8e\u8ddf\u8e2a\u7528\u6237\u6d3b\u52a8\u7684\u6570\u636e\u53ef\u80fd\u9700\u8981\u4fdd\u7559\u51e0\u5929\uff0c\u800c\u5e94\u7528\u7a0b\u5e8f\u7684\u5ea6\u91cf\u6307\u6807\u53ef\u80fd\u53ea\u9700\u8981\u4fdd\u7559\u51e0\u4e2a\u5c0f\u65f6\u3002\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u628a\u4e3b\u9898\u5f53\u4f5c\u7d27\u51d1\u578b\u65e5\u5fd7\uff0c\u53ea\u6709\u6700\u540e\u4e00\u4e2a\u5e26\u6709\u7279\u5b9a\u952e\u7684\u6d88\u606f\u4f1a\u88ab\u4fdd\u7559\u4e0b\u6765\u3002\u8fd9\u79cd\u60c5\u51b5\u5bf9\u4e8e\u53d8\u66f4\u65e5\u5fd7\u7c7b\u578b\u7684\u6570\u636e\u6765\u8bf4\u6bd4\u8f83\u9002\u7528\uff0c\u56e0\u4e3a\u4eba\u4eec\u53ea\u5173\u5fc3\u6700\u540e\u65f6\u523b\u53d1\u751f\u7684\u90a3\u4e2a\u53d8\u66f4\u3002\u6d88\u606f\u4fdd\u7559\u7b56\u7565\u662f\u53ef\u4ee5\u914d\u7f6e\u7684\uff0c\u6bd4\u5982\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"# \u57fa\u4e8e\u65f6\u95f4\u7684\u4fdd\u7559\u7b56\u7565\nlog.retention.ms=604800000  # \u6d88\u606f\u4fdd\u7559 7 \u5929\n# \u57fa\u4e8e\u5927\u5c0f\u7684\u4fdd\u7559\u7b56\u7565\nlog.retention.bytes=1073741824  # \u6bcf\u4e2a\u65e5\u5fd7\u6bb5\u6700\u5927 1 GB\n# \u542f\u7528\u65e5\u5fd7\u538b\u7f29\nlog.cleanup.policy=compact\n"})}),"\n",(0,i.jsx)(n.h3,{id:"docker\u90e8\u7f72",children:"Docker\u90e8\u7f72"}),"\n",(0,i.jsx)(n.p,{children:"\u76f4\u63a5\u4f7f\u7528docker\u90e8\u7f72\uff0c\u4ee5\u4e0b\u662f\u6211\u7684\u914d\u7f6e\u6587\u4ef6\uff0c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'version: \'3\'\n\nnetworks:\n  kafka-net:\n    driver: bridge\n\nservices:\n  zookeeper:\n    image: \'bitnami/zookeeper:3.9.2\'\n    ports:\n      - "2181:2181"\n    volumes:\n      - "/Users/liufei/docker-data/zookeeper:/bitnami/zookeeper"\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n    networks:\n      - kafka-net\n\n  kafka-1:\n    image: \'bitnami/kafka:3.4.1\'\n    ports:\n      - "9092:9092"\n    volumes:\n      - "/Users/liufei/docker-data/kafka-1:/bitnami/kafka"\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9092\n      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://kafka-1:9092\n      - ALLOW_PLAINTEXT_LISTENER=yes\n    networks:\n      - kafka-net\n\n  kafka-2:\n    image: \'bitnami/kafka:3.4.1\'\n    ports:\n      - "9093:9093"\n    volumes:\n      - "/Users/liufei/docker-data/kafka-2:/bitnami/kafka"\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9093\n      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://kafka-2:9093\n      - ALLOW_PLAINTEXT_LISTENER=yes\n    networks:\n      - kafka-net\n\n  kafka-3:\n    image: \'bitnami/kafka:3.4.1\'\n    ports:\n      - "9094:9094"\n    volumes:\n      - "/Users/liufei/docker-data/kafka-3:/bitnami/kafka"\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - KAFKA_CFG_LISTENERS=PLAINTEXT://:9094\n      - KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://kafka-3:9094\n      - ALLOW_PLAINTEXT_LISTENER=yes\n    networks:\n      - kafka-net\n\n  kafka-manager:\n    image: \'sheepkiller/kafka-manager:latest\'\n    ports:\n      - "9000:9000"\n    environment:\n      - ZK_HOSTS=zookeeper:2181\n      - APPLICATION_SECRET=letmein\n    networks:\n      - kafka-net\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:'volumes:\n- "/Users/liufei/docker-data/kafka-3:/bitnami/kafka"'}),"\n",(0,i.jsx)(n.p,{children:"\u4e2d\u7684\u6302\u5728\u76ee\u5f55\u9700\u8981\u66f4\u6362\u6210\u81ea\u5df1\u7684\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"docker-compose -f {Kafka-docker.yaml} up -d"}),"\uff0c\u6839\u636e ",(0,i.jsx)(n.code,{children:"Kafk-docker.yaml"}),"\u6362\u6210\u81ea\u5df1\u7684\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u76f4\u63a5\u542f\u52a8\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u542f\u52a8\u540e\u8fdb\u5165",(0,i.jsx)(n.code,{children:"{port}/9090"}),"\u53ef\u4ee5\u8fdb\u5165 kafka-manager\u7684\u7ba1\u7406\u754c\u9762\uff0c\u5982\u4e0b\u56fe\uff0c\u8fd9\u4e2akafka-manager\u7248\u672c\u6709\u70b9\u65e7\uff0c\u8bf7\u5ffd\u7565"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-3.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(n.h2,{id:"kafka\u6838\u5fc3\u529f\u80fd",children:"Kafka\u6838\u5fc3\u529f\u80fd"}),"\n",(0,i.jsx)(n.h3,{id:"\u786c\u4ef6\u8003\u91cf",children:"\u786c\u4ef6\u8003\u91cf"}),"\n",(0,i.jsx)(n.p,{children:"Kafka \u672c\u8eab\u5bf9\u786c\u4ef6\u6ca1\u6709\u7279\u522b\u7684\u8981\u6c42\uff0c\u5b83\u53ef\u4ee5\u8fd0\u884c\u5728\u4efb\u4f55\u7cfb\u7edf\u4e0a\u3002\u4e0d\u8fc7\uff0c\u5982\u679c\u6bd4\u8f83\u5173\u6ce8\u6027\u80fd\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u8003\u8651\u51e0\u4e2a\u4f1a\u5f71\u54cd\u6574\u4f53\u6027\u80fd\u7684\u56e0\u7d20\uff1a\u78c1\u76d8\u541e\u5410\u91cf\u548c\u5bb9\u91cf\u3001\u5185\u5b58\u3001\u7f51\u7edc\u548c CPU\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u78c1\u76d8\u541e\u5410\u91cf"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"**\u751f\u4ea7\u8005\u5ba2\u6237\u7aef\u7684\u6027\u80fd\u76f4\u63a5\u53d7\u5230\u670d\u52a1\u5668\u7aef\u78c1\u76d8\u541e\u5410\u91cf\u7684\u5f71\u54cd\u3002**\u751f\u4ea7\u8005\u751f\u6210\u7684\u6d88\u606f\u5fc5\u987b\u88ab\u63d0\u4ea4\u5230\u670d\u52a1\u5668\u4fdd\u5b58\uff0c\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5728\u53d1\u9001\u6d88\u606f\u4e4b\u540e\u4f1a\u4e00\u76f4\u7b49\u5f85\uff0c\u76f4\u5230\u81f3\u5c11\u6709\u4e00\u4e2a\u670d\u52a1\u5668\u786e\u8ba4\u6d88\u606f\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\u4e3a\u6b62\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u78c1\u76d8\u5199\u5165\u901f\u5ea6\u8d8a\u5feb\uff0c\u751f\u6210\u6d88\u606f\u7684\u5ef6\u8fdf\u5c31\u8d8a\u4f4e\u3002\u5728\u8003\u8651\u786c\u76d8\u7c7b\u578b\u5bf9\u78c1\u76d8\u541e\u5410\u91cf\u7684\u5f71\u54cd\u65f6\uff0c\u662f\u9009\u62e9\u4f20\u7edf\u7684\u673a\u68b0\u786c\u76d8\uff08HDD\uff09\u8fd8\u662f\u56fa\u6001\u786c\u76d8\uff08SSD\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u4f5c\u51fa\u51b3\u5b9a\u3002\u56fa\u6001\u786c\u76d8\u7684\u67e5\u627e\u548c\u8bbf\u95ee\u901f\u5ea6\u90fd\u5f88\u5feb\uff0c\u63d0\u4f9b\u4e86\u6700\u597d\u7684\u6027\u80fd\u3002\u673a\u68b0\u786c\u76d8\u66f4\u4fbf\u5b9c\uff0c\u5355\u5757\u786c\u76d8\u5bb9\u91cf\u4e5f\u66f4\u5927\u3002\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u4f7f\u7528\u591a\u4e2a\u673a\u68b0\u786c\u76d8\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a\u6570\u636e\u76ee\u5f55\uff0c\u6216\u8005\u628a\u5b83\u4eec\u8bbe\u7f6e\u6210\u78c1\u76d8\u9635\u5217\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u5347\u673a\u68b0\u786c\u76d8\u7684\u6027\u80fd\u3002\u5176\u4ed6\u65b9\u9762\u7684\u56e0\u7d20\uff0c\u6bd4\u5982\u78c1\u76d8\u7279\u5b9a\u7684\u6280\u672f\uff08\u4e32\u884c\u8fde\u63a5\u5b58\u50a8\u6280\u672f\u6216 SATA\uff09\uff0c\u6216\u8005\u78c1\u76d8\u63a7\u5236\u5668\u7684\u8d28\u91cf\uff0c\u90fd\u4f1a\u5f71\u54cd\u541e\u5410\u91cf\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u5ba2\u6237\u7aef\u5728\u53d1\u9001\u6d88\u606f\u4e4b\u540e\u4f1a\u4e00\u76f4\u7b49\u5f85\uff0c\u76f4\u5230\u81f3\u5c11\u6709\u4e00\u4e2a\u670d\u52a1\u5668\u786e\u8ba4\u6d88\u606f\u5df2\u7ecf\u6210\u529f\u63d0\u4ea4\u4e3a\u6b62\u3002\u8fd9\u4e2a\u5c31\u662f\u751f\u4ea7\u8005\u7684\u786e\u8ba4\u914d\u7f6eacks=0\uff0c1\uff0call\u30020:\u5b8c\u5168\u5f02\u6b65\u4e0d\u9700\u8981kafka\u786e\u8ba4\u8fd4\u56de\uff0c1:\u81f3\u5c11\u7b49\u5f85\u4e3b\u5206\u7247\u8fd4\u56de\uff08Kafka\uff0c\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6d88\u606f\u662f\u5148\u5199\u5165\u4e3b\u5206\u7247\u7136\u540e\u7531\u4e3b\u5206\u7247\u8d1f\u8d23\u5c06\u6d88\u606f\u540c\u6b65\u5230\u526f\u672c\u5206\u7247\uff09\u30021\u4e3b\u8981\u662f\u4e3a\u4e86\u907f\u514d\u6d88\u606f\u672a\u53d1\u751f\u5230Kafka\u6bd4\u5982\u7f51\u7edc\u6545\u969c\u7b49\u5c31\u8fd4\u56de\u5230\u8fd9\u6570\u636e\u672a\u5199\u5165\u3002\u800c0\u548c1\u90fd\u65e0\u6cd5\u4fdd\u8bc1\u5206\u533a\u5bb9\u9519\u6027\uff0c\u5373\u4e3b\u5206\u7247\u5bf9\u5e94\u7684broker\u6302\u6389\uff0c\u672a\u540c\u6b65\u5230\u526f\u672c\u5206\u7247\u7684\u6d88\u606f\u4f1a\u4e22\u5931\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u78c1\u76d8\u5bb9\u91cf"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u78c1\u76d8\u5bb9\u91cf\u662f\u53e6\u4e00\u4e2a\u503c\u5f97\u8ba8\u8bba\u7684\u8bdd\u9898\uff0c\u9700\u8981\u591a\u5927\u7684\u78c1\u76d8\u5bb9\u91cf\u53d6\u51b3\u4e8e\u9700\u8981\u4fdd\u7559\u7684\u6d88\u606f\u6570\u91cf\u3002\u5982\u679c\u670d\u52a1\u5668\u6bcf\u5929\u4f1a\u6536\u5230 1TB \u6d88\u606f\uff0c\u5e76\u4e14\u4fdd\u7559 7 \u5929\uff0c\u90a3\u4e48\u5c31\u9700\u8981 7TB \u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u800c\u4e14\u8fd8\u8981\u4e3a\u5176\u4ed6\u6587\u4ef6\u63d0\u4f9b\u81f3\u5c11 10% \u7684\u989d\u5916\u7a7a\u95f4\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u63d0\u4f9b\u7f13\u51b2\u533a\uff0c\u7528\u4e8e\u5e94\u4ed8\u6d88\u606f\u6d41\u91cf\u7684\u589e\u957f\u548c\u6ce2\u52a8\u3002\u5728\u51b3\u5b9a\u6269\u5c55 Kafka \u96c6\u7fa4\u89c4\u6a21\u65f6\uff0c\u5b58\u50a8\u5bb9\u91cf\u662f\u4e00\u4e2a\u9700\u8981\u8003\u8651\u7684\u56e0\u7d20\u3002\u901a\u8fc7\u8ba9\u4e3b\u9898\u62e5\u6709\u591a\u4e2a\u5206\u533a\uff0c\u96c6\u7fa4\u7684\u603b\u6d41\u91cf\u53ef\u4ee5\u88ab\u5747\u8861\u5230\u6574\u4e2a\u96c6\u7fa4\uff0c\u800c\u4e14\u5982\u679c\u5355\u4e2a broker \u65e0\u6cd5\u652f\u6491\u5168\u90e8\u5bb9\u91cf\uff0c\u53ef\u4ee5\u8ba9\u5176\u4ed6 broker \u63d0\u4f9b\u53ef\u7528\u7684\u5bb9\u91cf\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u5185\u5b58"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"**\u9664\u4e86\u78c1\u76d8\u6027\u80fd\u5916\uff0c\u670d\u52a1\u5668\u7aef\u53ef\u7528\u7684\u5185\u5b58\u5bb9\u91cf\u662f\u5f71\u54cd\u5ba2\u6237\u7aef\u6027\u80fd\u7684\u4e3b\u8981\u56e0\u7d20\u3002\u78c1\u76d8\u6027\u80fd\u5f71\u54cd\u751f\u4ea7\u8005\uff0c\u800c\u5185\u5b58\u5f71\u54cd\u6d88\u8d39\u8005\u3002**\u6d88\u8d39\u8005\u4e00\u822c\u4ece\u5206\u533a\u5c3e\u90e8\u8bfb\u53d6\u6d88\u606f\uff0c\u5982\u679c\u6709\u751f\u4ea7\u8005\u5b58\u5728\uff0c\u5c31\u7d27\u8ddf\u5728\u751f\u4ea7\u8005\u540e\u9762\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6d88\u8d39\u8005\u8bfb\u53d6\u7684\u6d88\u606f\u4f1a\u76f4\u63a5\u5b58\u653e\u5728\u7cfb\u7edf\u7684\u9875\u9762\u7f13\u5b58\u91cc\uff0c\u8fd9\u6bd4\u4ece\u78c1\u76d8\u4e0a\u91cd\u65b0\u8bfb\u53d6\u8981\u5feb\u5f97\u591a\u3002\u8fd0\u884c Kafka \u7684 JVM \u4e0d\u9700\u8981\u592a\u5927\u7684\u5185\u5b58\uff0c\u5269\u4f59\u7684\u7cfb\u7edf\u5185\u5b58\u53ef\u4ee5\u7528\u4f5c\u9875\u9762\u7f13\u5b58\uff0c\u6216\u8005\u7528\u6765\u7f13\u5b58\u6b63\u5728\u4f7f\u7528\u4e2d\u7684\u65e5\u5fd7\u7247\u6bb5\u3002\u8fd9\u4e5f\u5c31\u662f\u4e3a\u4ec0\u4e48\u4e0d\u5efa\u8bae\u628a Kafka \u540c\u5176\u4ed6\u91cd\u8981\u7684\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u5728\u4e00\u8d77\u7684\u539f\u56e0\uff0c\u5b83\u4eec\u9700\u8981\u5171\u4eab\u9875\u9762\u7f13\u5b58\uff0c\u6700\u7ec8\u4f1a\u964d\u4f4e Kafka \u6d88\u8d39\u8005\u7684\u6027\u80fd\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u7f51\u7edc"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"**\u7f51\u7edc\u541e\u5410\u91cf\u51b3\u5b9a\u4e86 Kafka \u80fd\u591f\u5904\u7406\u7684\u6700\u5927\u6570\u636e\u6d41\u91cf\u3002\u5b83\u548c\u78c1\u76d8\u5b58\u50a8\u662f\u5236\u7ea6 Kafka \u6269\u5c55\u89c4\u6a21\u7684\u4e3b\u8981\u56e0\u7d20\u3002**Kafka\u652f\u6301\u591a\u4e2a\u6d88\u8d39\u8005\uff0c\u9020\u6210\u6d41\u5165\u548c\u6d41\u51fa\u7684\u7f51\u7edc\u6d41\u91cf\u4e0d\u5e73\u8861\uff0c\u4ece\u800c\u8ba9\u60c5\u51b5\u53d8\u5f97\u66f4\u52a0\u590d\u6742\u3002\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u4e3b\u9898\uff0c\u4e00\u4e2a\u751f\u4ea7\u8005\u53ef\u80fd\u6bcf\u79d2\u949f\u5199\u5165 1MB \u6570\u636e\uff0c\u4f46\u53ef\u80fd\u540c\u65f6\u6709\u591a\u4e2a\u6d88\u8d39\u8005\u74dc\u5206\u7f51\u7edc\u6d41\u91cf\u3002\u5176\u4ed6\u7684\u64cd\u4f5c\uff0c\u5982\u96c6\u7fa4\u590d\u5236\u548c\u955c\u50cf\u4e5f\u4f1a\u5360\u7528\u7f51\u7edc\u6d41\u91cf\u3002\u5982\u679c\u7f51\u7edc\u63a5\u53e3\u51fa\u73b0\u9971\u548c\uff0c\u90a3\u4e48\u96c6\u7fa4\u7684\u590d\u5236\u51fa\u73b0\u5ef6\u65f6\u5c31\u5728\u6240\u96be\u514d\uff0c\u4ece\u800c\u8ba9\u96c6\u7fa4\u4e0d\u582a\u4e00\u51fb\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"CPU"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e0e\u78c1\u76d8\u548c\u5185\u5b58\u76f8\u6bd4\uff0cKafka \u5bf9\u8ba1\u7b97\u5904\u7406\u80fd\u529b\u7684\u8981\u6c42\u76f8\u5bf9\u8f83\u4f4e\uff0c\u4e0d\u8fc7\u5b83\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u8fd8\u662f\u4f1a\u5f71\u54cd\u6574\u4f53\u7684\u6027\u80fd\u3002\u5ba2\u6237\u7aef\u4e3a\u4e86\u4f18\u5316\u7f51\u7edc\u548c\u78c1\u76d8\u7a7a\u95f4\uff0c\u4f1a\u5bf9\u6d88\u606f\u8fdb\u884c\u538b\u7f29\u3002\u670d\u52a1\u5668\u9700\u8981\u5bf9\u6d88\u606f\u8fdb\u884c\u6279\u91cf\u89e3\u538b\uff0c\u8bbe\u7f6e\u504f\u79fb\u91cf\uff0c\u7136\u540e\u91cd\u65b0\u8fdb\u884c\u6279\u91cf\u538b\u7f29\uff0c\u518d\u4fdd\u5b58\u5230\u78c1\u76d8\u4e0a\u3002\u8fd9\u5c31\u662fKafka \u5bf9\u8ba1\u7b97\u5904\u7406\u80fd\u529b\u6709\u6240\u8981\u6c42\u7684\u5730\u65b9\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"broker\u914d\u7f6e",children:"broker\u914d\u7f6e"}),"\n",(0,i.jsx)(n.p,{children:"Kafka \u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u670d\u52a1\u5668\u79f0\u4e3a\u4e00\u4e2a Broker\u3002Broker \u8d1f\u8d23\u5b58\u50a8\u5206\u533a\u7684\u6570\u636e\uff0c\u5e76\u5904\u7406\u6d88\u8d39\u8005\u548c\u751f\u4ea7\u8005\u7684\u8bf7\u6c42\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Kafka\u4e2d\u5206\u533a\u662f\u6700\u5c0f\u7684\u5e76\u884c\u5355\u4f4d\uff0c\u4f46\u6d88\u8d39\u8005\u4ecd\u7136\u662f\u548cbroker\u901a\u4fe1\uff0c\u4e5f\u5c31\u662f\u867d\u7136\u662f\u6d88\u8d39\u7684\u5206\u533a\u4e2d\u7684\u6d88\u606f\uff0c\u4f46\u5728\u786c\u4ef6\u4e0a\u4ecd\u7136\u662f\u53d7broker\u5236\u7ea6\u3002\u5206\u533a\u53ef\u4ee5\u5b9e\u73b0\u5e76\u884c\u5904\u7406\uff0c\u4f46\u5b9e\u9645\u7684\u8bfb\u5199\u64cd\u4f5c\u4ecd\u7136\u4f9d\u8d56\u4e8e Broker \u7684\u786c\u4ef6\u6027\u80fd\uff08\u5982 CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8 I/O \u548c\u7f51\u7edc\u5e26\u5bbd\uff09\uff0c\u5355\u4e2a Broker \u7684\u6027\u80fd\u74f6\u9888\u4f1a\u5f71\u54cd\u5176\u6258\u7ba1\u7684\u6240\u6709\u5206\u533a\u7684\u8bfb\u5199\u6548\u7387\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u9996\u5148Kafka \u96c6\u7fa4\u9700\u8981\u591a\u5c11\u4e2a broker \u53d6\u51b3\u4e8e\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u7b2c\u4e00\u9700\u8981\u591a\u5c11\u78c1\u76d8\u7a7a\u95f4\u6765\u4fdd\u7559\u6570\u636e\uff0c\u4ee5\u53ca\u5355\u4e2a broker \u6709\u591a\u5c11\u7a7a\u95f4\u53ef\u7528\u3002\u5982\u679c\u6574\u4e2a\u96c6\u7fa4\u9700\u8981\u4fdd\u7559 10TB \u7684\u6570\u636e\uff0c\u6bcf\u4e2abroker \u53ef\u4ee5\u5b58\u50a8 2TB\uff0c\u90a3\u4e48\u81f3\u5c11\u9700\u8981 5 \u4e2a broker\u3002\u5982\u679c\u542f\u7528\u4e86\u6570\u636e\u590d\u5236\uff0c\u90a3\u4e48\u81f3\u5c11\u8fd8\u9700\u8981\u4e00\u500d\u7684\u7a7a\u95f4\uff0c\u4e0d\u8fc7\u8fd9\u8981\u53d6\u51b3\u4e8e\u914d\u7f6e\u7684\u590d\u5236\u7cfb\u6570\u662f\u591a\u5c11\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u542f\u7528\u4e86\u6570\u636e\u590d\u5236\uff0c\u90a3\u4e48\u8fd9\u4e2a\u96c6\u7fa4\u81f3\u5c11\u9700\u8981 10 \u4e2a broker\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u7b2c\u4e8c\u4e2a\u8981\u8003\u8651\u7684\u56e0\u7d20\u662f\u96c6\u7fa4\u5904\u7406\u8bf7\u6c42\u7684\u80fd\u529b\u3002\u8fd9\u901a\u5e38\u4e0e\u7f51\u7edc\u63a5\u53e3\u5904\u7406\u5ba2\u6237\u7aef\u6d41\u91cf\u7684\u80fd\u529b\u6709\u5173\uff0c\u7279\u522b\u662f\u5f53\u6709\u591a\u4e2a\u6d88\u8d39\u8005\u5b58\u5728\u6216\u8005\u5728\u6570\u636e\u4fdd\u7559\u671f\u95f4\u6d41\u91cf\u53d1\u751f\u6ce2\u52a8\uff08\u6bd4\u5982\u9ad8\u5cf0\u65f6\u6bb5\u7684\u6d41\u91cf\u7206\u53d1\uff09\u65f6\u3002\u5982\u679c\u5355\u4e2a broker \u7684\u7f51\u7edc\u63a5\u53e3\u5728\u9ad8\u5cf0\u65f6\u6bb5\u53ef\u4ee5\u8fbe\u5230 80% \u7684\u4f7f\u7528\u91cf\uff0c\u5e76\u4e14\u6709\u4e24\u4e2a\u6d88\u8d39\u8005\uff0c\u90a3\u4e48\u6d88\u8d39\u8005\u5c31\u65e0\u6cd5\u4fdd\u6301\u5cf0\u503c\uff0c\u9664\u975e\u6709\u4e24\u4e2a broker\u3002\u5982\u679c\u96c6\u7fa4\u542f\u7528\u4e86\u590d\u5236\u529f\u80fd\uff0c\u5219\u8981\u628a\u8fd9\u4e2a\u989d\u5916\u7684\u6d88\u8d39\u8005\u8003\u8651\u5728\u5185\u3002\u56e0\u78c1\u76d8\u541e\u5410\u91cf\u4f4e\u548c\u7cfb\u7edf\u5185\u5b58\u4e0d\u8db3\u9020\u6210\u7684\u6027\u80fd\u95ee\u9898\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6269\u5c55\u591a\u4e2a broker \u6765\u89e3\u51b3\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u8981\u628a\u4e00\u4e2a broker \u52a0\u5165\u96c6\u7fa4\uff0c\u53ea\u9700\u8981\u4fee\u6539\u4e24\u4e2a\u914d\u7f6e\u53c2\u6570\u3002\u9996\u5148\uff0c\u6240\u6709 broker \u90fd\u5fc5\u987b\u914d\u7f6e\u76f8\u540c\u7684zookeeper.connect\u6216\u8005kraft\u4e0b\u7684\u96c6\u7fa4UUID\uff0c\u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u7528\u4e8e\u4fdd\u5b58\u5143\u6570\u636e\u7684 Zookeeper \u7fa4\u7ec4\u548c\u8def\u5f84\u3002\u5176\u6b21\uff0c\u6bcf\u4e2a broker \u90fd\u5fc5\u987b\u4e3a broker.id \u53c2\u6570\u8bbe\u7f6e\u552f\u4e00\u7684\u503c\u3002\u5982\u679c\u4e24\u4e2a broker \u4f7f\u7528\u76f8\u540c\u7684broker.id\uff0c\u90a3\u4e48\u7b2c\u4e8c\u4e2abroker\u5c31\u65e0\u6cd5\u542f\u52a8\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u5206\u533a\u6570\u91cf",children:"\u5206\u533a\u6570\u91cf"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u9009\u62e9topic\u7684\u5206\u533a\u6570\u91cf\u65f6\uff0c\u9700\u8981\u8003\u8651\u5982\u4e0b\u56e0\u7d20\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Topic\u9700\u8981\u8fbe\u5230\u591a\u5927\u7684\u541e\u5410\u91cf?\u4f8b\u5982\uff0c\u662f\u5e0c\u671b\u5199\u5165 100 KBps \u8fd8\u662f 1 GBps? \u4ece\u5355\u4e2a\u5206\u533a\u8bfb\u53d6\u6570\u636e\u7684\u6700\u5927\u541e\u5410\u91cf\u662f\u591a\u5c11?\u901a\u5e38\u6bcf\u4e2a\u5206\u533a\u5bf9\u5e94\u4e00\u4e2a\u6d88\u8d39\u8005\u8bfb\u53d6\u3002(\u5373\u4f7f\u4e0d \u4f7f\u7528\u6d88\u8d39\u8005\u7fa4\u7ec4\uff0c\u6d88\u8d39\u8005\u4e5f\u5fc5\u987b\u8bfb\u53d6\u5206\u533a\u4e2d\u7684\u6240\u6709\u6d88\u606f\u3002)\u5982\u679c\u4f60\u77e5\u9053\u6d88\u8d39\u8005\u5c06\u6570\u636e\u5199\u5165\u6570 \u636e\u5e93\u7684\u901f\u7387\u4e0d\u4f1a\u8d85\u8fc7 50 MBps\uff0c\u90a3\u4e48\u4e5f\u5c31\u77e5\u9053\u4e86\u4ece\u4e00\u4e2a\u5206\u533a\u8bfb\u53d6\u6570\u636e\u7684\u541e\u5410\u91cf\u4e0d\u9700\u8981\u8d85\u8fc7 50 MBps\u3002 \u53ef\u4ee5\u901a\u8fc7\u4e0e\u4e0a\u9762\u7c7b\u4f3c\u7684\u65b9\u6cd5\u4f30\u7b97\u751f\u4ea7\u8005\u5411\u5355\u4e2a\u5206\u533a\u5199\u5165\u6570\u636e\u7684\u541e\u5410\u91cf\u3002\u4e0d\u8fc7\uff0c\u751f\u4ea7\u8005\u7684\u901f\u5ea6 \u901a\u5e38\u6bd4\u6d88\u8d39\u8005\u5feb\u5f97\u591a\uff0c\u6240\u4ee5\u6700\u597d\u4e3a\u751f\u4ea7\u8005\u591a\u4f30\u7b97\u4e00\u4e9b\u541e\u5410\u91cf\u3002 \u5982\u679c\u6d88\u606f\u662f\u6309\u7167\u4e0d\u540c\u7684\u952e\u5199\u5165\u5206\u533a\uff0c\u90a3\u4e48\u5c31\u5f88\u96be\u5728\u672a\u6765\u4e3a\u5df2\u6709\u7684\u4e3b\u9898\u65b0\u589e\u5206\u533a\uff0c\u6240\u4ee5\u8981\u6839\u636e \u672a\u6765\u7684\u9884\u671f\u4f7f\u7528\u91cf\u800c\u4e0d\u662f\u5f53\u524d\u7684\u4f7f\u7528\u91cf\u6765\u4f30\u7b97\u541e\u5410\u91cf\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u6bcf\u4e2a broker \u5305\u542b\u7684\u5206\u533a\u6570\u3001\u53ef\u7528\u7684\u78c1\u76d8\u7a7a\u95f4\u548c\u7f51\u7edc\u5e26\u5bbd\u3002 \u907f\u514d\u4f7f\u7528\u592a\u591a\u5206\u533a\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5206\u533a\u90fd\u4f1a\u5360\u7528 broker \u7684\u5185\u5b58\u548c\u5176\u4ed6\u8d44\u6e90\uff0c\u8fd8\u4f1a\u589e\u52a0\u5143\u6570\u636e\u66f4\u65b0\u548c\u9996\u9886\u9009\u4e3e\u7684\u65f6\u95f4\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u662f\u5426\u9700\u8981\u526f\u672c?\u5982\u679c\u662f\uff0c\u90a3\u4e48\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u8003\u8651\u526f\u672c\u541e\u5410\u91cf\u3002\u5927\u578b\u5206\u533a\u526f\u672c\u540c\u6b65\u6570\u636e\u53ef\u80fd\u4f1a\u6210\u4e3a\u7684\u74f6\u9888\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u4f7f\u7528\u7684\u662f\u4e91\u670d\u52a1\uff0c\u90a3\u4e48\u865a\u62df\u673a\u6216\u78c1\u76d8\u6709 IOPS(\u6bcf\u79d2\u8f93\u5165 / \u8f93\u51fa\u64cd\u4f5c)\u9650\u5236\u5417? \u4e91\u670d\u52a1\u548c\u865a\u62df\u673a\u7684\u914d\u989d\u53ef\u80fd\u4f1a\u786c\u6027\u9650\u5236 IOPS \u7684\u6570\u91cf\u3002\u56e0\u4e3a\u6d89\u53ca\u5e76\u884c\u64cd\u4f5c\uff0c\u6240\u4ee5\u5206\u533a\u6570\u91cf\u592a\u5927\u53ef\u80fd\u4f1a\u5bfc\u81f4 IOPS \u6570\u91cf\u589e\u52a0\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u603b\u7ed3\u6765\u8bf4\uff1a"}),"\n",(0,i.jsx)(n.p,{children:"\u6bcf\u4e2aPartition\u53ef\u4ee5\u8fbe\u5230\u7684\u541e\u5410\u91cf\u53d6\u51b3\u4e8e\u8bf8\u4e8ebatch size, \u538b\u7f29codec, ack\u7ea7\u522b\uff0c\u590d\u672c\u6570\u7b49\u4e00\u7cfb\u5217\u914d\u7f6e\u3002\u6d88\u8d39\u8005\u7684\u541e\u5410\u91cf\u7ecf\u5e38\u53d7\u9650\u4e8e\u5e94\u7528\u7a0b\u5e8f\u5904\u7406message\u7684\u6d88\u8d39\u903b\u8f91\u6709\u591a\u5feb\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5b9e\u9645\u7684\u8bc4\u4f30\u3002\u5e76\u4e14\u7531\u4e8e\u5206\u533a\u5bf9\u5e94\u4f7f\u7528key\u6765\u4fdd\u8bc1\u6309\u987a\u5e8f\u6d88\u8d39Msg\u7684\u5e94\u7528\u6765\u8bf4\u662f\u5f88\u91cd\u8981\u7684\uff0c\u5982\u679cPartition\u7684\u6570\u91cf\u53d1\u751f\u53d8\u5316\uff0c\u8fd9\u4e2a\u4fdd\u8bc1\u5c31\u4e0d\u5b58\u5728\u4e86\u3002\u4e3a\u4e86\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u901a\u5e38\u7684\u4f5c\u6cd5\u662f\u63d0\u524d\u591a\u5206\u914d\u4e00\u4e9bPartition\uff0c\u57fa\u672c\u4e0a\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u672a\u67651\u52302\u5e74\u7684\u541e\u5410\u91cf\u6765\u786e\u5b9aPartition\u6570\u91cf\uff0c\u8fd9\u6837\u6765\u4f7fPartition\u6570\u91cf\u5728\u4e00\u4e2a\u957f\u65f6\u671f\u5185\u4fdd\u6301\u4e0d\u53d8\u3002\u4ee5\u4e0b\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u516c\u5f0f\u63a8\u7b97\uff1a"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"Num(partitions) = max(t/p, t/c)"})}),"\n",(0,i.jsx)(n.p,{children:"t \uff1a\u76ee\u6807\u541e\u5410\u91cf"}),"\n",(0,i.jsx)(n.p,{children:"p\uff1a\u751f\u4ea7\u8005\u6bcf\u4e2aParition\u4e0a\u7684\u541e\u5410\u91cf"}),"\n",(0,i.jsx)(n.p,{children:"c\uff1a\u6d88\u8d39\u8005\u5728\u6bcf\u4e2a Partition\u4e0a\u7684\u541e\u5410\u91cf"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u751f\u4ea7\u8005",children:"\u751f\u4ea7\u8005"}),"\n",(0,i.jsx)(n.p,{children:"Kafka\u7684\u751f\u4ea7\u8005\u5fc5\u987b\u8981\u6839\u636e\u573a\u666f\u8003\u8651\u591a\u79cd\u9009\u62e9\uff1a\u662f\u5426\u6bcf\u4e2a\u6d88\u606f\u90fd\u5f88\u91cd\u8981\uff1f\u662f\u5426\u5141\u8bb8\u4e22\u5931\u4e00\u5c0f\u90e8\u5206\u6d88\u606f\uff1f\u5076\u5c14\u51fa\u73b0\u91cd\u590d\u6d88\u606f\u662f\u5426\u53ef\u4ee5\u63a5\u53d7\uff1f\u662f\u5426\u6709\u4e25\u683c\u7684\u5ef6\u8fdf\u548c\u541e\u5410\u91cf\u8981\u6c42\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u4ea7\u8005\u67b6\u6784\u56fe\uff1a"}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-4.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.p,{children:["\u751f\u4ea7\u8005\u4ece\u6784\u5efa",(0,i.jsx)(n.code,{children:"ProducerRecord"})," \u5bf9\u8c61\u5f00\u59cb\uff0c",(0,i.jsx)(n.code,{children:"ProducerRecord "}),"\u5bf9\u8c61\u9700\u8981\u5305\u542b\u76ee\u6807\u4e3b\u9898\u548c\u8981\u53d1\u9001\u7684\u5185\u5bb9\u3002",(0,i.jsx)(n.strong,{children:"\u53ef\u4ee5\u6307\u5b9a\u952e\u6216\u5206\u533a"}),"\uff0c\u7136\u540e\u53d1\u9001",(0,i.jsx)(n.code,{children:"ProducerRecord"})," \u5bf9\u8c61\u65f6\uff0c\u751f\u4ea7\u8005\u8981\u5148\u628a\u952e\u548c\u503c\u5bf9\u8c61\u5e8f\u5217\u5316\u6210\u5b57\u8282\u6570\u7ec4\uff0c\u8fd9\u6837\u5b83\u4eec\u624d\u80fd\u591f\u5728\u7f51\u7edc\u4e0a\u4f20\u8f93\u3002\u63a5\u4e0b\u6765\uff0c\u6570\u636e\u88ab\u4f20\u7ed9\u5206\u533a\u5668\u3002\u5982\u679c\u4e4b\u524d\u5728 ",(0,i.jsx)(n.code,{children:"ProducerRecord"})," \u5bf9\u8c61\u91cc\u6307\u5b9a\u4e86\u5206\u533a\uff0c\u90a3\u4e48\u5206\u533a\u5668\u5c31\u4e0d\u4f1a\u518d\u505a\u4efb\u4f55\u4e8b\u60c5\uff0c\u76f4\u63a5\u628a\u6307\u5b9a\u7684\u5206\u533a\u8fd4\u56de\u3002\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5206\u533a\uff0c\u90a3\u4e48\u5206\u533a\u5668\u4f1a\u6839\u636e",(0,i.jsx)(n.code,{children:"ProducerRecord"})," \u5bf9\u8c61\u7684\u952e\u6765\u9009\u62e9\u4e00\u4e2a\u5206\u533a\u3002\u9009\u597d\u5206\u533a\u4ee5\u540e\uff0c\u751f\u4ea7\u8005\u5c31\u77e5\u9053\u8be5\u5f80\u54ea\u4e2a\u4e3b\u9898\u548c\u5206\u533a\u53d1\u9001\u8fd9\u6761\u8bb0\u5f55\u4e86\u3002\u7d27\u63a5\u7740\uff0c\u8fd9\u6761\u8bb0\u5f55\u88ab\u6dfb\u52a0\u5230\u4e00\u4e2a\u8bb0\u5f55\u6279\u6b21\u91cc\uff0c\u8fd9\u4e2a\u6279\u6b21\u91cc\u7684\u6240\u6709\u6d88\u606f\u4f1a\u88ab\u53d1\u9001\u5230\u76f8\u540c\u7684\u4e3b\u9898\u548c\u5206\u533a\u4e0a\u3002\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b\u8d1f\u8d23\u628a\u8fd9\u4e9b\u8bb0\u5f55\u6279\u6b21\u53d1\u9001\u5230\u76f8\u5e94\u7684broker \u4e0a\u3002\u670d \u52a1 \u5668 \u5728 \u6536 \u5230 \u8fd9 \u4e9b \u6d88 \u606f \u65f6 \u4f1a \u8fd4 \u56de \u4e00 \u4e2a \u54cd \u5e94\u3002 \u5982 \u679c \u6d88 \u606f \u6210 \u529f \u5199 \u5165 Kafka\uff0c \u5c31 \u8fd4 \u56de \u4e00 \u4e2a",(0,i.jsx)(n.code,{children:"RecordMetaData"})," \u5bf9\u8c61\uff0c\u5b83\u5305\u542b\u4e86\u4e3b\u9898\u548c\u5206\u533a\u4fe1\u606f\uff0c\u4ee5\u53ca\u8bb0\u5f55\u5728\u5206\u533a\u91cc\u7684\u504f\u79fb\u91cf\u3002\u5982\u679c\u5199\u5165\u5931\u8d25\uff0c\u5219\u4f1a\u8fd4\u56de\u4e00\u4e2a\u9519\u8bef\u3002\u751f\u4ea7\u8005\u5728\u6536\u5230\u9519\u8bef\u4e4b\u540e\u4f1a\u5c1d\u8bd5\u91cd\u65b0\u53d1\u9001\u6d88\u606f\uff0c\u51e0\u6b21\u4e4b\u540e\u5982\u679c\u8fd8\u662f\u5931\u8d25\uff0c\u5c31\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u4ea7\u8005\u4ee3\u7801\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.example.kafkademo;\n\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.clients.producer.RecordMetadata;\nimport org.apache.kafka.common.serialization.StringSerializer;\n\nimport java.util.Properties;\nimport java.util.concurrent.Future;\n\n/**\n * @author liufei\n **/\npublic class KafkaExampleNoAuthProduce {\n\n    String bootstrapServers = "127.0.0.1:9092,127.0.0.1:9093,127.0.0.1:9094"; // Kafka broker \u5730\u5740\n\n    public void producer() {\n        String topic = "liufei-test"; // \u76ee\u6807\u4e3b\u9898\n\n        // \u8bbe\u7f6e Kafka \u751f\u4ea7\u8005\u914d\u7f6e\n        Properties properties = new Properties();\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n\n        // \u521b\u5efa Kafka \u751f\u4ea7\u8005\n        KafkaProducer<String, String> producer = new KafkaProducer<>(properties);\n\n        // \u521b\u5efa\u751f\u4ea7\u8005\u8bb0\u5f55\n\n        Thread produce = new Thread(() -> {\n\n            int i = 0;\n            try {\n                StringBuilder stringBuilder = new StringBuilder("value");\n                while (true) {\n                    // ProducerRecord\u7684\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u6307\u5b9a\u5206\u533a ProducerRecord(String topic, Integer partition, K key, V value)\n                    ProducerRecord<String, String> record = new ProducerRecord<>(topic, "key1", stringBuilder.append(i).toString());\n                    // \u53d1\u9001\u6d88\u606f\n                    Future<RecordMetadata> future = producer.send(record);\n                    RecordMetadata metadata = future.get(); // \u7b49\u5f85\u6d88\u606f\u53d1\u9001\u5b8c\u6210\n                    System.out.printf("Message sent to topic %s partition %d offset %d  i %d%n",\n                            metadata.topic(), metadata.partition(), metadata.offset(), i);\n                    Thread.sleep(500);\n                    i++;\n                }\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            } finally {\n                producer.close();\n            }\n        });\n        produce.start();\n\n    }\n\n    public static void main(String[] args) {\n        KafkaExampleNoAuthProduce kafkaExampleNoAuthProduce = new KafkaExampleNoAuthProduce();\n        kafkaExampleNoAuthProduce.producer();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u606f\u53d1\u9001",children:"\u6d88\u606f\u53d1\u9001"}),"\n",(0,i.jsx)(n.p,{children:"Kafka\u751f\u4ea7\u8005\u53d1\u9001\u6d88\u606f\u67093\u79cd\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53d1\u9001\u5e76\u5fd8\u8bb0\uff08fire-and-forget\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6211\u4eec\u628a\u6d88\u606f\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u4f46\u5e76\u4e0d\u5173\u5fc3\u5b83\u662f\u5426\u6b63\u5e38\u5230\u8fbe\u3002\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u4f1a\u6b63\u5e38\u5230\u8fbe\uff0c\u56e0\u4e3a Kafka \u662f\u9ad8\u53ef\u7528\u7684\uff0c\u800c\u4e14\u751f\u4ea7\u8005\u4f1a\u81ea\u52a8\u5c1d\u8bd5\u91cd\u53d1\u3002\u8fd9\u79cd\u6548\u7387\u662f\u6700\u9ad8\u7684\uff0c\u4e0d\u8fc7\uff0c\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6709\u65f6\u5019\u4e5f\u4f1a\u4e22\u5931\u4e00\u4e9b\u6d88\u606f\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Override\npublic Future<RecordMetadata> send(ProducerRecord<K, V> record) {\n    return send(record, null);\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u540c\u6b65\u53d1\u9001"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u4f7f\u7528 send() \u65b9\u6cd5\u53d1\u9001\u6d88\u606f\uff0c\u5b83\u4f1a\u8fd4\u56de\u4e00\u4e2a ",(0,i.jsx)(n.code,{children:"Future"})," \u5bf9\u8c61\uff0c\u963b\u585e\u8c03\u7528  ",(0,i.jsx)(n.code,{children:"Future"}),"\u7684get() \u65b9\u6cd5\u8fdb\u884c\u7b49\u5f85\uff0c\u5c31\u53ef\u4ee5\u77e5\u9053\u6d88\u606f\u662f\u5426\u53d1\u9001\u6210\u529f\u3002"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5f02\u6b65\u53d1\u9001"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6211\u4eec\u8c03\u7528 send() \u65b9\u6cd5\uff0c\u5e76\u6307\u5b9a\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\uff0c\u670d\u52a1\u5668\u5728\u8fd4\u56de\u54cd\u5e94\u65f6\u8c03\u7528\u8be5\u51fd\u6570\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Override\npublic Future<RecordMetadata> send(ProducerRecord<K, V> record, Callback callback) {\n    // intercept the record, which can be potentially modified; this method does not throw exceptions\n    ProducerRecord<K, V> interceptedRecord = this.interceptors.onSend(record);\n    return doSend(interceptedRecord, callback);\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u53c2\u6570\u914d\u7f6e",children:"\u53c2\u6570\u914d\u7f6e"}),"\n",(0,i.jsx)(n.p,{children:"Kafka\u4e2d\u6709\u5f88\u591a\u91cd\u8981\u7684\u53c2\u6570\uff0c\u8fd9\u4e9b\u53c2\u6570\u51b3\u5b9a\u4e86Kafka\u7684\u6027\u80fd\u8868\u73b0\u548c\u4e00\u4e9b\u573a\u666f\u7279\u6027\u3002Kafka\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u8bbe\u7f6e\u3002Kafka\u7684\u914d\u7f6e\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8fd0\u884c\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u4e2d\uff08",(0,i.jsx)(n.code,{children:"config/producer.properties"}),"\u6216\u8005",(0,i.jsx)(n.code,{children:"config/consumer.properties"}),"\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u7f16\u7801\u914d\u7f6e\uff0c\u6bd4\u5982\uff1a"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u751f\u4ea7\u8005\nProperties props = new Properties();\nprops.put("bootstrap.servers", "localhost:9092");\nprops.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");\nprops.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");\nprops.put("buffer.memory", 33554432L);  // \u8bbe\u7f6e\u7f13\u51b2\u533a\u5185\u5b58\u5927\u5c0f\uff0c\u5355\u4f4d\u4e3a\u5b57\u8282\nKafkaProducer<String, String> producer = new KafkaProducer<>(props);\n\n// \u6d88\u8d39\u8005\nProperties props = new Properties();\nprops.put("bootstrap.servers", "localhost:9092");\nprops.put("group.id", "my-consumer-group");\nprops.put("key.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");\nprops.put("value.deserializer", "org.apache.kafka.common.serialization.StringDeserializer");\nKafkaConsumer<String, String> consumer = new KafkaConsumer<>(props);\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u542f\u52a8\u53c2\u6570\uff0c\u6bd4\u5982\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"kafka-console-producer.sh --broker-list localhost:9092 --topic my-topic --producer-property buffer.memory=33554432\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u751f\u4ea7\u8005\u7684\u91cd\u8981\u53c2\u6570\uff1a"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"acks \uff1a\u53c2\u6570\u6307\u5b9a\u4e86\u5fc5\u987b\u8981\u6709\u591a\u5c11\u4e2a\u5206\u533a\u526f\u672c\u6536\u5230\u6d88\u606f\uff0c\u751f\u4ea7\u8005\u624d\u4f1a\u8ba4\u4e3a\u6d88\u606f\u5199\u5165\u662f\u6210\u529f\u7684\u3002\u8fd9\u4e2a\u53c2\u6570\u5bf9\u6d88\u606f\u4e22\u5931\u7684\u53ef\u80fd\u6027\u6709\u91cd\u8981\u5f71\u54cd\u3002acks=0\uff0c1\uff0call\u30020:\u5b8c\u5168\u5f02\u6b65\u4e0d\u9700\u8981kafka\u786e\u8ba4\u8fd4\u56de\uff0c1:\u81f3\u5c11\u7b49\u5f85\u4e3b\u5206\u7247\u8fd4\uff08Kafka\uff0c\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6d88\u606f\u662f\u5148\u5199\u5165\u4e3b\u5206\u7247\u7136\u540e\u7531\u4e3b\u5206\u7247\u8d1f\u8d23\u5c06\u6d88\u606f\u540c\u6b65\u5230\u526f\u672c\u5206\u7247\uff09\u30021\u4e3b\u8981\u662f\u4e3a\u4e86\u907f\u514d\u6d88\u606f\u672a\u53d1\u751f\u5230Kafka\u6bd4\u5982\u7f51\u7edc\u6545\u969c\u7b49\u5c31\u8fd4\u56de\u5230\u8fd9\u6570\u636e\u672a\u5199\u5165\u3002\u800c0\u548c1\u90fd\u65e0\u6cd5\u4fdd\u8bc1\u5206\u533a\u5bb9\u9519\u6027\uff0c\u5373\u4e3b\u5206\u7247\u5bf9\u5e94\u7684broker\u6302\u6389\uff0c\u672a\u540c\u6b65\u5230\u526f\u672c\u5206\u7247\u7684\u6d88\u606f\u4f1a\u4e22\u5931\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"buffer.memory\uff1a\u8be5\u53c2\u6570\u7528\u6765\u8bbe\u7f6e\u751f\u4ea7\u8005\u5185\u5b58\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff0c\u751f\u4ea7\u8005\u7528\u5b83\u7f13\u51b2\u8981\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6d88\u606f\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u53d1\u9001\u6d88\u606f\u7684\u901f\u5ea6\u8d85\u8fc7\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u901f\u5ea6\uff0c\u4f1a\u5bfc\u81f4\u751f\u4ea7\u8005\u7a7a\u95f4\u4e0d\u8db3\u3002\u8fd9\u4e2a\u65f6\u5019\uff0csend() \u65b9\u6cd5\u8c03\u7528\u8981\u4e48\u88ab\u963b\u585e\uff0c\u8981\u4e48\u629b\u51fa\u5f02\u5e38\uff0c\u53d6\u51b3\u4e8e\u5982\u4f55\u8bbe\u7f6e block.on.buffer.full \u53c2\u6570\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"compression.type\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u53d1\u9001\u65f6\u4e0d\u4f1a\u88ab\u538b\u7f29\u3002\u8be5\u53c2\u6570\u53ef\u4ee5\u8bbe\u7f6e\u4e3a snappy\u3001gzip \u6216 lz4\uff0c\u5b83\u6307\u5b9a\u4e86\u6d88\u606f\u88ab\u53d1\u9001\u7ed9 broker \u4e4b\u524d\u4f7f\u7528\u54ea\u4e00\u79cd\u538b\u7f29\u7b97\u6cd5\u8fdb\u884c\u538b\u7f29\u3002snappy \u538b\u7f29\u7b97\u6cd5\u5360\u7528\u8f83\u5c11\u7684 CPU\uff0c\u5374\u80fd\u63d0\u4f9b\u8f83\u597d\u7684\u6027\u80fd\u548c\u76f8\u5f53\u53ef\u89c2\u7684\u538b\u7f29\u6bd4\uff0c\u5982\u679c\u6bd4\u8f83\u5173\u6ce8\u6027\u80fd\u548c\u7f51\u7edc\u5e26\u5bbd\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u7b97\u6cd5\u3002gzip \u538b\u7f29\u7b97\u6cd5\u4e00\u822c\u4f1a\u5360\u7528\u8f83\u591a\u7684 CPU\uff0c\u4f46\u4f1a\u63d0\u4f9b\u66f4\u9ad8\u7684\u538b\u7f29\u6bd4\uff0c\u6240\u4ee5\u5982\u679c\u7f51\u7edc\u5e26\u5bbd\u6bd4\u8f83\u6709\u9650\uff0c\u53ef\u4ee5\u4f7f\u7528\u8fd9\u79cd\u7b97\u6cd5\u3002\u4f7f\u7528\u538b\u7f29\u53ef\u4ee5\u964d\u4f4e\u7f51\u7edc\u4f20\u8f93\u5f00\u9500\u548c\u5b58\u50a8\u5f00\u9500\uff0c\u800c\u8fd9\u5f80\u5f80\u662f\u5411 Kafka \u53d1\u9001\u6d88\u606f\u7684\u74f6\u9888\u6240\u5728\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"batch.size\uff1a\u5f53\u6709\u591a\u4e2a\u6d88\u606f\u9700\u8981\u88ab\u53d1\u9001\u5230\u540c\u4e00\u4e2a\u5206\u533a\u65f6\uff0c\u751f\u4ea7\u8005\u4f1a\u628a\u5b83\u4eec\u653e\u5728\u540c\u4e00\u4e2a\u6279\u6b21\u91cc\u3002\u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u4e00\u4e2a\u6279\u6b21\u53ef\u4ee5\u4f7f\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u6309\u7167\u5b57\u8282\u6570\u8ba1\u7b97\uff08\u800c\u4e0d\u662f\u6d88\u606f\u4e2a\u6570\uff09\u3002\u5f53\u6279\u6b21\u88ab\u586b\u6ee1\uff0c\u6279\u6b21\u91cc\u7684\u6240\u6709\u6d88\u606f\u4f1a\u88ab\u53d1\u9001\u51fa\u53bb\u3002\u4e0d\u8fc7\u751f\u4ea7\u8005\u5e76\u4e0d\u4e00\u5b9a\u90fd\u4f1a\u7b49\u5230\u6279\u6b21\u88ab\u586b\u6ee1\u624d\u53d1\u9001\uff0c\u534a\u6ee1\u7684\u6279\u6b21\uff0c\u751a\u81f3\u53ea\u5305\u542b\u4e00\u4e2a\u6d88\u606f\u7684\u6279\u6b21\u4e5f\u6709\u53ef\u80fd\u88ab\u53d1\u9001\u3002\u6240\u4ee5\u5c31\u7b97\u628a\u6279\u6b21\u5927\u5c0f\u8bbe\u7f6e\u5f97\u5f88\u5927\uff0c\u4e5f\u4e0d\u4f1a\u9020\u6210\u5ef6\u8fdf\uff0c\u53ea\u662f\u4f1a\u5360\u7528\u66f4\u591a\u7684\u5185\u5b58\u800c\u5df2\u3002\u4f46\u5982\u679c\u8bbe\u7f6e\u5f97\u592a\u5c0f\uff0c\u56e0\u4e3a\u751f\u4ea7\u8005\u9700\u8981\u66f4\u9891\u7e41\u5730\u53d1\u9001\u6d88\u606f\uff0c\u4f1a\u589e\u52a0\u4e00\u4e9b\u989d\u5916\u7684\u5f00\u9500\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u6807\u5934\uff1a\u9664\u4e86\u952e\u548c\u503c\uff0c\u8bb0\u5f55\u8fd8\u53ef\u4ee5\u5305\u542b\u6807\u5934\u3002\u53ef\u4ee5\u5728\u4e0d\u6539\u53d8\u8bb0\u5f55\u952e\u2013\u503c\u5bf9\u7684\u60c5\u51b5\u4e0b\u5411\u6807\u5934\u4e2d\u6dfb\u52a0\u4e00\u4e9b\u6709\u5173\u8bb0\u5f55\u7684\u5143 \u6570\u636e\u3002\u6807\u5934\u6307\u660e\u4e86\u8bb0\u5f55\u6570\u636e\u7684\u6765\u6e90\uff0c\u53ef\u4ee5\u5728\u4e0d\u89e3\u6790\u6d88\u606f\u4f53\u7684\u60c5\u51b5\u4e0b\u6839\u636e\u6807\u5934\u4fe1\u606f\u6765\u8def\u7531\u6216\u8ddf\u8e2a\u6d88\u606f(\u6d88\u606f\u6709\u53ef\u80fd\u88ab\u52a0\u5bc6\uff0c\u800c\u8def\u7531\u5668\u6ca1\u6709\u8bbf\u95ee\u52a0\u5bc6\u6570\u636e\u7684\u6743\u9650)\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'ProducerRecord<String, String> record =\n    new ProducerRecord<>("CustomerCountry", "Precision Products", "France");\n// \u6807\u5934\u7531\u4e00\u7cfb\u5217\u6709\u5e8f\u7684\u952e\u2013\u503c\u5bf9\u7ec4\u6210\u3002\u952e\u662f\u5b57\u7b26\u4e32\uff0c\u503c\u53ef\u4ee5\u662f\u4efb\u610f\u88ab\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\uff0c\u5c31\u50cf\u6d88\u606f\u91cc\u7684\u503c\u4e00\u6837\u3002\nrecord.headers().add("privacy-level","YOLO".getBytes(StandardCharsets.UTF_8));\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"\u8d85\u65f6\u65f6\u95f4\uff1a"}),"\n"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-5.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"max.block.ms\uff1a\u63a7\u5236\u5728\u8c03\u7528 send() \u6216\u901a\u8fc7 partitionsFor() \u663e\u5f0f\u5730\u8bf7\u6c42\u5143\u6570\u636e\u65f6\u751f\u4ea7\u8005\u53ef\u4ee5\u53d1\u751f \u963b\u585e\u7684\u65f6\u95f4\u3002\u5f53\u751f\u4ea7\u8005\u7684\u53d1\u9001\u7f13\u51b2\u533a\u88ab\u586b\u6ee1\u6216\u5143\u6570\u636e\u4e0d\u53ef\u7528\u65f6\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5c31\u53ef\u80fd\u53d1\u751f\u963b\u585e\u3002\u5f53\u8fbe\u5230 max.block.ms \u914d\u7f6e\u7684\u65f6\u95f4\u65f6\uff0c\u5c31\u4f1a\u629b\u51fa\u4e00\u4e2a\u8d85\u65f6\u5f02\u5e38\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"linger.ms\uff1a\u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u751f\u4ea7\u8005\u5728\u53d1\u9001\u6279\u6b21\u4e4b\u524d\u7b49\u5f85\u66f4\u591a\u6d88\u606f\u52a0\u5165\u6279\u6b21\u7684\u65f6\u95f4\u3002KafkaProducer \u4f1a\u5728\u6279\u6b21\u586b\u6ee1\u6216 linger.ms \u8fbe\u5230\u4e0a\u9650\u65f6\u628a\u6279\u6b21\u53d1\u9001\u51fa\u53bb\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u53ea\u8981\u6709\u53ef\u7528\u7684\u7ebf\u7a0b\uff0c\u751f\u4ea7\u8005\u5c31\u4f1a\u628a\u6d88\u606f\u53d1\u9001\u51fa\u53bb\uff0c\u5c31\u7b97\u6279\u6b21\u91cc\u53ea\u6709\u4e00\u4e2a\u6d88\u606f\u3002\u628a linger.ms \u8bbe\u7f6e\u6210\u6bd4 0 \u5927\u7684\u6570\uff0c\u8ba9\u751f\u4ea7\u8005\u5728\u53d1\u9001\u6279\u6b21\u4e4b\u524d\u7b49\u5f85\u4e00\u4f1a\u513f\uff0c\u4f7f\u66f4\u591a\u7684\u6d88\u606f\u52a0\u5165\u5230\u8fd9\u4e2a\u6279\u6b21\u3002\u867d\u7136\u8fd9\u6837\u4f1a\u589e\u52a0\u5ef6\u8fdf\uff0c\u4f46\u4e5f\u4f1a\u63d0\u5347\u541e\u5410\u91cf\uff08\u56e0\u4e3a\u4e00\u6b21\u6027\u53d1\u9001\u66f4\u591a\u7684\u6d88\u606f\uff0c\u6bcf\u4e2a\u6d88\u606f\u7684\u5f00\u9500\u5c31\u53d8\u5c0f\u4e86\uff09\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"delivery.timeout.ms\uff1a\u63a7\u5236\u4ece\u6d88\u606f\u51c6\u5907\u597d\u53d1\u9001(send() \u65b9\u6cd5\u6210\u529f\u8fd4\u56de\u5e76\u5c06\u6d88\u606f\u653e\u5165\u6279\u6b21\u4e2d)\u5230 broker \u54cd\u5e94\u6216 \u5ba2\u6237\u7aef\u653e\u5f03\u53d1\u9001(\u5305\u62ec\u91cd\u8bd5)\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u3002\u5982\u56fe\u6240\u793a\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5e94\u8be5\u5927\u4e8e linger.ms \u548c request.timeout.ms\u3002\u5982\u679c\u914d\u7f6e\u7684\u65f6\u95f4\u4e0d\u6ee1\u8db3\u8fd9\u4e00\u70b9\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\u3002\u901a\u5e38\uff0c\u6210\u529f\u53d1\u9001\u6d88\u606f\u7684\u901f \u5ea6\u8981\u6bd4 delivery.timeout.ms \u5feb\u5f97\u591a\u3002\u5982\u679c\u751f\u4ea7\u8005\u5728\u91cd\u8bd5\u65f6\u8d85\u51fa\u4e86 delivery.timeout.ms\uff0c\u90a3\u4e48\u5c06\u6267\u884c\u56de\u8c03\uff0c\u5e76\u4f1a\u5c06 broker \u4e4b\u524d\u8fd4\u56de\u7684 \u9519\u8bef\u4f20\u7ed9\u5b83\u3002\u5982\u679c\u6d88\u606f\u6279\u6b21\u8fd8\u6ca1\u6709\u53d1\u9001\u5b8c\u6bd5\u5c31\u8d85\u51fa\u4e86 delivery.timeout.ms\uff0c\u90a3\u4e48\u4e5f\u5c06\u6267\u884c\u56de \u8c03\uff0c\u5e76\u4f1a\u5c06\u8d85\u65f6\u5f02\u5e38\u4f20\u7ed9\u5b83\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"retries\u548cretry.backoff.ms\uff1a\u5f53\u751f\u4ea7\u8005\u6536\u5230\u6765\u81ea\u670d\u52a1\u5668\u7684\u9519\u8bef\u6d88\u606f\u65f6\uff0c\u8fd9\u4e2a\u9519\u8bef\u6709\u53ef\u80fd\u662f\u6682\u65f6\u7684(\u4f8b\u5982\uff0c\u4e00\u4e2a\u5206\u533a\u6ca1\u6709\u9996\u9886)\u3002\u5728 \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0cretries \u53c2\u6570\u53ef\u7528\u4e8e\u63a7\u5236\u751f\u4ea7\u8005\u5728\u653e\u5f03\u53d1\u9001\u5e76\u5411\u5ba2\u6237\u7aef\u5ba3\u544a\u5931\u8d25\u4e4b\u524d\u53ef\u4ee5\u91cd\u8bd5\u591a\u5c11 \u6b21\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u91cd\u8bd5\u65f6\u95f4\u95f4\u9694\u662f 100 \u6beb\u79d2\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7 retry.backoff.ms \u53c2\u6570\u6765\u63a7\u5236\u91cd\u8bd5\u65f6 \u95f4\u95f4\u9694\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"\u5e76\u4e0d\u5efa\u8bae\u5728\u5f53\u524d\u7248\u672c\u7684 Kafka \u4e2d\u4f7f\u7528\u8fd9\u4e9b\u53c2\u6570\u3002\u76f8\u53cd\uff0c\u4f60\u53ef\u4ee5\u6d4b\u8bd5\u4e00\u4e0b broker \u5728\u53d1\u751f\u5d29\u6e83\u4e4b\u540e\u9700\u8981\u591a \u957f\u65f6\u95f4\u6062\u590d(\u4e5f\u5c31\u662f\u76f4\u5230\u6240\u6709\u5206\u533a\u90fd\u6709\u4e86\u9996\u9886\u526f\u672c)\uff0c\u5e76\u8bbe\u7f6e\u5408\u7406\u7684 delivery.timeout.ms\uff0c\u8ba9 \u91cd\u8bd5\u65f6\u95f4\u5927\u4e8e Kafka \u96c6\u7fa4\u4ece\u5d29\u6e83\u4e2d\u6062\u590d\u7684\u65f6\u95f4\uff0c\u4ee5\u514d\u751f\u4ea7\u8005\u8fc7\u65e9\u653e\u5f03\u91cd\u8bd5\u3002"})}),"\n",(0,i.jsx)(n.p,{children:"\u751f\u4ea7\u8005\u5e76\u4e0d\u4f1a\u91cd\u8bd5\u6240\u6709\u7684\u9519\u8bef\u3002\u6709\u4e9b\u9519\u8bef\u4e0d\u662f\u6682\u65f6\u7684\uff0c\u751f\u4ea7\u8005\u5c31\u4e0d\u4f1a\u8fdb\u884c\u91cd\u8bd5(\u4f8b\u5982\uff0c\u201c\u6d88\u606f\u592a\u5927\u201d\u9519 \u8bef)\u3002\u901a\u5e38\uff0c\u5bf9\u4e8e\u53ef\u91cd\u8bd5\u7684\u9519\u8bef\uff0c\u751f\u4ea7\u8005\u4f1a\u81ea\u52a8\u8fdb\u884c\u91cd\u8bd5\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5904\u7406\u91cd\u8bd5\u903b\u8f91\u3002 \u4f60\u8981\u505a\u7684\u662f\u96c6\u4e2d\u7cbe\u529b\u5904\u7406\u4e0d\u53ef\u91cd\u8bd5\u7684\u9519\u8bef\u6216\u8005\u5f53\u91cd\u8bd5\u6b21\u6570\u8fbe\u5230\u4e0a\u9650\u65f6\u7684\u60c5\u51b5\u3002"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u5982\u679c\u60f3\u5b8c\u5168\u7981\u7528\u91cd\u8bd5\uff0c\u90a3\u4e48\u552f\u4e00\u53ef\u884c\u7684\u65b9\u6cd5\u662f\u5c06 retries \u8bbe\u7f6e\u4e3a 0"})}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsxs)(n.li,{children:["max.in.flight.requests.per.connection\uff1a\u8be5\u53c2\u6570\u6307\u5b9a\u4e86\u751f\u4ea7\u8005\u5728\u6536\u5230\u670d\u52a1\u5668\u54cd\u5e94\u4e4b\u524d\u53ef\u4ee5\u53d1\u9001\u591a\u5c11\u4e2a\u6d88\u606f\u3002\u5b83\u7684\u503c\u8d8a\u9ad8\uff0c\u5c31\u4f1a\u5360\u7528\u8d8a\u591a\u7684\u5185\u5b58\uff0c\u4e0d\u8fc7\u4e5f\u4f1a\u63d0\u5347\u541e\u5410\u91cf\u3002",(0,i.jsx)(n.strong,{children:"\u628a\u5b83\u8bbe\u4e3a 1 \u53ef\u4ee5\u4fdd\u8bc1\u6d88\u606f\u662f\u6309\u7167\u53d1\u9001\u7684\u987a\u5e8f\u5199\u5165\u670d\u52a1\u5668\u7684\uff0c\u5373\u4f7f\u53d1\u751f\u4e86\u91cd\u8bd5\u3002"})]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u8981\u4fdd\u8bc1\u987a\u5e8f\uff0c\u8fd9\u4e2a\u53c2\u6570\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u6b63\u5e38Kafka\u4f1a\u4fdd\u8bc1\u6d88\u606f\u7684\u987a\u5e8f\uff0c\u4e0d\u4f1a\u53d1\u751f\u987a\u5e8f\u91cd\u6392\u7684\u60c5\u51b5\uff0c\u4f46\u5982\u679c\u53d1\u751f\u53d1\u9001\u5931\u8d25\u800c\u91cd\u8bd5\uff0c\u5219\u6d88\u606f\u7684\u987a\u5e8f\u5c31\u4f1a\u4e0d\u4e00\u81f4\u3002\u6bd4\u5982\uff1a\u5982\u679c\u628a retries\u8bbe\u4e3a\u975e\u96f6\u6574\u6570\uff0c\u540c\u65f6\u628a",(0,i.jsx)(n.code,{children:"max.in.flight.requests.per.connection"}),"\u8bbe\u4e3a\u6bd4 1 \u5927\u7684\u6570\uff0c\u90a3\u4e48\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u6279\u6b21\u6d88\u606f\u5199\u5165\u5931\u8d25\uff0c\u800c\u7b2c\u4e8c\u4e2a\u6279\u6b21\u5199\u5165\u6210\u529f\uff0cbroker \u4f1a\u91cd\u8bd5\u5199\u5165\u7b2c\u4e00\u4e2a\u6279\u6b21\u3002\u5982\u679c\u6b64\u65f6\u7b2c\u4e00\u4e2a\u6279\u6b21\u4e5f\u5199\u5165\u6210\u529f\uff0c\u90a3\u4e48\u4e24\u4e2a\u6279\u6b21\u7684\u987a\u5e8f\u5c31\u53cd\u8fc7\u6765\u4e86\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["max.request.size\uff1a\u8be5\u53c2\u6570\u7528\u4e8e\u63a7\u5236\u751f\u4ea7\u8005\u53d1\u9001\u7684\u8bf7\u6c42\u5927\u5c0f\u3002\u5b83\u53ef\u4ee5\u6307\u80fd\u53d1\u9001\u7684\u5355\u4e2a\u6d88\u606f\u7684\u6700\u5927\u503c\uff0c\u4e5f\u53ef\u4ee5\u6307\u5355\u4e2a\u8bf7\u6c42\u91cc\u6240\u6709\u6d88\u606f\u603b\u7684\u5927\u5c0f\u3002\u4f8b\u5982\uff0c\u5047\u8bbe\u8fd9\u4e2a\u503c\u4e3a 1MB\uff0c\u90a3\u4e48\u53ef\u4ee5\u53d1\u9001\u7684\u5355\u4e2a\u6700\u5927\u6d88\u606f\u4e3a 1MB\uff0c\u6216\u8005\u751f\u4ea7\u8005\u53ef\u4ee5\u5728\u5355\u4e2a\u8bf7\u6c42\u91cc\u53d1\u9001\u4e00\u4e2a\u6279\u6b21\uff0c\u8be5\u6279\u6b21\u5305\u542b\u4e86 1000 \u4e2a\u6d88\u606f\uff0c\u6bcf\u4e2a\u6d88\u606f\u5927\u5c0f\u4e3a 1KB\u3002\u53e6\u5916\uff0cbroker \u5bf9\u53ef\u63a5\u6536\u7684\u6d88\u606f\u6700\u5927\u503c\u4e5f\u6709\u81ea\u5df1\u7684\u9650\u5236\uff08",(0,i.jsx)(n.code,{children:"message.max.bytes"}),"\uff09\uff0c\u6240\u4ee5\u4e24\u8fb9\u7684\u914d\u7f6e\u6700\u597d\u53ef\u4ee5\u5339\u914d\uff0c\u907f\u514d\u751f\u4ea7\u8005\u53d1\u9001\u7684\u6d88\u606f\u88ab broker \u62d2\u7edd\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"receive.buffer.bytes \u548c send.buffer.bytes\uff1a\u8fd9\u4e24\u4e2a\u53c2\u6570\u5206\u522b\u6307\u5b9a\u4e86 TCP socket \u63a5\u6536\u548c\u53d1\u9001\u6570\u636e\u5305\u7684\u7f13\u51b2\u533a\u5927\u5c0f\u3002\u5982\u679c\u5b83\u4eec\u88ab\u8bbe\u4e3a-1\uff0c\u5c31\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9ed8\u8ba4\u503c\u3002\u5982\u679c\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u4e0e broker \u5904\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u4e2d\u5fc3\uff0c\u90a3\u4e48\u53ef\u4ee5\u9002\u5f53\u589e\u5927\u8fd9\u4e9b\u503c\uff0c\u56e0\u4e3a\u8de8\u6570\u636e\u4e2d\u5fc3\u7684\u7f51\u7edc\u4e00\u822c\u90fd\u6709\u6bd4\u8f83\u9ad8\u7684\u5ef6\u8fdf\u548c\u6bd4\u8f83\u4f4e\u7684\u5e26\u5bbd\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u5e8f\u5217\u5316\u5668",children:"\u5e8f\u5217\u5316\u5668"}),"\n",(0,i.jsxs)(n.p,{children:["Kafka\u63a8\u8350\u4e00\u79cd\u4e0e\u7f16\u7a0b\u8bed\u8a00\u65e0\u5173\u7684\u5e8f\u5217\u5316\u683c\u5f0f\uff1a",(0,i.jsx)(n.code,{children:"Avro"}),"\uff0c\u5176\u6570\u636e\u901a\u8fc7\u4e0e\u8bed\u8a00\u65e0\u5173\u7684 schema \u6765\u5b9a\u4e49\u3002schema \u901a\u8fc7 JSON \u6765\u63cf\u8ff0\uff0c\u6570\u636e\u88ab\u5e8f\u5217\u5316\u6210\u4e8c\u8fdb\u5236\u6587\u4ef6\u6216 JSON \u6587\u4ef6\uff0c\u4e0d\u8fc7\u4e00\u822c\u4f1a\u4f7f\u7528\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002Avro \u5728\u8bfb\u5199\u6587\u4ef6\u65f6\u9700\u8981\u7528\u5230",(0,i.jsx)(n.code,{children:"schema"}),"\uff0c",(0,i.jsx)(n.code,{children:"schema"})," \u4e00\u822c\u4f1a\u88ab\u5185\u5d4c\u5728\u6570\u636e\u6587\u4ef6\u91cc\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Avro"})," \u6709\u4e00\u4e2a\u5f88\u6709\u610f\u601d\u7684\u7279\u6027\u662f\uff0c",(0,i.jsx)(n.strong,{children:"\u5f53\u8d1f\u8d23\u5199\u6d88\u606f\u7684\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u4e86\u65b0\u7684 schema\uff0c\u8d1f\u8d23\u8bfb\u6d88\u606f\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u6d88\u606f\u800c\u65e0\u9700\u505a\u4efb\u4f55\u6539\u52a8"}),"\uff0c\u8fd9\u4e2a\u7279\u6027\u4f7f\u5f97\u5b83\u7279\u522b\u9002\u5408\u7528\u5728\u50cfKafka \u8fd9\u6837\u7684\u6d88\u606f\u7cfb\u7edf\u4e0a\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u53d1\u9001\u6307\u5b9a\u5206\u533a",children:"\u53d1\u9001\u6307\u5b9a\u5206\u533a"}),"\n",(0,i.jsxs)(n.p,{children:["Kafka \u7684\u6d88\u606f\u662f\u4e00\u4e2a\u4e2a\u952e\u503c\u5bf9\uff0c",(0,i.jsx)(n.code,{children:"ProducerRecord"})," \u5bf9\u8c61\u5305\u542b\u4e86\u76ee\u6807\u4e3b\u9898\u3001\u952e\u548c\u503c\uff0c\u5e76\u4e14\u53ef\u4ee5\u53ea\u5305\u542b\u76ee\u6807\u4e3b\u9898\u548c\u503c\uff0c\u952e\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684 null\uff0c\u4e0d\u8fc7\u5927\u591a\u6570\u5e94\u7528\u7a0b\u5e8f\u4f1a\u7528\u5230\u952e\u3002"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u952e\u6709\u4e24\u4e2a\u7528\u9014\uff1a1. \u53ef\u4ee5\u4f5c\u4e3a\u6d88\u606f\u7684\u9644\u52a0\u4fe1\u606f\uff0c2. \u4e5f\u53ef\u4ee5\u7528\u6765\u51b3\u5b9a\u6d88\u606f\u8be5\u88ab\u5199\u5230\u4e3b\u9898\u7684\u54ea\u4e2a\u5206\u533a\uff0c\u62e5\u6709\u76f8\u540c\u952e\u7684\u6d88\u606f\u5c06\u88ab\u5199\u5230\u540c\u4e00\u4e2a\u5206\u533a\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u952e\u503c\u4e3a null\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u9ed8\u8ba4\u7684\u5206\u533a\u5668\uff0c\u90a3\u4e48\u8bb0\u5f55\u5c06\u88ab\u968f\u673a\u5730\u53d1\u9001\u5230\u4e3b\u9898\u5185\u5404\u4e2a\u53ef\u7528\u7684\u5206\u533a\u4e0a\u3002\u5206\u533a\u5668\u4f7f\u7528\u8f6e\u8be2\uff08Round Robin\uff09\u7b97\u6cd5\u5c06\u6d88\u606f\u5747\u8861\u5730\u5206\u5e03\u5230\u5404\u4e2a\u5206\u533a\u4e0a\u3002\u5982\u679c\u952e\u4e0d\u4e3a\u7a7a\uff0c\u5e76\u4e14\u4f7f\u7528\u4e86\u9ed8\u8ba4\u7684\u5206\u533a\u5668\uff0c\u90a3\u4e48 Kafka \u4f1a\u5bf9\u952e\u8fdb\u884c\u6563\u5217\uff08\u4f7f\u7528 Kafka \u81ea\u5df1\u7684\u6563\u5217\u7b97\u6cd5\uff0c\u5373\u4f7f\u5347\u7ea7 Java \u7248\u672c\uff0c\u6563\u5217\u503c\u4e5f\u4e0d\u4f1a\u53d1\u751f\u53d8\u5316\uff09 \uff0c\u7136\u540e\u6839\u636e\u6563\u5217\u503c\u628a\u6d88\u606f\u6620\u5c04\u5230\u7279\u5b9a\u7684\u5206\u533a\u4e0a\u3002\u8fd9\u91cc\u7684\u5173\u952e\u4e4b\u5904\u5728\u4e8e\uff0c\u540c\u4e00\u4e2a\u952e\u603b\u662f\u88ab\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u5206\u533a\u4e0a\uff0c\u6240\u4ee5\u5728\u8fdb\u884c\u6620\u5c04\u65f6\uff0c\u6211\u4eec\u4f1a\u4f7f\u7528\u4e3b\u9898\u6240\u6709\u7684\u5206\u533a\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u53ef\u7528\u7684\u5206\u533a\u3002\u8fd9\u4e5f\u610f\u5473\u7740\uff0c\u5982\u679c\u5199\u5165\u6570\u636e\u7684\u5206\u533a\u662f\u4e0d\u53ef\u7528\u7684\uff0c\u90a3\u4e48\u5c31\u4f1a\u53d1\u751f\u9519\u8bef\u3002\u4f46\u8fd9\u79cd\u60c5\u51b5\u5f88\u5c11\u53d1\u751f\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u6ce8\u610f\uff1a**\u53ea\u6709\u5728\u4e0d\u6539\u53d8\u4e3b\u9898\u5206\u533a\u6570\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u952e\u4e0e\u5206\u533a\u4e4b\u95f4\u7684\u6620\u5c04\u624d\u80fd\u4fdd\u6301\u4e0d\u53d8\u3002**\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5728\u5206\u533a\u6570\u91cf\u4fdd\u6301\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4fdd\u8bc1\u7528\u6237 045189 \u7684\u8bb0\u5f55\u603b\u662f\u88ab\u5199\u5230\u5206\u533a 34\u3002\u5728\u4ece\u5206\u533a\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u8fdb\u884c\u5404\u79cd\u4f18\u5316\u3002\u4e0d\u8fc7\uff0c\u4e00\u65e6\u4e3b\u9898\u589e\u52a0\u4e86\u65b0\u7684\u5206\u533a\uff0c\u8fd9\u4e9b\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u4e86\u2014\u2014\u65e7\u6570\u636e\u4ecd\u7136\u7559\u5728\u5206\u533a 34\uff0c\u4f46\u65b0\u7684\u8bb0\u5f55\u53ef\u80fd\u88ab\u5199\u5230\u5176\u4ed6\u5206\u533a\u4e0a\u3002\u5982\u679c\u8981\u4f7f\u7528\u952e\u6765\u6620\u5c04\u5206\u533a\uff0c\u90a3\u4e48\u6700\u597d\u5728\u521b\u5efa\u4e3b\u9898\u7684\u65f6\u5019\u5c31\u628a\u5206\u533a\u89c4\u5212\u597d \uff0c\u800c\u4e14\u6c38\u8fdc\u4e0d\u8981\u589e\u52a0\u65b0\u5206\u533a\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u5206\u533a\u7684\u4f8b\u5b50\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"package com.example.kafkademo;\n\nimport org.apache.kafka.clients.producer.Partitioner;\nimport org.apache.kafka.common.Cluster;\n\nimport java.util.Map;\n\n/**\n * @author liufei\n **/\npublic class CustomPartitioner implements Partitioner {\n\n    @Override\n    public void configure(Map<String, ?> configs) {\n        // \u914d\u7f6e\u5206\u533a\u5668\uff0c\u5982\u679c\u6709\u9700\u8981\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bfb\u53d6\u914d\u7f6e\u9879\n    }\n\n    @Override\n    public int partition(String topic, Object key, byte[] keyBytes, Object value, byte[] valueBytes, Cluster cluster) {\n        // \u81ea\u5b9a\u4e49\u5206\u533a\u903b\u8f91\n        // \u4f8b\u5982\uff1a\u6839\u636e key \u7684 hashCode \u5206\u914d\u5206\u533a\n        int numPartitions = cluster.partitionCountForTopic(topic);\n        return (keyBytes == null) ? 0 : Math.abs(keyBytes.hashCode()) % numPartitions;\n    }\n\n    @Override\n    public void close() {\n        // \u91ca\u653e\u8d44\u6e90\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u914d\u7f6e\u4f7f\u7528\u5206\u533a\u5668"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'Properties props = new Properties();\nprops.put("bootstrap.servers", "localhost:9092");\nprops.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");\nprops.put("value.serializer", "org.apache.kafka.common.serialization.StringSerializer");\nprops.put("partitioner.class", "com.example.CustomPartitioner");  // \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5206\u533a\u5668\u7c7b\u540d\nKafkaProducer<String, String> producer = new KafkaProducer<>(props);\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u914d\u989d\u9650\u5236\u548c\u9650\u6d41",children:"\u914d\u989d\u9650\u5236\u548c\u9650\u6d41"}),"\n",(0,i.jsx)(n.p,{children:"Kafka \u53ef\u4ee5\u9650\u5236\u751f\u4ea7\u6d88\u606f\u548c\u6d88\u8d39\u6d88\u606f\u7684\u901f\u7387\uff0c\u8fd9\u662f\u901a\u8fc7\u914d\u989d\u673a\u5236\u6765\u5b9e\u73b0\u7684\u3002Kafka \u63d0\u4f9b\u4e86 3 \u79cd\u914d\u989d\u7c7b\u578b: \u751f\u4ea7\u3001\u6d88\u8d39\u548c\u8bf7\u6c42\u3002\u751f\u4ea7\u914d\u989d\u548c\u6d88\u8d39\u914d\u989d\u9650\u5236\u4e86\u5ba2\u6237\u7aef\u53d1\u9001\u548c\u63a5\u6536\u6570\u636e\u7684\u901f\u7387(\u4ee5\u5b57\u8282 / \u79d2\u4e3a\u5355\u4f4d)\u3002\u8bf7\u6c42\u914d\u989d\u9650\u5236\u4e86 broker \u7528\u4e8e\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u65f6\u95f4\u767e\u5206\u6bd4\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u9ed8\u8ba4\u7684\u751f\u4ea7\u914d\u989d\u548c\u6d88\u8d39\u914d\u989d\u662f broker \u914d\u7f6e\u6587\u4ef6\u7684\u4e00\u90e8\u5206\u3002\u5982\u679c\u8981\u9650\u5236\u6bcf\u4e2a\u751f\u4ea7\u8005\u5e73\u5747\u53d1\u9001\u7684\u6d88\u606f\u4e0d\u8d85\u8fc7 2 MBps\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728 broker \u914d\u7f6e\u6587\u4ef6\u4e2d\u52a0\u5165 ",(0,i.jsx)(n.code,{children:"quota.producer.default=2M"}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4e5f\u53ef\u4ee5\u8986\u76d6 broker \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u9ed8\u8ba4\u914d\u989d\u6765\u4e3a\u67d0\u4e9b\u5ba2\u6237\u7aef\u914d\u7f6e\u7279\u5b9a\u7684\u914d\u989d\uff0c\u5c3d\u7ba1\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u3002\u5982\u679c\u5141\u8bb8 clientA \u7684\u914d\u989d\u8fbe\u5230 4 MBps\u3001clientB \u7684\u914d\u989d\u8fbe\u5230 10 MBps\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u914d\u7f6e: ",(0,i.jsx)(n.code,{children:'quota.producer.override="clientA:4M,clientB:10M"'}),"\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u8d85\u8fc7\u914d\u989d\u9650\u5236\u4e4b\u540e\uff0cbroker \u4f1a\u5f00\u59cb\u9650\u5236\u5ba2\u6237\u7aef\u8bf7\u6c42\uff0c\u4ee5\u9632\u6b62\u8d85\u51fa\u914d\u989d\u3002\u8fd9\u610f\u5473\u7740 broker \u5c06\u5ef6\u8fdf\u5bf9\u5ba2\u6237\u7aef \u8bf7\u6c42\u505a\u51fa\u54cd\u5e94\u3002\u5bf9\u5927\u591a\u6570\u5ba2\u6237\u7aef\u6765\u8bf4\uff0c\u8fd9\u6837\u4f1a\u81ea\u52a8\u964d\u4f4e\u8bf7\u6c42\u901f\u7387(\u56e0\u4e3a\u6267\u884c\u4e2d\u7684\u8bf7\u6c42\u6570\u91cf\u4e5f\u662f\u6709\u9650\u5236 \u7684)\uff0c\u5e76\u5c06\u5ba2\u6237\u7aef\u6d41\u91cf\u964d\u5230\u914d\u989d\u5141\u8bb8\u7684\u8303\u56f4\u5185\u3002\u4f46\u662f\uff0c\u88ab\u8282\u6d41\u7684\u5ba2\u6237\u7aef\u8fd8\u662f\u6709\u53ef\u80fd\u5411\u670d\u52a1\u5668\u7aef\u53d1\u9001\u989d\u5916\u7684 \u8bf7\u6c42\uff0c\u4e3a\u4e86\u4e0d\u53d7\u5f71\u54cd\uff0cbroker \u5c06\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u6682\u505c\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u901a\u4fe1\u901a\u9053\uff0c\u4ee5\u6ee1\u8db3\u914d\u989d\u8981\u6c42\u3002\u901a\u8fc7\u53c2\u6570\uff1a ",(0,i.jsx)(n.code,{children:"produce-throttle-time-avg"}),"\u3001",(0,i.jsx)(n.code,{children:"produce-throttle-time-max"}),"\u3001",(0,i.jsx)(n.code,{children:"fetch- throttle-time-avg"})," \u548c ",(0,i.jsx)(n.code,{children:"fetch-throttle-time-max"})," \u66b4\u9732\u7ed9\u5ba2\u6237\u7aef\uff0c\u8fd9\u51e0\u4e2a\u53c2\u6570\u662f\u751f\u4ea7\u8bf7\u6c42\u548c\u6d88\u8d39 \u8bf7\u6c42\u56e0\u8282\u6d41\u800c\u88ab\u5ef6\u8fdf\u7684\u5e73\u5747\u65f6\u95f4\u548c\u6700\u957f\u65f6\u95f4\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e9b\u65f6\u95f4\u5bf9\u5e94\u7684\u662f\u751f\u4ea7\u6d88\u606f\u548c\u6d88\u8d39\u6d88\u606f\u7684\u541e\u5410\u91cf\u914d\u989d\u3001\u8bf7\u6c42\u65f6\u95f4\u914d\u989d\uff0c\u6216\u4e24\u8005\u517c\u800c\u6709\u4e4b\u3002"]}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u8d39\u8005",children:"\u6d88\u8d39\u8005"}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u8005\u7fa4\u7ec4consumer-group",children:"\u6d88\u8d39\u8005\u7fa4\u7ec4\uff08Consumer Group\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u8005\u7ec4\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff0c\u7528\u4e8e\u5b9e\u73b0\u6d88\u606f\u7684\u5e76\u884c\u5904\u7406\u548c\u8d1f\u8f7d\u5747\u8861\u3002\u6d88\u8d39\u8005\u7ec4\u5141\u8bb8\u591a\u4e2a\u6d88\u8d39\u8005\u5b9e\u4f8b\u5171\u540c\u6d88\u8d39\u4e00\u4e2a\u6216\u591a\u4e2a\u4e3b\u9898\uff08topic\uff09\u4e2d\u7684\u6d88\u606f\uff0c\u540c\u65f6\u63d0\u4f9b\u4e86\u9ad8\u53ef\u7528\u6027\u548c\u5bb9\u9519\u673a\u5236\u3002Kafka\u4e2d\u7684\u6d88\u8d39\u8005\u4ece\u5c5e\u4e8e\u6d88\u8d39\u8005\u7fa4\u7ec4\uff0c\u4e00\u4e2a\u7fa4\u7ec4\u91cc\u7684\u6d88\u8d39\u8005\u8ba2\u9605\u7684\u662f\u540c\u4e00\u4e2a\u4e3b\u9898\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\u63a5\u6536\u4e3b\u9898\u4e00\u90e8\u5206\u5206\u533a\u7684\u6d88\u606f\u3002"}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-6.png",alt:"image",style:{maxWidth:"36%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u8005\u7ec4\u4e4b\u95f4\u4e92\u4e0d\u5f71\u54cd\u3002\u5982\u4e0a\u56fe\u7fa4\u7ec4 G2 \u53ef\u4ee5\u589e\u52a0\u66f4\u591a\u7684\u6d88\u8d39\u8005\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\u4f1a\u8bfb\u53d6\u82e5\u5e72\u4e2a\u5206\u533a\uff0c\u5c31\u50cf\u7fa4 \u7ec4 G1 \u91cc\u7684\u6d88\u8d39\u8005\u90a3\u6837\u3002\u4f5c\u4e3a\u6574\u4f53\u6765\u8bf4\uff0c\u7fa4\u7ec4 G2 \u8fd8\u662f\u4f1a\u6536\u5230\u6240\u6709\u6d88\u606f\uff0c\u4e0d\u7ba1\u6709\u6ca1\u6709\u5176\u4ed6\u7fa4\u7ec4\u5b58\u5728\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u8005consumer",children:"\u6d88\u8d39\u8005\uff08Consumer\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u8005\u8d1f\u8d23\u6d88\u8d39\u751f\u4ea7\u8005\u7684\u6d88\u606f\uff0c\u5e76\u4e14Kafka\u8d1f\u8d23\u6d88\u8d39\u8005\u548c\u5206\u533a\u4e4b\u95f4\u7684\u81ea\u52a8\u5e73\u8861\u3002"}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-7.png",alt:"image",style:{maxWidth:"32%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-8.png",alt:"image",style:{maxWidth:"32%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-9.png",alt:"image",style:{maxWidth:"32%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u5411\u7fa4\u7ec4\u91cc\u6dfb\u52a0\u66f4\u591a\u7684\u6d88\u8d39\u8005\uff0c\u4ee5\u81f4\u8d85\u8fc7\u4e86\u4e3b\u9898\u7684\u5206\u533a\u6570\u91cf\uff0c\u90a3\u4e48\u5c31\u4f1a\u6709\u4e00\u90e8\u5206\u6d88\u8d39\u8005\u5904\u4e8e\u7a7a\u95f2\u72b6\u6001\uff0c \u4e0d\u4f1a\u63a5\u6536\u5230\u4efb\u4f55\u6d88\u606f\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5411\u7fa4\u7ec4\u91cc\u6dfb\u52a0\u6d88\u8d39\u8005\u662f\u6a2a\u5411\u6269\u5c55\u6570\u636e\u5904\u7406\u80fd\u529b\u7684\u4e3b\u8981\u65b9\u5f0f\u3002Kafka \u6d88\u8d39\u8005\u7ecf\u5e38\u9700\u8981\u6267\u884c\u4e00\u4e9b\u9ad8\u5ef6\u8fdf\u7684\u64cd \u4f5c\uff0c\u6bd4\u5982\u628a\u6570\u636e\u5199\u5230\u6570\u636e\u5e93\u6216\u7528\u6570\u636e\u505a\u4e00\u4e9b\u6bd4\u8f83\u8017\u65f6\u7684\u8ba1\u7b97\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5355\u4e2a\u6d88\u8d39\u8005\u65e0\u6cd5\u8ddf\u4e0a\u6570\u636e\u751f \u6210\u7684\u901f\u5ea6\uff0c\u56e0\u6b64\u53ef\u4ee5\u589e\u52a0\u66f4\u591a\u7684\u6d88\u8d39\u8005\u6765\u5206\u62c5\u8d1f\u8f7d\uff0c\u8ba9\u6bcf\u4e2a\u6d88\u8d39\u8005\u53ea\u5904\u7406\u90e8\u5206\u5206\u533a\u7684\u6d88\u606f\uff0c\u8fd9\u662f\u6a2a\u5411\u6269\u5c55 \u6d88\u8d39\u8005\u7684\u4e3b\u8981\u65b9\u5f0f\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u4e3b\u9898\u521b\u5efa\u5927\u91cf\u7684\u5206\u533a\uff0c\u5f53\u8d1f\u8f7d\u6025\u5267\u589e\u957f\u65f6\uff0c\u53ef\u4ee5\u52a0\u5165\u66f4\u591a\u7684\u6d88\u8d39 \u8005\u3002\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u8981\u8ba9\u6d88\u8d39\u8005\u7684\u6570\u91cf\u8d85\u8fc7\u4e3b\u9898\u5206\u533a\u7684\u6570\u91cf\uff0c\u56e0\u4e3a\u591a\u4f59\u7684\u6d88\u8d39\u8005\u53ea\u4f1a\u88ab\u95f2\u7f6e\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4e0d\u540c\u4e8e\u4f20\u7edf\u7684\u6d88\u606f\u7cfb\u7edf\uff0c\u6a2a\u5411\u4f38\u7f29\u6d88\u8d39\u8005\u548c\u6d88\u8d39\u8005\u7fa4\u7ec4\u5e76\u4e0d\u4f1a\u5bfc\u81f4 Kafka \u6027\u80fd\u4e0b\u964d\u3002"})}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u8005\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.example.kafkademo;\n\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.clients.producer.ProducerRecord;\nimport org.apache.kafka.clients.producer.RecordMetadata;\nimport org.apache.kafka.common.errors.WakeupException;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.apache.kafka.common.serialization.StringSerializer;\n\nimport java.time.Duration;\nimport java.util.Collections;\nimport java.util.Properties;\nimport java.util.concurrent.Future;\n\n/**\n * @author liufei\n **/\npublic class KafkaExampleNoAuthConsume {\n\n    String bootstrapServers = "127.0.0.1:9092,127.0.0.1:9093,127.0.0.1:9094"; // Kafka broker \u5730\u5740\n\n    public void consumer() {\n        String groupId = "my-group"; // \u6d88\u8d39\u8005\u7ec4 ID\n        String topic = "liufei-test"; // \u76ee\u6807\u4e3b\u9898\n\n        // \u8bbe\u7f6e Kafka \u6d88\u8d39\u8005\u914d\u7f6e\n        Properties properties = new Properties();\n        properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n        properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, "earliest");\n\n        // \u521b\u5efa Kafka \u6d88\u8d39\u8005\n        KafkaConsumer<String, String> consumer = new KafkaConsumer<>(properties);\n\n        // \u8ba2\u9605\u4e3b\u9898\n        consumer.subscribe(Collections.singletonList(topic));\n\n        Thread consume = new Thread(() -> {\n            try {\n                // \u6d88\u8d39\u6d88\u606f\n                while (true) {\n                    /*\n                     * poll\u9700\u8981\u4f20\u5165\u8d85\u65f6\u65f6\u95f4\uff0c\u5e76\u4e14\n                     * \u8d85\u8fc7 max.poll.interval.ms \u6ca1\u6709\u8c03\u7528 poll()\uff0c\u5219\u6d88\u8d39\u8005\u5c06\u88ab\u8ba4\u4e3a\u5df2\u7ecf\u201c\u6b7b\u4ea1\u201d\uff0c\u5e76\u88ab\u9010\u51fa\u6d88\u8d39\u8005\u7fa4\u7ec4\u3002\n                     * \u56e0\u6b64\uff0c\u8981\u907f\u514d\u5728\u8f6e\u8be2\u5faa\u73af\u4e2d\u505a\u4efb\u4f55\u53ef\u80fd\u5bfc\u81f4\u4e0d\u53ef\u9884\u77e5\u7684\u963b\u585e\u7684\u64cd\u4f5c\u3002\n                     */\n                    consumer.poll(Duration.ofMillis(1000)).forEach(record -> {\n                        System.out.printf("Consumed record with key %s and value %s from topic %s partition %d offset %d%n",\n                                record.key(), record.value(), record.topic(), record.partition(), record.offset());\n                    });\n                }\n            } catch (WakeupException wakeupException) {\n                /*\n                 * // \u6ce8\u518c\u4e00\u4e2a\u94a9\u5b50\u51fd\u6570\uff0c\u5728jvm\u9000\u51fa\u65f6\uff0c\u4f18\u96c5\u9000\u51fa\uff0cconsumer.wakeup() \u662f\u6d88\u8d39\u8005\u552f\u4e00\u4e00\u4e2a\u53ef\u4ee5\u5728\u5176\u4ed6\u7ebf\u7a0b\u4e2d\u5b89\u5168\u8c03\u7528\u7684\u65b9\u6cd5\u3002\n                 * \u8c03\u7528 consumer.wakeup() \u4f1a\u5bfc\u81f4 poll() \u629b\u51fa WakeupException\uff0c\u5982\u679c\u8c03\u7528 consumer.wakeup() \u65f6 \u7ebf\u7a0b\u6ca1\u6709\u5728\u8f6e\u8be2\uff0c\n                 * \u90a3\u4e48\u5f02\u5e38\u5c06\u5728\u4e0b\u4e00\u6b21\u8c03\u7528 poll() \u65f6\u629b\u51fa\u3002\n                 * ```java\n                 * Runtime.getRuntime().addShutdownHook(new Thread() {\n                 *     public void run() {\n                 * System.out.println("Starting exit..."); consumer.wakeup(); \u278a\n                 * try {\n                 *             mainThread.join();\n                 *         } catch (InterruptedException e) {\n                 *             e.printStackTrace();\n                 *         }\n                 * } });\n                 * ```\n                 */\n            }finally {\n                // \u4f18\u96c5\u9000\u51fa\uff0c\u5fc5\u987b\u8c03\u7528consumer.close()\n                consumer.close();\n            }\n\n        });\n        consume.start();\n    }\n}\n\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u90e8\u5206\u4ee3\u7801\u89e3\u91ca\uff1a"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"consumer.subscribe(Collections.singletonList(topic));"})," \u8ba2\u9605\u4e3b\u9898\u53ef\u4ee5\u5199\u8868\u8fbe\u5f0f\uff0c\u4f46\u662f\u6ce8\u610f\u5982\u679c Kafka \u96c6\u7fa4\u5305\u542b\u4e86\u5927\u91cf\u5206\u533a(\u6bd4\u5982 30 000 \u4e2a\u6216\u66f4\u591a)\uff0c\u5219\u9700\u6ce8\u610f\uff0c\u4e3b\u9898\u7684\u8fc7\u6ee4\u662f \u5728\u5ba2\u6237\u7aef\u5b8c\u6210\u7684\u3002\u5f53\u4f60\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u800c\u4e0d\u662f\u6307\u5b9a\u5217\u8868\u8ba2\u9605\u4e3b\u9898\u65f6\uff0c\u6d88\u8d39\u8005\u5c06\u5b9a\u671f\u5411 broker \u8bf7\u6c42\u6240\u6709 \u5df2\u8ba2\u9605\u7684\u4e3b\u9898\u53ca\u5206\u533a\u3002\u7136\u540e\uff0c\u5ba2\u6237\u7aef\u4f1a\u7528\u8fd9\u4e2a\u5217\u8868\u6765\u68c0\u67e5\u662f\u5426\u6709\u65b0\u589e\u7684\u4e3b\u9898\uff0c\u5982\u679c\u6709\uff0c\u5c31\u8ba2\u9605\u5b83\u4eec\u3002 \u5982\u679c\u4e3b\u9898\u5f88\u591a\uff0c\u6d88\u8d39\u8005\u4e5f\u5f88\u591a\uff0c\u90a3\u4e48\u901a\u8fc7\u6b63\u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u4e3b\u9898\u5c31\u4f1a\u7ed9 broker\u3001\u5ba2\u6237\u7aef\u548c\u7f51\u7edc\u5e26\u6765\u5f88\u5927 \u7684\u5f00\u9500\u3002\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4e3b\u9898\u5143\u6570\u636e\u4f7f\u7528\u7684\u5e26\u5bbd\u4f1a\u8d85\u8fc7\u7528\u4e8e\u53d1\u9001\u6570\u636e\u7684\u5e26\u5bbd\u3002\u53e6\u5916\uff0c\u4e3a\u4e86\u80fd\u591f\u4f7f\u7528\u6b63 \u5219\u8868\u8fbe\u5f0f\u8ba2\u9605\u4e3b\u9898\uff0c\u9700\u8981\u6388\u4e88\u5ba2\u6237\u7aef\u83b7\u53d6\u96c6\u7fa4\u5168\u90e8\u4e3b\u9898\u5143\u6570\u636e\u7684\u6743\u9650\uff0c\u5373\u5168\u9762\u63cf\u8ff0\u6574\u4e2a\u96c6\u7fa4\u7684\u6743\u9650\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5e76\u4e14\u5728\u7b2c\u4e00\u6b21\u8c03\u7528\u6d88\u8d39\u8005\u7684 poll() \u65b9\u6cd5\u65f6\uff0c\u5b83\u9700\u8981\u627e\u5230 GroupCoordinator\uff0c\u52a0\u5165\u7fa4\u7ec4\uff0c\u5e76\u63a5\u6536\u5206\u914d\u7ed9\u5b83\u7684\u5206\u533a\u3002\u5982\u679c\u89e6\u53d1\u4e86\u518d\u5747\u8861\uff0c\u5219\u6574\u4e2a\u518d\u5747\u8861\u8fc7\u7a0b\u4e5f\u4f1a \u5728\u8f6e\u8be2\u91cc\u8fdb\u884c\uff0c\u5305\u62ec\u6267\u884c\u76f8\u5173\u7684\u56de\u8c03\u3002\u6240\u4ee5\uff0c\u6d88\u8d39\u8005\u6216\u56de\u8c03\u91cc\u53ef\u80fd\u51fa\u73b0\u7684\u9519\u8bef\u6700\u540e\u90fd\u4f1a\u8f6c\u5316\u6210 poll() \u65b9 \u6cd5\u629b\u51fa\u7684\u5f02\u5e38\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"\u7248\u672c\u53d1\u5e03\u65f6\u5904\u7406\u5206\u533a\u5e73\u8861",children:"\u7248\u672c\u53d1\u5e03\u65f6\u5904\u7406\u5206\u533a\u5e73\u8861"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u65b0\u7684\u6d88\u8d39\u8005\u52a0\u5165\u6216\u8005\u9000\u51fa(\u6d88\u8d39\u8005\u9000\u51fa\u4e0d\u4f1a\u7acb\u523b\u88ab\u6458\u9664\uff0c\u800c\u662f\u7b49\u8d85\u65f6\u672apoll\u624d\u4f1a\u88ab\u9010\u51fa\u6d88\u8d39\u8005\u7fa4\u7ec4)\u65f6\uff0c\u6b64\u65f6\u4f1a\u89e6\u53d1\u6d88\u8d39\u8005\u5206\u533a\u5e73\u8861\uff0c\u800c\u5982\u679c\u6d88\u8d39\u662f\u6309key\u5206\u914d\u5230\u5206\u533a\u5e76\u4e14\u6309\u987a\u5e8f\u6d88\u8d39\uff0c\u6b64\u65f6\u5c31\u6709\u53ef\u80fd\u968f\u7740\u5206\u533a\u5e73\u8861\u800c\u5bfc\u81f4\u6d88\u8d39\u987a\u5e8f\u4e0d\u4e00\u81f4\uff0c\u672c\u6765\u662f\u4e00\u4e2a\u6d88\u8d39\u8005\u6309\u987a\u5e8f\u6d88\u8d39\u53d8\u6210\u4e86\u591a\u4e2a\u6d88\u8d39\u8005\u6d88\u8d39\uff0c\u6b64\u65f6\u6d88\u606f\u8c01\u5148\u88ab\u6267\u884c\u8c01\u540e\u88ab\u6267\u884c\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u3002\u800c\u5728\u7248\u672c\u53d1\u5e03\u65f6\uff0c\u5fc5\u7136\u4f1a\u6d89\u53ca\u5230\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u65b9\u5f0f\uff0c\u5148\u6ce8\u518c\u6d88\u8d39\u8005\u5b8c\u996d\u5206\u533a\u5206\u914d\uff0c\u7136\u540e\u6682\u505c\uff0c\u7b49\u5f85\u6d88\u8d39\u8005\u5168\u90e8\u5c31\u7eea\u540e\u518d\u6d88\u8d39\uff0c\u6765\u907f\u514d\u5f00\u59cb\u7684\u4e00\u6bb5\u5f88\u77ed\u6682\u7684\u65f6\u95f4\u5185\u5206\u533a\u5e73\u8861\u7684\u6d88\u606f\u987a\u5e8f\u4e0d\u4e00\u81f4\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.apache.kafka.clients.consumer.*;\nimport org.apache.kafka.common.TopicPartition;\n\nimport redis.clients.jedis.Jedis;\n\nimport java.time.Duration;\nimport java.util.*;\n\n/**\n * @author liufei\n **/\npublic class KafkaConsumerExample {\n\n    public static void main(String[] args) {\n        String topic = "liufei-test";\n        String bootstrapServers = "localhost:9092";\n        String groupId = "my-group";\n\n        Properties props = new Properties();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, "org.apache.kafka.common.serialization.StringDeserializer");\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, "org.apache.kafka.common.serialization.StringDeserializer");\n\n        KafkaConsumer<String, String> consumer = new KafkaConsumer<>(props);\n\n        Jedis jedis = new Jedis("localhost");\n        int expectedConsumers = 3; // \u9884\u671f\u7684\u6d88\u8d39\u8005\u6570\u91cf\n\n        consumer.subscribe(Collections.singletonList(topic), new ConsumerRebalanceListener() {\n            @Override\n            public void onPartitionsRevoked(Collection<TopicPartition> partitions) {\n                // Handle partition revocation if necessary\n            }\n\n            @Override\n            public void onPartitionsAssigned(Collection<TopicPartition> partitions) {\n                // \u6682\u505c\u6240\u6709\u5df2\u5206\u914d\u7684\u5206\u533a\n                consumer.pause(partitions);\n            }\n        });\n\n        // \u6bcf\u4e2a\u6d88\u8d39\u8005\u542f\u52a8\u65f6\u9012\u589e\u8ba1\u6570\u5668\n        jedis.incr("consumer_count");\n\n        // \u7b49\u5f85\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5df2\u6ce8\u518c\n        while (true) {\n            String count = jedis.get("consumer_count");\n            if (Integer.parseInt(count) == expectedConsumers) {\n                break;\n            }\n            try {\n                Thread.sleep(1000); // \u7b49\u5f85\u4e00\u79d2\u540e\u518d\u68c0\u67e5\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n\n        // \u6062\u590d\u6d88\u8d39\n        Set<TopicPartition> pausedPartitions = consumer.paused();\n        consumer.resume(pausedPartitions);\n\n        // \u5f00\u59cb\u6b63\u5e38\u7684\u6d88\u8d39\u5faa\u73af\n        while (true) {\n            ConsumerRecords<String, String> records = consumer.poll(Duration.ofMillis(1000));\n            for (ConsumerRecord<String, String> record : records) {\n                // \u5904\u7406\u6d88\u606f\n                System.out.printf("Consumed record with key %s and value %s%n", record.key(), record.value());\n            }\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u8005\u53c2\u6570",children:"\u6d88\u8d39\u8005\u53c2\u6570"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"fetch.min.bytes"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6d88\u8d39\u8005\u4ece\u670d\u52a1\u5668\u83b7\u53d6\u8bb0\u5f55\u7684\u6700\u5c0f\u5b57\u8282\u6570\uff0c\u9ed8\u8ba4\u662f 1 \u5b57\u8282\u3002broker \u5728\u6536\u5230\u6d88\u8d39\u8005\u7684\u83b7\u53d6\u6570\u636e \u8bf7\u6c42\u65f6\uff0c\u5982\u679c\u53ef\u7528\u6570\u636e\u91cf\u5c0f\u4e8e fetch.min.bytes \u6307\u5b9a\u7684\u5927\u5c0f\uff0c\u90a3\u4e48\u5b83\u5c31\u4f1a\u7b49\u5230\u6709\u8db3\u591f\u53ef\u7528\u6570\u636e\u65f6\u624d\u5c06 \u6570\u636e\u8fd4\u56de\u3002\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u6d88\u8d39\u8005\u548c broker \u7684\u8d1f\u8f7d\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u4e3b\u9898\u6d41\u91cf\u4e0d\u662f\u5f88\u5927\u7684\u65f6\u5019(\u6216\u8005\u4e00\u5929\u91cc\u7684\u4f4e \u6d41\u91cf\u65f6\u6bb5)\u4e0d\u9700\u8981\u6765\u6765\u56de\u56de\u5730\u4f20\u8f93\u6d88\u606f\u3002\u5982\u679c\u6d88\u8d39\u8005\u5728\u6ca1\u6709\u592a\u591a\u53ef\u7528\u6570\u636e\u65f6 CPU \u4f7f\u7528\u7387\u5f88\u9ad8\uff0c\u6216\u8005\u5728\u6709 \u5f88\u591a\u6d88\u8d39\u8005\u65f6\u4e3a\u4e86\u964d\u4f4e broker \u7684\u8d1f\u8f7d\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u8bbe\u7f6e\u5f97\u6bd4\u9ed8\u8ba4\u503c\u5927\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,i.jsx)(n.em,{children:"\u5728\u4f4e\u541e\u5410\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u52a0\u5927\u8fd9\u4e2a\u503c\u4f1a\u589e\u52a0\u5ef6\u8fdf\u3002"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"fetch.max.wait.ms"})}),"\n",(0,i.jsx)(n.p,{children:"fetch.min.bytes\u53ef\u4ee5\u8ba9 Kafka \u7b49\u5230\u6709\u8db3\u591f\u591a\u7684\u6570\u636e\u65f6\u624d\u5c06\u5b83\u4eec\u8fd4\u56de\u7ed9\u6d88\u8d39\u8005\uff0c feth.max.wait.ms \u5219\u7528\u4e8e\u6307\u5b9a broker \u7b49\u5f85\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u662f 500 \u6beb\u79d2\u3002\u5982\u679c\u6ca1\u6709\u8db3\u591f\u591a\u7684\u6570\u636e\u6d41\u5165 Kafka\uff0c\u90a3\u4e48\u6d88\u8d39\u8005\u83b7\u53d6\u6570\u636e\u7684\u8bf7\u6c42\u5c31\u5f97\u4e0d\u5230\u6ee1\u8db3\uff0c\u6700\u591a\u4f1a\u5bfc\u81f4 500 \u6beb\u79d2\u7684\u5ef6\u8fdf\u3002\u5982\u679c\u8981\u964d\u4f4e\u6f5c\u5728\u7684\u5ef6\u8fdf (\u4e3a\u4e86\u6ee1\u8db3 SLA)\uff0c\u90a3\u4e48\u53ef\u4ee5\u628a\u8fd9\u4e2a\u5c5e\u6027\u7684\u503c\u8bbe\u7f6e\u5f97\u5c0f\u4e00\u4e9b\u3002\u5982\u679c fetch.max.wait.ms \u88ab\u8bbe\u7f6e\u4e3a 100 \u6beb\u79d2\uff0cfetch.min.bytes \u88ab\u8bbe\u7f6e\u4e3a 1 MB\uff0c\u90a3\u4e48 Kafka \u5728\u6536\u5230\u6d88\u8d39\u8005\u7684\u8bf7\u6c42\u540e\uff0c\u5982\u679c\u6709 1 MB \u6570\u636e\uff0c\u5c31 \u5c06\u5176\u8fd4\u56de\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u5728 100 \u6beb\u79d2\u540e\u8fd4\u56de\uff0c\u5c31\u770b\u54ea\u4e2a\u6761\u4ef6\u5148\u5f97\u5230\u6ee1\u8db3\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"fetch.max.bytes"})}),"\n",(0,i.jsxs)(n.p,{children:["Kafka \u8fd4\u56de\u7684\u6570\u636e\u7684\u6700\u5927\u5b57\u8282\u6570(\u9ed8\u8ba4\u4e3a 50 MB)\u3002\u6d88\u8d39\u8005\u4f1a\u5c06\u670d\u52a1\u5668\u8fd4\u56de\u7684\u6570\u636e\u653e\u5728\u5185\u5b58\u4e2d\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5c5e\u6027\u88ab\u7528\u4e8e\u9650\u5236\u6d88\u8d39\u8005\u7528\u6765\u5b58\u653e\u6570\u636e\u7684\u5185\u5b58\u5927\u5c0f\u3002",(0,i.jsx)(n.em,{children:"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8bb0\u5f55\u662f\u5206\u6279\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\uff0c\u5982\u679c broker \u8981\u53d1\u9001\u7684\u6279\u6b21\u8d85\u8fc7\u4e86\u8fd9\u4e2a\u5c5e\u6027\u6307\u5b9a\u7684\u5927\u5c0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u9650\u5236\u5c06\u88ab\u5ffd\u7565\u3002"})," \u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u6d88\u8d39 \u8005\u80fd\u591f\u7ee7\u7eed\u5904\u7406\u6d88\u606f\u3002broker \u7aef\u7684\u8fd9\u4e2a\u914d\u7f6e\u5c5e\u6027\u53ef\u80fd\u5f88\u6709\u7528\uff0c\u56e0\u4e3a\u8bf7\u6c42\u7684\u6570\u636e\u91cf\u8d8a\u5927\uff0c\u9700\u8981\u4ece\u78c1\u76d8\u8bfb\u53d6\u7684\u6570 \u636e\u91cf\u5c31\u8d8a\u5927\uff0c\u901a\u8fc7\u7f51\u7edc\u53d1\u9001\u6570\u636e\u7684\u65f6\u95f4\u5c31\u8d8a\u957f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8d44\u6e90\u4e89\u7528\u5e76\u589e\u52a0 broker \u7684\u8d1f\u8f7d\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"**max.poll.records"}),"\n",(0,i.jsx)(n.p,{children:"** \u8fd9\u4e2a\u5c5e\u6027\u7528\u4e8e\u63a7\u5236\u5355\u6b21\u8c03\u7528 poll() \u65b9\u6cd5\u8fd4\u56de\u7684\u8bb0\u5f55\u6761\u6570\u3002\u53ef\u4ee5\u7528\u5b83\u6765\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\u5728\u8fdb\u884c\u6bcf\u4e00\u6b21\u8f6e\u8be2\u5faa\u65f6\u9700\u8981\u5904\u7406\u7684\u8bb0\u5f55\u6761\u6570(\u4e0d\u662f\u8bb0\u5f55\u7684\u5927\u5c0f)"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Kafka \u6d88\u8d39\u8005\u6bcf\u6b21\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"poll()"})," \u65b9\u6cd5\u8fd4\u56de\u7684\u662f\u4e00\u4e2a ",(0,i.jsx)(n.code,{children:"ConsumerRecords<K, V>"})," \u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u662f\u4e00\u4e2a\u8bb0\u5f55\u96c6\uff0c\u5305\u542b\u4e86\u4ece Kafka broker \u62c9\u53d6\u7684\u591a\u4e2a\u8bb0\u5f55\u3002\u5b9e\u73b0\u4e86 ",(0,i.jsx)(n.code,{children:"Iterable<ConsumerRecord<K, V>>"})," \u8fed\u4ee3\u5668\u63a5\u53e3\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"max.partition.fetch.bytes"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e2a\u5c5e\u6027\u6307\u5b9a\u4e86\u670d\u52a1\u5668\u4ece\u6bcf\u4e2a\u5206\u533a\u91cc\u8fd4\u56de\u7ed9\u6d88\u8d39\u8005\u7684\u6700\u5927\u5b57\u8282\u6570(\u9ed8\u8ba4\u503c\u662f 1 MB)\u3002\u5f53 KafkaConsumer.poll() \u65b9\u6cd5\u8fd4\u56de ConsumerRecords \u65f6\uff0c\u4ece\u6bcf\u4e2a\u5206\u533a\u91cc\u8fd4\u56de\u7684\u8bb0\u5f55\u6700\u591a\u4e0d\u8d85\u8fc7 max.partition.fetch.bytes \u6307\u5b9a\u7684\u5b57\u8282\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u6765\u63a7\u5236\u6d88\u8d39\u8005\u7684\u5185\u5b58\u4f7f\u7528 \u91cf\u4f1a\u8ba9\u4e8b\u60c5\u53d8\u5f97\u590d\u6742\uff0c\u56e0\u4e3a\u4f60\u65e0\u6cd5\u63a7\u5236 broker \u8fd4\u56de\u7684\u54cd\u5e94\u91cc\u5305\u542b\u591a\u5c11\u4e2a\u5206\u533a\u7684\u6570\u636e\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u60c5 \u51b5\uff0c\u5efa\u8bae\u7528 fetch.max.bytes \u66ff\u4ee3\uff0c\u9664\u975e\u6709\u7279\u6b8a\u7684\u9700\u6c42\uff0c\u6bd4\u5982\u8981\u6c42\u4ece\u6bcf\u4e2a\u5206\u533a\u8bfb\u53d6\u5dee\u4e0d\u591a\u7684\u6570\u636e\u91cf\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"session.timeout.ms \u548c heartbeat.interval.ms"})}),"\n",(0,i.jsxs)(n.p,{children:["session.timeout.ms \u6307\u5b9a\u4e86\u6d88\u8d39\u8005\u53ef\u4ee5\u5728\u591a\u957f\u65f6\u95f4\u5185\u4e0d\u4e0e\u670d\u52a1\u5668\u53d1\u751f\u4ea4\u4e92\u800c\u4ecd\u7136\u88ab\u8ba4\u4e3a\u8fd8\u201c\u6d3b\u7740\u201d\uff0c\u9ed8 \u8ba4\u662f 10 \u79d2\u3002\u5982\u679c\u6d88\u8d39\u8005\u6ca1\u6709\u5728 session.timeout.ms \u6307\u5b9a\u7684\u65f6\u95f4\u5185\u53d1\u9001\u5fc3\u8df3\u7ed9\u7fa4\u7ec4\u534f\u8c03\u5668\uff0c\u5219\u4f1a\u88ab\u8ba4 \u4e3a\u5df2\u201c\u6b7b\u4ea1\u201d\uff0c\u534f\u8c03\u5668\u5c31\u4f1a\u89e6\u53d1\u518d\u5747\u8861\uff0c\u628a\u5206\u533a\u5206\u914d\u7ed9\u7fa4\u7ec4\u91cc\u7684\u5176\u4ed6\u6d88\u8d39\u8005\u3002session.timeout.ms \u4e0e heartbeat.interval.ms \u7d27\u5bc6\u76f8\u5173\u3002heartbeat.interval.ms \u6307\u5b9a\u4e86\u6d88\u8d39\u8005\u5411\u534f\u8c03\u5668\u53d1\u9001\u5fc3\u8df3\u7684\u9891\u7387\uff0csession.timeout.ms \u6307\u5b9a\u4e86\u6d88\u8d39\u8005\u53ef\u4ee5\u591a\u4e45\u4e0d\u53d1\u9001\u5fc3\u8df3\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e00\u822c\u4f1a\u540c\u65f6\u8bbe\u7f6e\u8fd9\u4e24\u4e2a\u5c5e \u6027\uff0c",(0,i.jsx)(n.em,{children:"heartbeat.interval.ms \u5fc5\u987b\u6bd4 session.timeout.ms \u5c0f\uff0c\u901a\u5e38\u524d\u8005\u662f\u540e\u8005\u7684 1/3"}),"\u3002\u5982\u679c session.timeout.ms \u662f 3 \u79d2\uff0c\u90a3\u4e48 heartbeat.interval.ms \u5c31\u5e94\u8be5\u662f 1 \u79d2\u3002\u628a session.timeout.ms \u8bbe\u7f6e\u5f97\u6bd4\u9ed8\u8ba4\u503c\u5c0f\uff0c\u53ef\u4ee5\u66f4\u5feb\u5730\u68c0\u6d4b\u5230\u5d29\u6e83\uff0c\u5e76\u4ece\u5d29\u6e83\u4e2d\u6062\u590d\uff0c\u4f46\u4e5f\u4f1a\u5bfc\u81f4\u4e0d\u5fc5\u8981\u7684\u518d\u5747\u8861\u3002\u628a session.timeout.ms \u8bbe\u7f6e\u5f97\u6bd4\u9ed8\u8ba4\u503c\u5927\uff0c\u53ef\u4ee5\u51cf\u5c11\u610f\u5916\u7684\u518d\u5747\u8861\uff0c\u4f46\u9700\u8981\u66f4\u957f\u7684\u65f6\u95f4\u624d\u80fd\u68c0\u6d4b\u5230\u5d29\u6e83\u3002"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"max.poll.interval.ms"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6307\u5b9a\u4e86\u6d88\u8d39\u8005\u5728\u88ab\u8ba4\u4e3a\u5df2\u7ecf\u201c\u6b7b\u4ea1\u201d\u4e4b\u524d\u53ef\u4ee5\u5728\u591a\u957f\u65f6\u95f4\u5185\u4e0d\u53d1\u8d77\u8f6e\u8be2\u3002\u524d\u9762\u63d0\u5230\u8fc7\uff0c\u5fc3\u8df3\u548c\u4f1a\u8bdd \u8d85\u65f6\u662f Kafka \u68c0\u6d4b\u5df2\u201c\u6b7b\u4ea1\u201d\u7684\u6d88\u8d39\u8005\u5e76\u64a4\u9500\u5176\u5206\u533a\u7684\u4e3b\u8981\u673a\u5236\u3002\u6211\u4eec\u4e5f\u63d0\u5230\u4e86\u5fc3\u8df3\u662f\u901a\u8fc7\u540e\u53f0\u7ebf\u7a0b\u53d1\u9001 \u7684\uff0c\u800c\u540e\u53f0\u7ebf\u7a0b\u6709\u53ef\u80fd\u5728\u6d88\u8d39\u8005\u4e3b\u7ebf\u7a0b\u53d1\u751f\u6b7b\u9501\u7684\u60c5\u51b5\u4e0b\u7ee7\u7eed\u53d1\u9001\u5fc3\u8df3\uff0c\u4f46\u8fd9\u4e2a\u6d88\u8d39\u8005\u5e76\u6ca1\u6709\u5728\u8bfb\u53d6\u5206\u533a \u91cc\u7684\u6570\u636e\u3002\u8981\u60f3\u77e5\u9053\u6d88\u8d39\u8005\u662f\u5426\u8fd8\u5728\u5904\u7406\u6d88\u606f\uff0c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u68c0\u67e5\u5b83\u662f\u5426\u8fd8\u5728\u8bf7\u6c42\u6570\u636e\u3002\u4f46\u662f\uff0c\u8bf7\u6c42\u4e4b\u95f4\u7684\u65f6\u95f4\u95f4\u9694\u662f\u5f88\u96be\u9884\u6d4b\u7684\uff0c\u5b83\u4e0d\u4ec5\u53d6\u51b3\u4e8e\u53ef\u7528\u7684\u6570\u636e\u91cf\u3001\u6d88\u8d39\u8005\u5904\u7406\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u6709\u65f6\u8fd8\u53d6\u51b3\u4e8e\u5176\u4ed6\u670d\u52a1\u7684\u5ef6\u8fdf\u3002\u5728\u9700\u8981\u8017\u8d39\u65f6\u95f4\u6765\u5904\u7406\u6bcf\u4e2a\u8bb0\u5f55\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7 max.poll.records \u6765\u9650\u5236\u8fd4\u56de\u7684\u6570\u636e\u91cf\uff0c\u4ece\u800c\u9650\u5236\u5e94\u7528\u7a0b\u5e8f\u5728\u518d\u6b21\u8c03\u7528 poll() \u4e4b\u524d\u7684\u7b49\u5f85\u65f6\u957f\u3002\u4f46\u662f\uff0c\u5373\u4f7f\u8bbe\u7f6e\u4e86 max.poll.records\uff0c\u8c03\u7528 poll() \u7684\u65f6\u95f4\u95f4\u9694\u4ecd\u7136\u5f88\u96be\u9884\u6d4b\u3002\u4e8e\u662f\uff0c\u8bbe\u7f6e max.poll.interval.ms \u5c31\u6210\u4e86\u4e00\u79cd\u4fdd\u9669\u63aa\u65bd\u3002",(0,i.jsx)(n.em,{children:"\u5b83\u5fc5\u987b\u88ab\u8bbe\u7f6e\u5f97\u8db3\u591f\u5927\uff0c\u8ba9\u6b63\u5e38\u7684\u6d88\u8d39\u8005\u5c3d\u91cf\u4e0d\u89e6\u53ca\u8fd9\u4e2a\u9608\u503c\uff0c\u4f46\u53c8\u8981\u8db3\u591f\u5c0f\uff0c\u907f \u514d\u6709\u95ee\u9898\u7684\u6d88\u8d39\u8005\u7ed9\u5e94\u7528\u7a0b\u5e8f\u9020\u6210\u4e25\u91cd\u5f71\u54cd\u3002\u8fd9\u4e2a\u5c5e\u6027\u7684\u9ed8\u8ba4\u503c\u4e3a 5 \u5206\u949f\u3002\u5f53\u8fd9\u4e2a\u9608\u503c\u88ab\u89e6\u53ca\u65f6\uff0c\u540e\u53f0\u7ebf \u7a0b\u5c06\u5411 broker \u53d1\u9001\u4e00\u4e2a\u201c\u79bb\u5f00\u7fa4\u7ec4\u201d\u7684\u8bf7\u6c42\uff0c\u8ba9 broker \u77e5\u9053\u8fd9\u4e2a\u6d88\u8d39\u8005\u5df2\u7ecf\u201c\u6b7b\u4ea1\u201d\uff0c\u5fc5\u987b\u8fdb\u884c\u7fa4\u7ec4\u518d\u5747\u8861\uff0c\u7136\u540e\u505c\u6b62\u53d1\u9001\u5fc3\u8df3\u3002"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"default.api.timeout.ms"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u5728\u8c03\u7528\u6d88\u8d39\u8005 API \u65f6\u6ca1\u6709\u663e\u5f0f\u5730\u6307\u5b9a\u8d85\u65f6\u65f6\u95f4\uff0c\u90a3\u4e48\u6d88\u8d39\u8005\u5c31\u4f1a\u5728\u8c03\u7528\u5176\u4ed6 API \u65f6\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u6307 \u5b9a\u7684\u503c\u3002\u9ed8\u8ba4\u503c\u662f 1 \u5206\u949f\uff0c\u56e0\u4e3a\u5b83\u6bd4\u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\u7684\u9ed8\u8ba4\u503c\u5927\uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u91cd\u8bd5\u65f6\u95f4\u5305\u542b\u5728\u5185\u3002poll() \u65b9\u6cd5\u662f\u4e00\u4e2a\u4f8b\u5916\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u663e\u5f0f\u5730\u6307\u5b9a\u8d85\u65f6\u65f6\u95f4\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"request.timeout.ms"})}),"\n",(0,i.jsx)(n.p,{children:"\u6307\u5b9a\u6d88\u8d39\u8005\u5728\u6536\u5230 broker \u54cd\u5e94\u4e4b\u524d\u53ef\u4ee5\u7b49\u5f85\u7684\u6700\u957f\u65f6\u95f4\u3002\u5982\u679c broker \u5728\u6307\u5b9a\u65f6\u95f4\u5185\u6ca1\u6709\u505a\u51fa \u54cd\u5e94\uff0c\u90a3\u4e48\u5ba2\u6237\u7aef\u5c31\u4f1a\u5173\u95ed\u8fde\u63a5\u5e76\u5c1d\u8bd5\u91cd\u8fde\u3002\u5b83\u7684\u9ed8\u8ba4\u503c\u662f 30 \u79d2\u3002\u4e0d\u5efa\u8bae\u628a\u5b83\u8bbe\u7f6e\u5f97\u6bd4\u9ed8\u8ba4\u503c\u5c0f\u3002\u5728\u653e \u5f03\u8bf7\u6c42\u4e4b\u524d\u8981\u7ed9 broker \u7559\u6709\u8db3\u591f\u957f\u7684\u65f6\u95f4\u6765\u5904\u7406\u5176\u4ed6\u8bf7\u6c42\uff0c\u56e0\u4e3a\u5411\u5df2\u7ecf\u8fc7\u8f7d\u7684 broker \u53d1\u9001\u8bf7\u6c42\u51e0\u4e4e\u6ca1\u6709 \u4ec0\u4e48\u597d\u5904\uff0c\u51b5\u4e14\u65ad\u5f00\u5e76\u91cd\u8fde\u53ea\u4f1a\u9020\u6210\u66f4\u5927\u7684\u5f00\u9500\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"auto.offset.reset"})}),"\n",(0,i.jsx)(n.p,{children:"\u6307\u5b9a\u6d88\u8d39\u8005\u5728\u8bfb\u53d6\u4e00\u4e2a\u6ca1\u6709\u504f\u79fb\u91cf\u6216\u504f\u79fb\u91cf\u65e0\u6548(\u56e0\u6d88\u8d39\u8005\u957f\u65f6\u95f4\u4e0d\u5728\u7ebf\uff0c\u504f\u79fb\u91cf\u5bf9\u5e94\u7684\u8bb0\u5f55\u5df2\u7ecf\u8fc7\u671f\u5e76\u88ab\u5220\u9664)\u7684\u5206\u533a\u65f6\u8be5\u505a\u4f55\u5904\u7406\u3002\u5b83\u7684\u9ed8\u8ba4\u503c\u662f latest\uff0c\u610f\u601d\u662f\u8bf4\uff0c\u5982\u679c\u6ca1\u6709\u6709\u6548\u7684\u504f\u79fb\u91cf\uff0c \u90a3\u4e48\u6d88\u8d39\u8005\u5c06\u4ece\u6700\u65b0\u7684\u8bb0\u5f55(\u5728\u6d88\u8d39\u8005\u542f\u52a8\u4e4b\u540e\u5199\u5165 Kafka \u7684\u8bb0\u5f55)\u5f00\u59cb\u8bfb\u53d6\u3002\u53e6\u4e00\u4e2a\u503c\u662f earliest\uff0c \u610f\u601d\u662f\u8bf4\uff0c\u5982\u679c\u6ca1\u6709\u6709\u6548\u7684\u504f\u79fb\u91cf\uff0c\u90a3\u4e48\u6d88\u8d39\u8005\u5c06\u4ece\u8d77\u59cb\u4f4d\u7f6e\u5f00\u59cb\u8bfb\u53d6\u8bb0\u5f55\u3002\u5982\u679c\u5c06 auto.offset.reset \u8bbe\u7f6e\u4e3a none\uff0c\u5e76\u8bd5\u56fe\u7528\u4e00\u4e2a\u65e0\u6548\u7684\u504f\u79fb\u91cf\u6765\u8bfb\u53d6\u8bb0\u5f55\uff0c\u5219\u6d88\u8d39\u8005\u5c06\u629b\u51fa\u5f02\u5e38\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"enable.auto.commit"})}),"\n",(0,i.jsx)(n.p,{children:"\u6307\u5b9a\u6d88\u8d39\u8005\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u504f\u79fb\u91cf\uff0c\u9ed8\u8ba4\u503c\u662f true\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u8bbe\u7f6e\u4e3a false\uff0c\u9009\u62e9\u81ea\u5df1\u63a7\u5236 \u4f55\u65f6\u63d0\u4ea4\u504f\u79fb\u91cf\uff0c\u4ee5\u5c3d\u91cf\u907f\u514d\u51fa\u73b0\u6570\u636e\u91cd\u590d\u548c\u4e22\u5931\u3002\u5982\u679c\u5b83\u88ab\u8bbe\u7f6e\u4e3a true\uff0c\u90a3\u4e48\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u5c5e\u6027 auto.commit.interval.ms \u53ef\u4ee5\u7528\u6765\u63a7\u5236\u504f\u79fb\u91cf\u7684\u63d0\u4ea4\u9891\u7387\u3002\u672c\u7ae0\u540e\u7eed\u90e8\u5206\u5c06\u6df1\u5165\u4ecb\u7ecd\u4e0e\u63d0\u4ea4\u504f\u79fb\u91cf \u76f8\u5173\u7684\u5176\u4ed6\u5185\u5bb9\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"receive.buffer.bytes send.buffer.bytes"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u4e24\u4e2a\u5c5e\u6027\u5206\u522b\u6307\u5b9a\u4e86 socket \u5728\u8bfb\u5199\u6570\u636e\u65f6\u7528\u5230\u7684 TCP \u7f13\u51b2\u533a\u5927\u5c0f\u3002\u5982\u679c\u5b83\u4eec\u88ab\u8bbe\u7f6e\u4e3a\u20131\uff0c\u5c31\u4f7f\u7528\u64cd\u4f5c\u7cfb\u7edf\u7684\u9ed8\u8ba4\u503c\u3002\u5982\u679c\u751f\u4ea7\u8005\u6216\u6d88\u8d39\u8005\u4e0e broker \u4f4d\u4e8e\u4e0d\u540c\u7684\u6570\u636e\u4e2d\u5fc3\uff0c\u5219\u53ef\u4ee5\u9002\u5f53\u52a0\u5927\u5b83\u4eec\u7684\u503c\uff0c\u56e0\u4e3a\u8de8\u6570\u636e\u4e2d\u5fc3\u7f51\u7edc\u7684\u5ef6\u8fdf\u4e00\u822c\u90fd\u6bd4\u8f83\u9ad8\uff0c\u800c\u5e26\u5bbd\u53c8\u6bd4\u8f83\u4f4e\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"offsets.retention.minutes"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u662f broker \u7aef\u7684\u4e00\u4e2a\u914d\u7f6e\u5c5e\u6027\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b83\u4e5f\u4f1a\u5f71\u54cd\u6d88\u8d39\u8005\u7684\u884c\u4e3a\u3002\u53ea\u8981\u6d88\u8d39\u8005\u7fa4\u7ec4\u91cc\u6709\u6d3b\u8dc3\u7684\u6210 \u5458(\u4e5f\u5c31\u662f\u8bf4\uff0c\u6709\u6210\u5458\u901a\u8fc7\u53d1\u9001\u5fc3\u8df3\u6765\u4fdd\u6301\u5176\u8eab\u4efd)\uff0c\u7fa4\u7ec4\u63d0\u4ea4\u7684\u6bcf\u4e00\u4e2a\u5206\u533a\u7684\u6700\u540e\u4e00\u4e2a\u504f\u79fb\u91cf\u5c31\u4f1a\u88ab Kafka \u4fdd\u7559\u4e0b\u6765\uff0c\u5728\u8fdb\u884c\u91cd\u5206\u914d\u6216\u91cd\u542f\u4e4b\u540e\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u8fd9\u4e9b\u504f\u79fb\u91cf\u3002\u4f46\u662f\uff0c\u5982\u679c\u4e00\u4e2a\u6d88\u8d39\u8005\u7fa4\u7ec4\u5931\u53bb\u4e86\u6240\u6709\u6210\u5458\uff0c\u5219 Kafka \u53ea\u4f1a\u6309\u7167\u8fd9\u4e2a\u5c5e\u6027\u6307\u5b9a\u7684\u65f6\u95f4(\u9ed8\u8ba4\u4e3a 7 \u5929)\u4fdd\u7559\u504f\u79fb\u91cf\u3002\u4e00\u65e6\u504f\u79fb\u91cf\u88ab\u5220\u9664\uff0c\u5373\u4f7f\u6d88\u8d39\u8005\u7fa4\u7ec4\u53c8\u201c\u6d3b\u201d\u4e86\u8fc7\u6765\uff0c\u5b83\u4e5f\u4f1a\u50cf\u4e00\u4e2a\u5168\u65b0\u7684\u7fa4\u7ec4\u4e00\u6837\uff0c\u6ca1\u6709\u4e86\u8fc7\u53bb\u7684\u6d88\u8d39\u8bb0\u5fc6\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u884c\u4e3a\u5728\u4e0d\u540c\u7684\u7248\u672c\u4e2d\u7ecf\u5386\u4e86\u51e0\u6b21\u53d8\u5316\uff0c\u4e0d\u540c\u7684\u7248\u672c\u53ef\u80fd\u4f1a\u6709\u4e0d\u540c\uff0c\u7279\u522b\u662f2.1.0\u4e4b\u524d\u7684\u7248\u672c\u3002"}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u8005\u5206\u533a\u5206\u914d\u7b56\u7565",children:"\u6d88\u8d39\u8005\u5206\u533a\u5206\u914d\u7b56\u7565"}),"\n",(0,i.jsx)(n.p,{children:"\u5206\u533a\u4f1a\u88ab\u5206\u914d\u7ed9\u7fa4\u7ec4\u91cc\u7684\u6d88\u8d39\u8005\uff0cPartitionAssignor \u6839\u636e\u7ed9\u5b9a\u7684\u6d88\u8d39\u8005\u548c\u5b83\u4eec\u8ba2\u9605\u7684\u4e3b\u9898\u6765\u51b3\u5b9a\u54ea\u4e9b\u5206\u533a\u5e94\u8be5\u88ab\u5206\u914d\u7ed9\u54ea\u4e2a\u6d88\u8d39\u8005\u3002Kafka\u63d0\u4f9b\u4e86\u51e0\u79cd\u9ed8\u8ba4\u7684\u5206\u914d\u7b56\u7565\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"range"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u533a\u95f4\u7b56\u7565\u4f1a\u628a\u6bcf\u4e00\u4e2a\u4e3b\u9898\u7684\u82e5\u5e72\u4e2a\u8fde\u7eed\u5206\u533a\u5206\u914d\u7ed9\u6d88\u8d39\u8005\u3002\u5047\u8bbe\u6d88\u8d39\u8005 C1 \u548c\u6d88\u8d39\u8005 C2 \u540c\u65f6\u8ba2\u9605\u4e86\u4e3b\u9898T1\u548c\u4e3b\u9898 T2\uff0c\u5e76\u4e14\u6bcf\u4e2a\u4e3b\u9898\u6709 3 \u4e2a\u5206\u533a\u3002\u90a3\u4e48\u6d88\u8d39\u8005 C1 \u6709\u53ef\u80fd\u4f1a\u88ab\u5206\u914d\u5230\u8fd9\u4e24\u4e2a\u4e3b\u9898\u7684\u5206\u533a 0 \u548c\u5206\u533a 1\uff0c\u6d88\u8d39\u8005 C2 \u5219\u4f1a\u88ab\u5206\u914d\u5230\u8fd9\u4e24\u4e2a\u4e3b\u9898\u7684\u5206\u533a 2\u3002\u56e0\u4e3a\u6bcf\u4e2a\u4e3b\u9898\u62e5\u6709\u5947\u6570\u4e2a\u5206\u533a\uff0c\u5e76\u4e14\u90fd\u9075\u5faa\u4e00\u6837\u7684\u5206\u914d\u7b56\u7565\uff0c\u6240\u4ee5\u7b2c\u4e00\u4e2a\u6d88\u8d39\u8005\u4f1a\u5206\u914d\u5230\u6bd4\u7b2c\u4e8c\u4e2a\u6d88\u8d39\u8005\u66f4\u591a\u7684\u5206\u533a\u3002\u53ea\u8981\u4f7f\u7528\u4e86\u8fd9\u4e2a\u7b56\u7565\uff0c\u5e76\u4e14\u5206\u533a\u6570\u91cf\u65e0\u6cd5\u88ab\u6d88\u8d39\u8005\u6570\u91cf\u6574\u9664\uff0c\u5c31\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"roundRobin"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8f6e\u8be2\u7b56\u7565\u4f1a\u628a\u6240\u6709\u88ab\u8ba2\u9605\u7684\u4e3b\u9898\u7684\u6240\u6709\u5206\u533a\u6309\u987a\u5e8f\u9010\u4e2a\u5206\u914d\u7ed9\u6d88\u8d39\u8005\u3002\u5982\u679c\u4f7f\u7528\u8f6e\u8be2\u7b56\u7565\u4e3a\u6d88\u8d39\u8005 C1 \u548c\u6d88\u8d39\u8005 C2 \u5206\u914d\u5206\u533a\uff0c\u90a3\u4e48\u6d88\u8d39\u8005 C1 \u5c06\u5206\u914d\u5230\u4e3b\u9898 T1 \u7684\u5206\u533a 0 \u548c\u5206\u533a 2 \u4ee5\u53ca\u4e3b\u9898 T2 \u7684\u5206\u533a 1\uff0c\u6d88 \u8d39\u8005 C2 \u5c06\u5206\u914d\u5230\u4e3b\u9898 T1 \u7684\u5206\u533a 1 \u4ee5\u53ca\u4e3b\u9898 T2 \u7684\u5206\u533a 0 \u548c\u5206\u533a 2\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u5982\u679c\u6240\u6709\u6d88\u8d39\u8005\u90fd\u8ba2\u9605\u4e86\u76f8\u540c\u7684\u4e3b\u9898(\u8fd9\u79cd\u60c5\u51b5\u5f88\u5e38\u89c1)\uff0c\u90a3\u4e48\u8f6e\u8be2\u7b56\u7565\u4f1a\u7ed9\u6240\u6709\u6d88\u8d39\u8005\u90fd\u5206\u914d\u76f8\u540c\u6570\u91cf(\u6216\u6700\u591a\u5c31\u5dee\u4e00\u4e2a)\u7684\u5206\u533a\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"sticky"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u8bbe\u8ba1\u9ecf\u6027\u5206\u533a\u5206\u914d\u5668\u7684\u76ee\u7684\u6709\u4e24\u4e2a\uff1a\u4e00\u662f\u5c3d\u53ef\u80fd\u5747\u8861\u5730\u5206\u914d\u5206\u533a\uff0c\u4e8c\u662f\u5728\u8fdb\u884c\u518d\u5747\u8861\u65f6\u5c3d\u53ef\u80fd\u591a\u5730\u4fdd\u7559\u539f\u5148\u7684\u5206\u533a\u6240\u6709\u6743\u5173\u7cfb\uff0c\u51cf\u5c11\u5c06\u5206\u533a\u4ece\u4e00\u4e2a\u6d88\u8d39\u8005\u8f6c\u79fb\u7ed9\u53e6\u4e00\u4e2a\u6d88\u8d39\u8005\u6240\u5e26\u6765\u7684\u5f00\u9500\u3002\u5982\u679c\u6240\u6709\u6d88\u8d39\u8005\u90fd\u8ba2\u9605\u4e86\u76f8\u540c\u7684\u4e3b\u9898\uff0c\u90a3\u4e48\u9ecf\u6027\u5206\u914d\u5668\u521d\u59cb\u7684\u5206\u914d\u6bd4\u4f8b\u5c06\u4e0e\u8f6e\u8be2\u5206\u914d\u5668\u4e00\u6837\u5747\u8861\u3002\u540e\u7eed\u7684\u91cd\u65b0\u5206\u914d\u5c06\u540c\u6837\u4fdd\u6301\u5747\u8861\uff0c\u4f46\u51cf\u5c11\u4e86\u9700\u8981\u79fb\u52a8\u7684\u5206\u533a\u7684\u6570\u91cf\u3002\u5982\u679c\u540c\u4e00\u4e2a\u7fa4\u7ec4\u91cc\u7684\u6d88\u8d39\u8005\u8ba2\u9605\u4e86\u4e0d\u540c\u7684\u4e3b\u9898\uff0c\u90a3\u4e48\u9ecf\u6027\u5206\u914d\u5668\u7684\u5206\u914d\u6bd4\u4f8b\u5c06\u6bd4\u8f6e\u8be2\u5206\u914d\u5668\u66f4\u52a0\u5747\u8861\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"cooperative sticky"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u534f\u4f5c\u9ecf\u6027\u5206\u914d\u7b56\u7565\u4e0e\u9ecf\u6027\u5206\u914d\u5668\u4e00\u6837\uff0c\u53ea\u662f\u5b83\u652f\u6301\u534f\u4f5c(\u589e\u91cf\u5f0f)\u518d\u5747\u8861\uff0c\u5728\u8fdb\u884c\u518d\u5747\u8861\u65f6\u6d88\u8d39\u8005\u53ef\u4ee5\u7ee7\u7eed\u4ece\u6ca1\u6709\u88ab\u91cd\u65b0\u5206\u914d\u7684\u5206\u533a\u8bfb\u53d6\u6d88\u606f\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"partition.assignment.strategy "}),"\u6765\u914d\u7f6e\u5206\u533a\u7b56\u7565\uff0c\u9ed8\u8ba4\u503c\u662f ",(0,i.jsx)(n.code,{children:"org.apache.kafka.clients.consumer.RangeAssignor"}),"\uff0c\u5b83\u5b9e\u73b0\u4e86\u533a\u95f4\u7b56\u7565\u3002\u4f60\u4e5f\u53ef\u4ee5\u628a\u5b83\u6539\u6210 ",(0,i.jsx)(n.code,{children:"org.apache.kafka.clients.consumer.RoundRobinAssignor"}),"\u3001 ",(0,i.jsx)(n.code,{children:"org.apache.kafka.clients.consumer.StickyAssignor"})," \u6216 ",(0,i.jsx)(n.code,{children:"org.apache.kafka.clients.consumer.CooperativeStickyAssignor"}),"\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206 \u914d\u7b56\u7565\uff0c\u5982\u679c\u662f\u8fd9\u6837\uff0c\u5219\u9700\u8981\u628a partition.assignment.strategy \u8bbe\u7f6e\u6210\u81ea\u5b9a\u4e49\u7c7b\u7684\u540d\u5b57\u3002"]}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u4f4d\u79fb\u63d0\u4ea4",children:"\u6d88\u8d39\u4f4d\u79fb\u63d0\u4ea4"}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u8005\u6bcf\u6b21\u8c03\u7528 poll() \u65b9\u6cd5\uff0c\u5b83\u603b\u662f\u4f1a\u8fd4\u56de\u8fd8\u6ca1\u6709\u88ab\u6d88\u8d39\u8005\u8bfb\u53d6\u8fc7\u7684\u8bb0\u5f55\uff0cKafka \u4e0d\u50cf\u5176\u4ed6 JMS \u961f\u5217\u7cfb\u7edf\u90a3\u6837\u9700\u8981\u6536\u5230\u6765\u81ea\u6d88\u8d39 \u8005\u7684\u786e\u8ba4\uff0c\u5e76\u4e14\u6d88\u8d39\u8005\u53ef\u4ee5\u7528 Kafka \u6765\u8ffd\u8e2a\u5df2\u8bfb\u53d6\u7684\u6d88\u606f\u5728\u5206\u533a\u4e2d\u7684\u4f4d\u7f6e (\u504f\u79fb\u91cf)\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u4eec\u628a\u66f4\u65b0\u5206\u533a\u5f53\u524d\u8bfb\u53d6\u4f4d\u7f6e\u7684\u64cd\u4f5c\u53eb\u4f5c\u4f4d\u79fb\u63d0\u4ea4 \u3002\u4e0e\u4f20\u7edf\u7684\u6d88\u606f\u961f\u5217\u4e0d\u540c\uff0c",(0,i.jsx)(n.strong,{children:"Kafka \u4e0d\u4f1a\u63d0\u4ea4\u6bcf\u4e00\u6761\u8bb0\u5f55\uff0c\u6d88\u8d39\u8005\u4f1a\u5c06\u5df2\u6210\u529f\u5904\u7406\u7684\u6700\u540e\u4e00\u6761\u6d88\u606f\u63d0\u4ea4\u7ed9 Kafka\uff0c\u5e76\u5047\u5b9a\u8be5\u6d88\u606f\u4e4b\u524d\u7684\u6bcf\u4e00\u6761\u6d88\u606f\u90fd\u5df2\u6210\u529f\u5904\u7406\u3002"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u90a3\u4e48\u6d88\u8d39\u8005\u63d0\u4ea4\u504f\u79fb\u91cf\u662f\u901a\u8fc7\u5411 ",(0,i.jsx)(n.code,{children:"_consumer_offset"})," \u7684\u5185\u7f6e\u4e3b\u9898\u53d1\u9001\u6d88\u606f\uff0c\u6d88\u606f\u91cc\u5305\u542b\u6bcf\u4e2a\u5206\u533a\u7684\u504f\u79fb\u91cf\u3002\u5982\u679c\u6d88\u8d39\u8005\u4e00\u76f4\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff0c\u90a3\u4e48\u504f\u79fb\u91cf\u5c31\u6ca1\u6709\u4ec0\u4e48\u5b9e\u9645\u4f5c\u7528\u3002\u4f46\u662f\uff0c\u5982\u679c\u6d88\u8d39\u8005\u53d1\u751f\u5d29\u6e83\u6216\u6709\u65b0\u7684\u6d88\u8d39\u8005\u52a0\u5165\u7fa4\u7ec4\uff0c\u5219\u4f1a \u89e6\u53d1\u518d\u5747\u8861\u5b8c\uff0c\u518d\u5747\u8861\u6210\u4e4b\u540e\u6bcf\u4e2a\u6d88\u8d39\u8005\u53ef\u80fd\u4f1a\u88ab\u5206\u914d\u65b0\u7684\u5206\u533a\uff0c\u800c\u4e0d\u662f\u4e4b\u524d\u8bfb\u53d6\u7684\u90a3\u4e2a\u3002\u4e3a\u4e86\u80fd\u591f\u7ee7\u7eed\u4e4b\u524d\u7684\u5de5\u4f5c\uff0c\u6d88\u8d39\u8005\u9700\u8981\u8bfb\u53d6\u6bcf\u4e2a\u5206\u533a\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\uff0c\u7136\u540e\u4ece\u504f\u79fb\u91cf\u6307\u5b9a\u7684\u4f4d\u7f6e\u7ee7\u7eed\u8bfb\u53d6\u6d88\u606f\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u6d88\u8d39\u4f4d\u79fb\u5f88\u91cd\u8981\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5c0f\u4e8e\u5ba2\u6237\u7aef\u5904\u7406\u7684\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\uff0c\u90a3\u4e48\u5904\u4e8e\u4e24\u4e2a\u504f\u79fb\u91cf\u4e4b\u95f4\u7684\u6d88\u606f\u5c31\u4f1a\u88ab\u91cd\u590d\u5904\u7406\u3002"}),"\n"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-10.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u5927\u4e8e\u5ba2\u6237\u7aef\u5904\u7406\u7684\u6700\u540e\u4e00\u6761\u6d88\u606f\u7684\u504f\u79fb\u91cf\uff0c\u90a3\u4e48\u5904\u4e8e\u4e24\u4e2a\u504f\u79fb\u91cf\u4e4b\u95f4\u7684\u6d88\u606f\u5c31\u4f1a\u4e22\u5931\u3002"}),"\n"]}),"\n",(0,i.jsx)("div",{style:{textAlign:"center",width:"100%"},children:(0,i.jsx)("img",{src:"/analysis-project/img/kafka/kafka-11.png",alt:"image",style:{maxWidth:"50%",height:"auto",display:"block",margin:"0 auto"}})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u961f\u5217\u800c\u4e0d\u662f\u76f4\u63a5\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u6216\u8005\u5b58\u50a8\u6807\u8bc6\u6765\u7ef4\u62a4\u6d88\u8d39\u4f4d\u79fb\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u56e0\u4e3a\u6d88\u8d39\u4f4d\u79fb\u961f\u5217\u80fd\u63d0\u4f9b\u4e86\u66f4\u597d\u7684\u52a8\u6001\u7ba1\u7406\u3001\u5bb9\u9519\u80fd\u529b\u3001\u4e00\u81f4\u6027\u3001\u96c6\u4e2d\u7ba1\u7406\u548c\u6027\u80fd\u3002\u8fd9\u79cd\u8bbe\u8ba1\u5145\u5206\u5229\u7528\u4e86 Kafka \u7684\u5185\u90e8\u673a\u5236\u548c\u7279\u6027\uff0c\u4f7f\u5f97\u6d88\u8d39\u8005\u4f4d\u79fb\u7684\u7ba1\u7406\u66f4\u4e3a\u9ad8\u6548\u548c\u53ef\u9760\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4ece\u4e24\u4e2a\u65b9\u9762\u6765\u8003\u8651\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u53d1\u9001\u65b9\uff0c\u5373\u6d88\u606f\u6d88\u8d39\u540e\u63d0\u4ea4\u4f4d\u79fb\uff0c\u5982\u679c\u662f\u6587\u4ef6\u6216\u8005\u6807\u8bc6\u7b26\u5219\u4f1a\u9891\u7e41\u7684\u4fee\u6539\uff0c\u4e00\u65b9\u9762\u6548\u7387\u4f4e\u9700\u8981\u4fdd\u8bc1\u4fee\u6539\u7684\u6570\u636e\u5e76\u53d1\u5b89\u5168\uff0c\u800c\u4e14\u53e6\u4e00\u65b9\u9762\u5982\u679c\u4e2d\u95f4\u6709\u4efb\u4f55\u95ee\u9898\u90fd\u65e0\u6cd5\u6062\u590d\uff0c\u4f7f\u5f97\u63d0\u4ea4\u4e22\u5931\u800c\u6570\u636e\u4e0d\u4e00\u81f4\u3002"}),"\n",(0,i.jsxs)(n.li,{children:["\u4ece\u6d88\u8d39\u65b9\u8003\u8651\uff0c\u5373\u5982\u4f55\u4fdd\u8bc1\u6bcf\u4e00\u6b21\u90fd\u9ad8\u6548\u800c\u4e14\u662f\u8bfb\u53d6\u5230\u6700\u65b0\u7684\u6d88\u8d39\u4f4d\u79fb\uff1f","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Kafka \u5c06\u6bcf\u4e2a\u6d88\u8d39\u8005\u7ec4\u548c\u5206\u533a\u7684\u504f\u79fb\u91cf\u5b58\u50a8\u5728 ",(0,i.jsx)(n.code,{children:"__consumer_offsets"})," \u4e2d\u3002\u8fd9\u4e2a topic \u88ab\u5206\u4e3a 50 \u4e2a\u5206\u533a\uff0c\u7528\u6765\u5206\u6563\u8d1f\u8f7d\u5e76\u63d0\u9ad8\u8bfb\u53d6\u6548\u7387\u3002\u5f53\u8bfb\u53d6\u4f4d\u79fb\u65f6\uff0c\u901a\u8fc7\u7a00\u758f\u7d22\u5f15\u80fd\u5feb\u901f\u5b9a\u4f4d\u5230\u65b0\u7684\u4f4d\u79fb\u5206\u7247\u4e2d\uff0c\u56e0\u4e3a\u65e5\u5fd7\u90fd\u662f\u8ffd\u52a0\u7684\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u8bfb\u53d6\u6700\u672b\u5c3e\u7684\u8bb0\u5f55\u5c31\u80fd\u76f4\u63a5\u83b7\u53d6\u5230\u6700\u65b0\u7684\u4f4d\u79fb\u63d0\u4ea4\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:["\u867d\u7136 ",(0,i.jsx)(n.code,{children:"__consumer_offsets"})," \u662f\u4e00\u4e2a\u961f\u5217\uff0c\u4f46Kafka\u5e76\u4e0d\u7ef4\u62a4\u5bf9\u5e94\u7684\u6d88\u8d39\u8005\uff0c\u800c\u662f\u76f4\u63a5\u5c06\u6d88\u606f\u5185\u5bb9\u538b\u7f29(compact log)\u53ea\u4fdd\u7559\u6700\u65b0\u7684\u6d88\u606f\uff0c\u5220\u9664\u65e7\u7684\u6d88\u606f\u6765\u7ef4\u62a4\u6700\u65b0\u7684\u63d0\u4ea4\u4f4d\u79fb\uff0c\u8fd9\u6837\u6765\u4fdd\u8bc1\u4f4d\u79fb\u65e5\u5fd7\u961f\u5217\u7684\u9ad8\u6548\u548c\u7d27\u51d1\uff0c\u800c\u4e14\u56e0\u4e3aKafka\u6d88\u606f\u672c\u8eab\u5c31\u662f\u4e2a\u952e\u503c\u5bf9\uff0c\u6240\u4ee5Kafka\u7684compact log\u662f\u975e\u5e38\u9ad8\u6548\u7684\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6d88\u8d39\u4f4d\u79fb\u63d0\u4ea4\u65b9\u5f0f"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u81ea\u52a8\u63d0\u4ea4\u504f\u79fb\u91cf\uff1a\u5982\u679c ",(0,i.jsx)(n.code,{children:"enable.auto.commit"})," \u88ab\u8bbe\u7f6e\u4e3a true\uff0c\u90a3\u4e48\u6bcf\u8fc7 5 \u79d2\uff0c\u6d88\u8d39\u8005\u5c31\u4f1a\u81ea\u52a8\u63d0\u4ea4 poll() \u8fd4\u56de\u7684\u6700\u5927\u504f\u79fb\u91cf\u3002\u63d0\u4ea4\u65f6\u95f4\u95f4\u9694\u901a\u8fc7",(0,i.jsx)(n.code,{children:"auto.commit.interval.ms"})," \u6765\u8bbe\u5b9a\uff0c\u9ed8\u8ba4\u662f 5 \u79d2\u3002\u4e0e\u6d88\u8d39\u8005\u4e2d\u7684\u5176\u4ed6\u5904\u7406\u8fc7\u7a0b\u4e00\u6837\uff0c\u81ea\u52a8\u63d0\u4ea4\u4e5f\u662f\u5728 \u8f6e\u8be2\u5faa\u73af\u4e2d\u8fdb\u884c\u7684\u3002\u6d88\u8d39\u8005\u4f1a\u5728\u6bcf\u6b21\u8f6e\u8be2\u65f6\u68c0\u67e5\u662f\u5426\u8be5\u63d0\u4ea4\u504f\u79fb\u91cf\u4e86\uff0c\u5982\u679c\u662f\uff0c\u5c31\u4f1a\u63d0\u4ea4\u6700\u540e\u4e00\u6b21\u8f6e\u8be2\u8fd4 \u56de\u7684\u504f\u79fb\u91cf\u3002\u4e0d\u8fc7\uff0c\u5728\u4f7f\u7528\u8fd9\u79cd\u63d0\u4ea4\u65b9\u5f0f\u4e4b\u524d\uff0c\u9700\u8981\u77e5\u9053\u5b83\u4f1a\u5e26\u6765\u600e\u6837\u7684\u540e\u679c\u3002",(0,i.jsx)(n.em,{children:"\u867d\u7136\u81ea\u52a8\u63d0\u4ea4\u5f88\u65b9\u4fbf\uff0c\u4f46\u662f\u6ca1\u6709\u4e3a\u907f\u514d\u5f00\u53d1\u8005\u91cd\u590d\u5904\u7406\u6d88\u606f\u7559\u6709\u4f59\u5730\u3002"})]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5047\u8bbe\u6211\u4eec\u4f7f\u7528\u9ed8\u8ba4\u7684 5 \u79d2\u63d0\u4ea4\u65f6\u95f4\u95f4\u9694\uff0c\u5e76\u4e14\u6d88\u8d39\u8005\u5728\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u504f\u79fb\u91cf\u4e4b\u540e 3 \u79d2\u4f1a\u53d1\u751f\u5d29\u6e83\u3002\u518d\u5747\u8861\u5b8c\u6210\u4e4b\u540e\uff0c\u63a5\u7ba1\u5206\u533a\u7684\u6d88\u8d39\u8005\u5c06\u4ece\u6700\u540e\u4e00\u6b21\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\u7684\u4f4d\u7f6e\u5f00\u59cb\u8bfb\u53d6\u6d88\u606f\u3002\u8fd9\u4e2a\u504f\u79fb\u91cf\u5b9e\u9645\u4e0a\u843d\u540e\u4e86 3 \u79d2\uff0c\u6240\u4ee5\u5728\u8fd9 3 \u79d2\u5185\u5230\u8fbe\u7684\u6d88\u606f\u4f1a\u88ab\u91cd\u590d\u5904\u7406\u3002\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u63d0\u4ea4\u65f6\u95f4\u95f4\u9694\u6765\u66f4\u9891\u7e41\u5730\u63d0\u4ea4\u504f\u79fb\u91cf\uff0c\u7f29\u5c0f\u53ef\u80fd\u5bfc\u81f4\u91cd\u590d\u6d88\u606f\u7684\u65f6\u95f4\u7a97\u53e3\uff0c\u4f46\u65e0\u6cd5\u5b8c\u5168\u907f\u514d\u3002"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u5728\u4f7f\u7528\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u5230\u4e86\u8be5\u63d0\u4ea4\u504f\u79fb\u91cf\u7684\u65f6\u5019\uff0c\u8f6e\u8be2\u65b9\u6cd5\u5c06\u63d0\u4ea4\u4e0a\u4e00\u6b21\u8f6e\u8be2\u8fd4\u56de\u7684\u504f\u79fb\u91cf\uff0c\u4f46\u5b83\u5e76\u4e0d\u77e5\u9053 \u5177\u4f53\u54ea\u4e9b\u6d88\u606f\u5df2\u7ecf\u88ab\u5904\u7406\u8fc7\u4e86\uff0c\u6240\u4ee5\uff0c\u5728\u518d\u6b21\u8c03\u7528 poll() \u4e4b\u524d\uff0c\u8981\u786e\u4fdd\u4e0a\u4e00\u6b21 poll() \u8fd4\u56de\u7684\u6240\u6709\u6d88 \u606f\u90fd\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5(\u8c03\u7528 close() \u65b9\u6cd5\u4e5f\u4f1a\u81ea\u52a8\u63d0\u4ea4\u504f\u79fb\u91cf)\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\u8fd9\u4e0d\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff0c\u4f46\u5728\u5904\u7406\u5f02\u5e38\u6216\u63d0\u524d\u9000\u51fa\u8f6e\u8be2\u5faa\u73af\u65f6\u9700\u8981\u7279\u522b\u5c0f\u5fc3\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u624b\u52a8\u63d0\u4ea4\u5f53\u524d\u6d88\u8d39\u4f4d\u79fb\uff1a\u628a ",(0,i.jsx)(n.code,{children:"enable.auto.commit"})," \u8bbe\u7f6e\u4e3a false\uff0c\u8ba9\u5e94\u7528\u7a0b\u5e8f\u81ea\u5df1\u51b3\u5b9a\u4f55\u65f6\u63d0\u4ea4\u504f\u79fb\u91cf\u3002\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"commitSync()"}),"\u63d0\u4ea4\u504f\u79fb\u91cf\u662f\u6700\u7b80\u5355\u53ef\u9760\u7684\u65b9\u5f0f\u3002\u8fd9\u4e2a API \u4f1a\u63d0\u4ea4 poll() \u8fd4\u56de\u7684\u6700\u65b0\u504f\u79fb\u91cf\uff0c\u63d0\u4ea4\u6210\u529f\u540e\u9a6c\u4e0a\u8fd4\u56de\uff0c \u5982\u679c\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\u63d0\u4ea4\u5931\u8d25\u5c31\u629b\u51fa\u5f02\u5e38\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,i.jsx)(n.code,{children:"commitSync()"})," \u5c06\u4f1a\u63d0\u4ea4 ",(0,i.jsx)(n.code,{children:"poll()"})," \u8fd4\u56de\u7684\u6700\u65b0\u504f\u79fb\u91cf\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u4f60\u5728\u5904\u7406\u5b8c\u6240\u6709\u8bb0\u5f55 \u4e4b\u524d\u5c31\u8c03\u7528\u4e86",(0,i.jsx)(n.code,{children:" commitSync()"}),"\uff0c\u90a3\u4e48\u4e00\u65e6\u5e94\u7528\u7a0b\u5e8f\u53d1\u751f\u5d29\u6e83\uff0c\u5c31\u4f1a\u6709\u4e22\u5931\u6d88\u606f\u7684\u98ce\u9669(\u6d88\u606f\u5df2\u88ab\u63d0\u4ea4\u4f46 \u672a\u88ab\u5904\u7406)\u3002\u5982\u679c\u5e94\u7528\u7a0b\u5e8f\u5728\u5904\u7406\u8bb0\u5f55\u65f6\u53d1\u751f\u5d29\u6e83\uff0c\u4f46 ",(0,i.jsx)(n.code,{children:"commitSync()"})," \u8fd8\u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u90a3\u4e48\u4ece\u6700\u8fd1\u6279\u6b21 \u7684\u5f00\u59cb\u4f4d\u7f6e\u5230\u53d1\u751f\u518d\u5747\u8861\u65f6\u7684\u6240\u6709\u6d88\u606f\u90fd\u5c06\u88ab\u518d\u6b21\u5904\u7406\u3002\u6240\u4ee5\u770b\u5c06\u4ee3\u7801\u5199\u6210\u4e24\u6bb5\uff0c\u7b2c\u4e00\u6bb5\u5904\u7406\u62c9\u53d6\u7684\u6d88\u606f\uff0c\u4fdd\u8bc1\u6d88\u606f\u88ab\u5168\u90e8\u5b89\u5168\u5904\u7406\u4e86\uff0c\u7b2c\u4e8c\u6bb5\u518d\u5728try catch\u4e2d\u63d0\u4ea4\u4f4d\u79fb\uff0c\u4fdd\u8bc1\u4f4d\u79fb\u88ab\u6b63\u786e\u63d0\u4ea4\uff0c\u56e0\u4e3a\u53ea\u8981\u6ca1\u6709\u53d1\u751f\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\uff0c",(0,i.jsx)(n.code,{children:"commitSync()"})," \u65b9\u6cd5\u5c31\u4f1a\u4e00\u76f4\u5c1d\u8bd5\u76f4\u81f3\u63d0\u4ea4\u6210\u529f\u3002\u53cd\u4e4b\u5982\u679c\u63d0\u4ea4\u5931\u8d25\uff0c\u5c31\u628a\u5f02\u5e38\u8bb0\u5f55\u5230\u9519\u8bef\u65e5\u5fd7\u91cc\u6216\u8005\u505a\u5176\u4ed6\u7684\u81ea\u5b9a\u4e49\u5904\u7406\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5f02\u6b65\u63d0\u4ea4\uff1a\u624b\u52a8\u63d0\u4ea4\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5728 broker \u5bf9\u8bf7\u6c42\u505a\u51fa\u56de\u5e94\u4e4b\u524d\uff0c\u5e94\u7528\u7a0b\u5e8f\u4f1a\u4e00\u76f4\u963b\u585e\uff0c\u8fd9\u6837\u4f1a\u9650\u5236\u5e94\u7528\u7a0b\u5e8f\u7684\u541e\u5410\u91cf\u3002\u5728\u63d0\u4ea4\u6210\u529f\u6216\u78b0\u5230\u65e0\u6cd5\u6062\u590d\u7684\u9519\u8bef\u4e4b\u524d\uff0c",(0,i.jsx)(n.code,{children:"commitSync()"})," \u4f1a\u4e00\u76f4\u91cd\u8bd5\uff0c\u4f46 ",(0,i.jsx)(n.code,{children:"commitAsync()"})," \u4e0d\u4f1a\uff0c\u4e4b\u6240\u4ee5\u4e0d\u8fdb\u884c\u91cd\u8bd5\uff0c\u662f\u56e0\u4e3a ",(0,i.jsx)(n.code,{children:"commitAsync()"})," \u5728\u6536\u5230\u670d\u52a1\u5668\u7aef\u7684\u54cd\u5e94 \u65f6\uff0c\u53ef\u80fd\u5df2\u7ecf\u6709\u4e00\u4e2a\u66f4\u5927\u7684\u504f\u79fb\u91cf\u63d0\u4ea4\u6210\u529f\u3002\u5047\u8bbe\u6211\u4eec\u53d1\u51fa\u4e00\u4e2a\u63d0\u4ea4\u504f\u79fb\u91cf 2000 \u7684\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u65f6\u5019\u51fa\u73b0 \u4e86\u77ed\u6682\u7684\u901a\u4fe1\u95ee\u9898\uff0c\u670d\u52a1\u5668\u6536\u4e0d\u5230\u8bf7\u6c42\uff0c\u81ea\u7136\u4e5f\u4e0d\u4f1a\u505a\u51fa\u54cd\u5e94\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u6211\u4eec\u5904\u7406\u4e86\u53e6\u5916\u4e00\u6279\u6d88\u606f\uff0c\u5e76 \u6210\u529f\u63d0\u4ea4\u4e86\u504f\u79fb\u91cf 3000\u3002\u5982\u679c\u6b64\u65f6 ",(0,i.jsx)(n.code,{children:"commitAsync()"}),"\u91cd\u65b0\u5c1d\u8bd5\u63d0\u4ea4\u504f\u79fb\u91cf 2000\uff0c\u5219\u6709\u53ef\u80fd\u5728\u504f\u79fb\u91cf 3000 \u4e4b\u540e\u63d0\u4ea4\u6210\u529f\u3002\u8fd9\u4e2a\u65f6\u5019\u5982\u679c\u53d1\u751f\u5206\u533a\u518d\u5747\u8861\uff0c\u5c31\u4f1a\u5bfc\u81f4\u6d88\u606f\u91cd\u590d\u6d88\u8d39*\uff08\u56e0\u4e3aKafka\u6d88\u8d39\u8005\u5982\u679c\u4e00\u76f4\u5728\u6d88\u8d39\u6570\u636e\uff0c\u662f\u4e0d\u4f1a\u9891\u7e41\u5730\u53bb\u83b7\u53d6\u6700\u65b0\u7684\u6d88\u8d39\u4f4d\u79fb\uff0c\u800c\u662f\u4f7f\u7528\u81ea\u5df1\u7ef4\u62a4\u7684\u6d88\u8d39\u4f4d\u79fb\uff09*\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u907f\u514d\u56e0\u4e3a\u5f02\u6b65\u63d0\u4ea4\u6d88\u8d39\u4f4d\u79fb\u800c\u5bfc\u81f4\u91cd\u590d\u6d88\u8d39\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a",(0,i.jsx)(n.code,{children:"commitAsync()"}),"\u56de\u8c03\uff0c\u56de\u8c03\u4f1a\u5728 broker\u8fd4\u56de\u54cd\u5e94\u65f6\u6267\u884c\u3002\u7136\u540e\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u6d88\u8d39\u8005\u5e8f\u5217\u53f7\u53d8\u91cf\u6765\u7ef4\u62a4\u5f02\u6b65\u63d0\u4ea4\u7684\u987a\u5e8f\u3002\u6bcf\u6b21\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"commitAsync()"}),"\u540e\u589e \u52a0\u5e8f\u5217\u53f7\uff0c\u5e76\u5728\u56de\u8c03\u4e2d\u66f4\u65b0\u5e8f\u5217\u53f7\u53d8\u91cf\u3002\u5728\u51c6\u5907\u597d\u8fdb\u884c\u91cd\u8bd5\u65f6\uff0c\u5148\u68c0\u67e5\u56de\u8c03\u7684\u5e8f\u5217\u53f7\u4e0e\u5e8f\u5217\u53f7\u53d8\u91cf\u662f \u5426\u76f8\u7b49\u3002\u5982\u679c\u76f8\u7b49\uff0c\u5c31\u8bf4\u660e\u6ca1\u6709\u65b0\u7684\u63d0\u4ea4\uff0c\u53ef\u4ee5\u5b89\u5168\u5730\u8fdb\u884c\u91cd\u8bd5\u3002\u5982\u679c\u5e8f\u5217\u53f7\u53d8\u91cf\u6bd4\u8f83\u5927\uff0c\u5219\u8bf4\u660e\u5df2 \u7ecf\u6709\u65b0\u7684\u63d0\u4ea4\u4e86\uff0c\u6b64\u65f6\u5e94\u8be5\u505c\u6b62\u91cd\u8bd5"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u624b\u52a8\u63d0\u4ea4\u7279\u5b9a\u4f4d\u79fb\uff1a\u6d88\u8d39\u8005 API \u5141\u8bb8\u5728\u8c03\u7528 commitSync() \u548c commitAsync() \u65f6\u4f20\u7ed9\u5b83\u4eec\u60f3\u8981\u63d0\u4ea4\u7684\u5206\u533a\u548c\u504f \u79fb\u91cf\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"consumerrebalancelistener",children:"ConsumerRebalanceListener"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ConsumerRebalanceListener"})," \u662f Kafka \u63d0\u4f9b\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u5141\u8bb8\u7528\u6237\u5728\u6d88\u8d39\u8005\u518d\u5e73\u8861\uff08rebalance\uff09\u4e8b\u4ef6\u53d1\u751f\u65f6\u6267\u884c\u4e00\u4e9b\u81ea\u5b9a\u4e49\u903b\u8f91\u3002",(0,i.jsx)(n.code,{children:"ConsumerRebalanceListener"})," \u6709\u4e24\u4e2a\u4e3b\u8981\u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"void onPartitionsRevoked(Collection<TopicPartition> partitions)"}),"\uff1a\u5728\u5206\u533a\u88ab\u91cd\u65b0\u5206\u914d\u7ed9\u5176\u4ed6\u6d88\u8d39\u8005\u4e4b\u524d\u8c03\u7528\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"void onPartitionsAssigned(Collection<TopicPartition> partitions)"}),"\uff1a\u5728\u5206\u533a\u88ab\u5206\u914d\u7ed9\u8be5\u6d88\u8d39\u8005\u4e4b\u540e\u8c03\u7528\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'        Map<TopicPartition, Long> currentOffsets = new HashMap<>();\n        consumer.subscribe(Collections.singletonList(topic), new CustomRebalanceListener(consumer, currentOffsets));\n\n        try {\n            while (true) {\n                ConsumerRecords<String, String> records = consumer.poll(100);\n                for (ConsumerRecord<String, String> record : records) {\n                    System.out.printf("Consumed record with key %s and value %s%n", record.key(), record.value());\n                    currentOffsets.put(new TopicPartition(record.topic(), record.partition()), record.offset() + 1);\n                }\n            }\n        } finally {\n            consumer.close();\n        }\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u6d88\u8d39\u8005\u4f18\u96c5\u9000\u51fa",children:"\u6d88\u8d39\u8005\u4f18\u96c5\u9000\u51fa"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u786e\u5b9a\u9a6c\u4e0a\u8981\u5173\u95ed\u6d88\u8d39\u8005(\u5373\u4f7f\u6d88\u8d39\u8005\u8fd8\u5728\u7b49\u5f85\u4e00\u4e2a poll() \u8fd4\u56de)\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"consumer.wakeup()"}),"\u3002\u5982\u679c\u8f6e\u8be2\u5faa\u73af\u8fd0\u884c\u5728\u4e3b\u7ebf\u7a0b\u4e2d\uff0c\u90a3\u4e48\u53ef\u4ee5\u5728 ",(0,i.jsx)(n.code,{children:"ShutdownHook"}),"\u91cc\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",(0,i.jsx)(n.code,{children:"consumer.wakeup()"})," \u662f\u6d88\u8d39\u8005\u552f\u4e00\u4e00\u4e2a\u53ef\u4ee5\u5728\u5176\u4ed6\u7ebf\u7a0b\u4e2d\u5b89\u5168\u8c03\u7528\u7684\u65b9\u6cd5\u3002\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"consumer.wakeup()"})," \u4f1a\u5bfc\u81f4 poll() \u629b\u51fa ",(0,i.jsx)(n.code,{children:"WakeupException"}),"\uff0c\u5982\u679c\u8c03\u7528 ",(0,i.jsx)(n.code,{children:"consumer.wakeup() "}),"\u65f6 \u7ebf\u7a0b\u6ca1\u6709\u5728\u8f6e\u8be2\uff0c\u90a3\u4e48\u5f02\u5e38\u5c06\u5728\u4e0b\u4e00\u6b21\u8c03\u7528 poll() \u65f6\u629b\u51fa\u3002\u4e0d\u4e00\u5b9a\u8981\u5904\u7406 ",(0,i.jsx)(n.code,{children:"WakeupException"}),"\uff0c"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6216\u8005\u5728\u6d88\u8d39\u8005\u5faa\u73af\u4e2d\u7ef4\u62a4\u4e00\u4e2a",(0,i.jsx)(n.code,{children:"boolean"}),"\u503c\uff0c\u6765\u63a5\u6536\u9000\u51fa\u6807\u8bc6\u3002"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["\u5173\u952e\u5c31\u662f\u5728\u9000\u51fa\u7ebf\u7a0b\u4e4b\u524d\u5fc5\u987b\u8c03\u7528",(0,i.jsx)(n.code,{children:"consumer.close()"}),"\u3002\u6d88\u8d39\u8005\u5728\u88ab\u5173\u95ed\u65f6\u4f1a\u63d0\u4ea4\u8fd8\u6ca1\u6709\u63d0\u4ea4\u7684\u504f\u79fb\u91cf\uff0c\u5e76\u5411\u6d88\u8d39 \u8005\u534f\u8c03\u5668\u53d1\u9001\u6d88\u606f\uff0c\u544a\u77e5\u81ea\u5df1\u6b63\u5728\u79bb\u5f00\u7fa4\u7ec4\u3002\u534f\u8c03\u5668\u4f1a\u7acb\u5373\u89e6\u53d1\u518d\u5747\u8861\uff0c\u88ab\u5173\u95ed\u7684\u6d88\u8d39\u8005\u6240\u62e5\u6709\u7684\u5206\u533a\u5c06 \u88ab\u91cd\u65b0\u5206\u914d\u7ed9\u7fa4\u7ec4\u91cc\u5176\u4ed6\u7684\u6d88\u8d39\u8005\uff0c\u4e0d\u9700\u8981\u7b49\u5f85\u4f1a\u8bdd\u8d85\u65f6\u3002"]})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var i=r(6540);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);